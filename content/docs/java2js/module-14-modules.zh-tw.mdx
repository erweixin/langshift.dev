---
title: "Module 14: ES6+ Modules"
description: "掌握 JavaScript ES6 模組、imports 和 exports"
---

## Module 14: ES6+ Modules

JavaScript 模組允許你將程式碼分割成單獨的文件，使程式碼更易維護和重用。

## Learning Objectives

完成本模組後，你將：
✅ 理解 ES6 模組語法
✅ 掌握 import 和 export 語句
✅ 學習 default vs named exports
✅ 理解模組加載
✅ 知道常見模組模式
✅ 掌握程式碼組織的最佳實踐

## Modules: Java vs JavaScript

<UniversalEditor title="模組系統比較">
```java !! java
// Java - Packages 和 imports
package com.example.app;

import java.util.List;
import java.util.ArrayList;

public class MyClass {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
    }
}
```

```javascript !! js
// JavaScript - ES6 modules
// utils.js
export function add(a, b) {
    return a + b;
}

export const PI = 3.14159;

// main.js
import { add, PI } from "./utils.js";
import MyClass from "./MyClass.js";
```
</UniversalEditor>

## Exporting

<UniversalEditor title="導出">
```javascript !! js
// Named exports
export const PI = 3.14159;
export function add(a, b) {
    return a + b;
}
export class Calculator {
    // ...
}

// Export list
const name = "John";
const age = 25;
function greet() {
    console.log("Hello!");
}
export { name, age, greet };

// Export with rename
export { greet as sayHello };

// Default export
export default class UserService {
    // ...
}

// Mixed exports（一個 default + named）
export default class API {
    // ...
}
export const BASE_URL = "https://api.example.com";
export function get(endpoint) {
    // ...
}

// Re-exporting
export { add, subtract } from "./math.js";
export * from "./utils.js";
export { default as Calculator } from "./calc.js";
```
</UniversalEditor>

## Importing

<UniversalEditor title="導入">
```javascript !! js
// Named imports
import { add, subtract } from "./math.js";
import { add as sum } from "./math.js";

// Default import
import Calculator from "./calc.js";

// Mixed imports
import UserService, { BASE_URL, get } from "./api.js";

// Import all（namespace import）
import * as math from "./math.js";
math.add(1, 2);

// Import side effects（無導入）
import "./polyfills.js";

// Dynamic import（async）
const module = await import("./math.js");
const { add } = module;

// Lazy loading
button.addEventListener("click", async () => {
    const { handleAuth } = await import("./auth.js");
    handleAuth();
});
```
</UniversalEditor>

## Module Structure

<UniversalEditor title="模組組織">
```javascript !! js
// file structure:
// src/
//   utils/
//     math.js
//     string.js
//   services/
//     api.js
//     auth.js
//   components/
//     Button.js
//     Modal.js
//   main.js

// utils/math.js
export function add(a, b) { return a + b; }
export function subtract(a, b) { return a - b; }

// utils/index.js (barrel file)
export * from "./math.js";
export * from "./string.js";

// main.js
import { add, capitalize } from "./utils/index.js";
import { get } from "./services/api.js";
```
</UniversalEditor>

## Best Practices

<UniversalEditor title="模組最佳實踐">
```javascript !! js
// 1. 對工具使用 named exports
// utils.js
export function add(a, b) { return a + b; }

// 2. 對主類別/組件使用 default export
// UserService.js
export default class UserService {
    // ...
}

// 3. 按功能組織
// features/auth/
//   auth.js
//   login.js
//   logout.js

// 4. 使用 index.js 進行乾淨導入
// components/index.js
export { default as Button } from "./Button.js";
export { default as Modal } from "./Modal.js";

// 5. 避免循環依賴
// Bad: a.js imports b.js, b.js imports a.js
// Good: 創建共享模組 c.js

// 6. 對程式碼分割使用動態導入
const router = {
    home: () => import("./pages/Home.js"),
    about: () => import("./pages/About.js")
};
```
</UniversalEditor>

## Common Patterns

<UniversalEditor title="模組模式">
```javascript !! js
// Pattern 1: Singleton
let instance;
export default class Database {
    constructor() {
        if (instance) {
            return instance;
        }
        instance = this;
    }
}

// Pattern 2: Factory
export function createClient(config) {
    return new APIClient(config);
}

// Pattern 3: 模組與私有狀態
const privateData = new WeakMap();

export class User {
    constructor(name) {
        privateData.set(this, { secret: "xyz" });
        this.name = name;
    }

    getSecret() {
        return privateData.get(this).secret;
    }
}
```
</UniversalEditor>

## Summary

### Key Takeaways

1. **Named Exports:** 每個模組多個
2. **Default Export:** 每個模組一個
3. **Imports:** Named、default、namespace
4. **Dynamic:** import() 進行程式碼分割
5. **Organization:** 基於功能的文件夾

## What's Next?

恭喜！你已經完成了 JavaScript 基礎到進階的學習之旅。繼續練習和構建專案來巩固你的知識！
