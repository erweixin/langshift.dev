---
title: "模块 0：JavaScript 语言简介"
description: "了解 JavaScript 的历史、设计理念，并为 Java 开发者设置开发环境"
---

## JavaScript 语言历史与设计理念

JavaScript 由 Brendan Eich 于 1995 年在 Netscape 公司创建（仅用了 10 天！）。最初命名为 Mocha，后改为 LiveScript，最后为了借助 Java 当时的人气而更名为 JavaScript。尽管名字相似，JavaScript 和 Java 是两种完全不同的语言，有着不同的设计目标。

### 为什么创建 JavaScript

JavaScript 的出现源于对一种可以在 Web 浏览器中运行的轻量级脚本语言的需求：

- **Java 太重了**，不适合简单的 Web 交互
- **HTML 是静态的**，缺乏交互性
- **浏览器中没有客户端逻辑**
- **Web 页面需要**动态行为，无需服务器往返

JavaScript 的创建者希望一种语言：
- 可以直接嵌入到 HTML 中
- 对初学者来说简单易学
- 为 Web 页面提供动态行为
- 在不同浏览器中都能工作

### JavaScript 的设计理念

JavaScript 的设计遵循以下核心原则：

#### 1. 动态类型
- **无需类型声明**：变量可以保存任何类型
- **运行时类型检查**：类型在执行期间确定
- **灵活的类型转换**：自动类型强制转换
- **快速原型开发**：减少样板代码

<UniversalEditor title="动态类型 vs 静态类型">
```java !! java
// Java - 静态类型
String name = "John";
int age = 25;
boolean isActive = true;

// age = "twenty five";  // 编译错误！
// 必须显式声明类型
```

```javascript !! js
// JavaScript - 动态类型
let name = "John";
let age = 25;
let isActive = true;

age = "twenty five";  // 有效！类型可以改变
// 无需类型声明
```
</UniversalEditor>

#### 2. 一等函数
- **函数是值**：可以赋值给变量
- **高阶函数**：可以接受和返回函数
- **闭包**：函数保留对其作用域的访问
- **函数式编程**：支持 map、filter、reduce

<UniversalEditor title="函数：Java vs JavaScript">
```java !! java
// Java - 函数是类方法
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }

    // 不能直接将方法作为参数传递
    // 需要接口或 lambda 表达式（Java 8+）
}
```

```javascript !! js
// JavaScript - 函数是一等公民
const add = function(a, b) {
    return a + b;
};

// 箭头函数（ES6+）
const multiply = (a, b) => a * b;

// 函数可以作为参数传递
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(n => n * 2);

// 高阶函数
function withLogging(fn) {
    return function(...args) {
        console.log('Calling', fn.name);
        return fn(...args);
    };
}
```
</UniversalEditor>

#### 3. 基于原型的继承
- **传统上没有类**：对象从其他对象继承
- **原型**：每个对象都有一个原型链
- **动态行为**：可以在运行时修改对象
- **ES6 类**：原型之上的语法糖

<UniversalEditor title="继承模型">
```java !! java
// Java - 基于类的继承
public class Animal {
    public void speak() {
        System.out.println("Some sound");
    }
}

public class Dog extends Animal {
    @Override
    public void speak() {
        System.out.println("Woof!");
    }
}

// 使用
Animal dog = new Dog();
dog.speak();  // "Woof!"
```

```javascript !! js
// JavaScript - 基于原型的继承
const animal = {
    speak() {
        console.log("Some sound");
    }
};

const dog = Object.create(animal);
dog.speak = function() {
    console.log("Woof!");
};

dog.speak();  // "Woof!"

// ES6 类语法（语法糖）
class Animal {
    speak() {
        console.log("Some sound");
    }
}

class Dog extends Animal {
    speak() {
        console.log("Woof!");
    }
}

const dog2 = new Dog();
dog2.speak();  // "Woof!"
```
</UniversalEditor>

#### 4. 事件驱动架构
- **事件循环**：单线程与事件队列
- **异步**：非阻塞 I/O 操作
- **回调**：事件完成时调用的函数
- **Promise/async-await**：现代异步处理

<UniversalEditor title="并发模型">
```java !! java
// Java - 多线程
public class DataLoader {
    public String loadData() {
        // 阻塞线程直到数据加载
        String data = fetchDataFromDatabase();
        return data;
    }

    public static void main(String[] args) {
        // 每个线程独立运行
        Thread thread1 = new Thread(() -> {
            new DataLoader().loadData();
        });
        thread1.start();
    }
}
```

```javascript !! js
// JavaScript - 事件驱动，单线程
function loadData() {
    return new Promise((resolve) => {
        // 非阻塞，继续执行
        setTimeout(() => {
            resolve("Data loaded!");
        }, 1000);
    });
}

// Async/await（现代方法）
async function main() {
    console.log("Loading...");
    const data = await loadData();
    console.log(data);
    // 所有代码在单线程上通过事件循环运行
}

main();
```
</UniversalEditor>

## 与 Java 的比较

| 特性 | Java | JavaScript |
|---------|------|------------|
| **范式** | 面向对象（基于类） | 多范式（基于原型、函数式） |
| **类型** | 静态（必须声明类型） | 动态（运行时确定类型） |
| **执行** | 编译为字节码，在 JVM 上运行 | 在浏览器或 Node.js 中解释/JIT 编译 |
| **环境** | JVM（服务器、桌面、Android） | 浏览器、Node.js（服务器）、各种嵌入环境 |
| **并发** | 多线程，共享内存 | 单线程与事件循环 |
| **继承** | 类继承（extends、implements） | 原型链（类语法是语法糖） |
| **函数** | 方法（附加到类） | 一等公民（可以传递） |
| **内存** | 手动对象生命周期，GC | GC，自动内存管理 |
| **部署** | JAR/WAR 文件，需要 JVM | 嵌入 HTML、npm 包、独立运行 |
| **包管理** | Maven、Gradle | npm、yarn、pnpm |
| **标准库** | 广泛、面向企业 | 较小、面向 Web |

## 编译 vs 解释

### Java（编译为字节码）

Java 代码经历编译过程：

1. **源代码**（`.java` 文件）被编译为字节码
2. **字节码**（`.class` 文件）在 JVM 上运行
3. **JIT 编译器**优化热点代码路径
4. **静态类型**在编译时捕获错误

**优点：**
- JIT 编译后执行速度快
- 编译时错误检查
- 强类型安全
- 优化的性能

**缺点：**
- 需要编译步骤
- 冗长的语法
- 更大的内存占用
- 启动时间较慢

### JavaScript（解释/JIT）

JavaScript 的执行因环境而异：

**在浏览器中：**
1. **源代码**立即解析和执行
2. **JIT 编译**优化常用代码
3. **动态类型**提供灵活性
4. **事件循环**处理异步操作

**在 Node.js 中：**
1. **V8 引擎**编译为机器码
2. **即时**优化
3. **无浏览器 DOM** - 服务器端 API

<UniversalEditor title="执行模型比较">
```java !! java
// Java - 先编译后运行
// 文件：HelloWorld.java
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}

// 编译
$ javac HelloWorld.java

// 运行
$ java HelloWorld
Hello, World!
```

```javascript !! js
// JavaScript - 直接运行（无需编译）
// 文件：hello.js
console.log("Hello, World!");

// 在浏览器中
<script src="hello.js"></script>

// 在 Node.js 中
$ node hello.js
Hello, World!
```
</UniversalEditor>

## JavaScript 的用例和优势

### 主要用例

#### 1. Web 前端开发
JavaScript 对 Web 开发至关重要：

- **DOM 操作**：交互式 Web 页面
- **事件处理**：用户交互
- **AJAX/Fetch**：动态数据加载
- **单页应用**：React、Vue、Angular
- **渐进式 Web 应用**：离线功能

<UniversalEditor title="Web 交互">
```java !! java
// Java - 更新需要完整页面刷新
@WebServlet("/users")
public class UserServlet extends HttpServlet {
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {
        // 服务器渲染整个 HTML 页面
        req.setAttribute("users", getUsers());
        req.getRequestDispatcher("/users.jsp").forward(req, resp);
    }
}
```

```javascript !! js
// JavaScript - 无需刷新的动态更新
// 异步获取用户数据
async function loadUsers() {
    const response = await fetch('/api/users');
    const users = await response.json();

    // 动态更新 DOM
    const userList = document.getElementById('user-list');
    userList.innerHTML = users.map(user =>
        `<li>${user.name}</li>`
    ).join('');
}

// 调用无需页面刷新
loadUsers();
```
</UniversalEditor>

#### 2. 后端开发（Node.js）
- **REST API**：Express、Fastify、Koa
- **实时应用**：WebSockets、Socket.io
- **微服务**：轻量级服务
- **无服务器**：AWS Lambda、Cloud Functions

<UniversalEditor title="后端开发">
```java !! java
// Java - Spring Boot REST API
@RestController
@RequestMapping("/api")
public class UserController {

    @GetMapping("/users/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }
}
```

```javascript !! js
// JavaScript - Node.js REST API（Express）
const express = require('express');
const app = express();

app.get('/api/users/:id', (req, res) => {
    const user = userService.findById(req.params.id);
    res.json(user);
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});
```
</UniversalEditor>

#### 3. 移动开发
- **React Native**：iOS 和 Android 应用
- **Ionic**：混合移动应用
- **Electron**：桌面应用

#### 4. 开发工具
- **构建工具**：Webpack、Vite、esbuild
- **测试**：Jest、Cypress、Playwright
- **代码检查**：ESLint、Prettier
- **包管理**：npm、yarn

### 关键优势

#### 1. 快速开发
- **无需编译**：立即反馈
- **动态类型**：更少的样板代码
- **热重载**：即时更新
- **巨大的生态系统**：npm 包

<UniversalEditor title="开发速度">
```java !! java
// Java - 更多样板代码
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + "}";
    }
}
```

```javascript !! js
// JavaScript - 简洁
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    toString() {
        return `Person{name='${this.name}', age=${this.age}}`;
    }
}

// 或者使用对象字面量更简单
const person = { name: "John", age: 30 };
console.log(JSON.stringify(person));
```
</UniversalEditor>

#### 2. 通用语言
- **前端和后端**：到处使用相同的语言
- **代码共享**：在平台间共享代码
- **全栈开发**：一个开发者，整个技术栈
- **社区**：最大的开发者社区

#### 3. 灵活性
- **多种范式**：OOP、函数式、过程式
- **动态特性**：元编程、反射
- **快速原型**：快速实验
- **适应性强**：在任何地方工作

#### 4. 现代特性
- **ES6+ 语法**：类、模块、箭头函数
- **Async/await**：清晰的异步代码
- **解构**：方便的数据提取
- **展开运算符**：简单的对象/数组操作

<UniversalEditor title="现代 JavaScript 特性">
```java !! java
// Java - 传统方法
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
List<String> filtered = new ArrayList<>();

for (String name : names) {
    if (name.startsWith("A")) {
        filtered.add(name);
    }
}

Map<String, Integer> nameLengths = new HashMap<>();
for (String name : filtered) {
    nameLengths.put(name, name.length());
}
```

```javascript !! js
// JavaScript - 现代函数式方法
const names = ["Alice", "Bob", "Charlie"];

const result = names
    .filter(name => name.startsWith("A"))
    .reduce((acc, name) => ({
        ...acc,
        [name]: name.length
    }), {});

console.log(result);  // { Alice: 5 }
```
</UniversalEditor>

## 开发环境设置

### 前提条件

无需特殊前提条件 - JavaScript 可以运行在：
- **任何现代浏览器**：Chrome、Firefox、Safari、Edge
- **Node.js**：用于服务器端开发
- **操作系统**：Windows、macOS、Linux

### 安装方法

#### 方法 1：浏览器控制台（最快开始）

无需安装 - 只需打开浏览器：

1. 打开 Chrome/Firefox/Safari
2. 按 `F12` 或 `Cmd+Option+I`（Mac）/ `Ctrl+Shift+I`（Windows）
3. 转到"Console"标签
4. 开始编码！

```javascript
// 在浏览器控制台中尝试
console.log("Hello, JavaScript!");
alert("Welcome to JS!");
document.body.style.backgroundColor = "lightblue";
```

#### 方法 2：Node.js（用于开发）

**macOS/Linux:**
```bash
# 使用 Homebrew（macOS）
brew install node

# 或使用 apt（Ubuntu/Debian）
sudo apt update
sudo apt install nodejs npm
```

**Windows:**
1. 从 https://nodejs.org/ 下载
2. 运行安装程序
3. 重启终端

**验证安装：**
```bash
node --version   # 应该是 v18.x 或更高
npm --version    # 应该是 9.x 或更高
```

#### 方法 3：在线游乐场（用于学习）

- **CodePen**：https://codepen.io/pen/
- **JSFiddle**：https://jsfiddle.net/
- **Replit**：https://replit.com/
- **StackBlitz**：https://stackblitz.com/

### 推荐工具

#### 代码编辑器

**Visual Studio Code（推荐）：**
```bash
# 从 https://code.visualstudio.com/ 下载
# 安装这些扩展：
- ESLint
- Prettier
- JavaScript (ES6) code snippets
- Node.js modules intellisense
```

**WebStorm（JetBrains）：**
- 全功能 JavaScript IDE
- 内置调试器
- 重构工具
- 智能代码补全

#### 浏览器开发工具

**Chrome DevTools:**
- Elements：DOM 检查
- Console：JavaScript 执行
- Sources：调试
- Network：HTTP 监控
- Performance：性能分析

#### 包管理器

**npm（Node Package Manager）：**
```bash
# 随 Node.js 一起安装
npm init -y              # 初始化项目
npm install lodash       # 安装包
npm install --save-dev jest  # 开发依赖
```

**yarn（替代方案）：**
```bash
npm install -g yarn      # 全局安装
yarn init               # 初始化项目
yarn add lodash         # 安装包
```

#### 构建工具

**Vite（现代、快速）：**
```bash
npm create vite@latest my-app
cd my-app
npm install
npm run dev
```

**Webpack（灵活）：**
```bash
npm init -y
npm install webpack webpack-cli --save-dev
```

## 你的第一个 JavaScript 程序

<UniversalEditor title="Hello World：Java vs JavaScript">
```java !! java
// Java - 传统方法
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");

        // 使用变量
        String name = "Java Developer";
        int years = 5;

        System.out.println("I'm a " + name + " with " + years + " years experience");
    }
}

// 保存为 HelloWorld.java
// 编译：javac HelloWorld.java
// 运行：java HelloWorld
```

```javascript !! js
// JavaScript - 简单直接
console.log("Hello, World!");

// 使用变量（无需类型声明）
const name = "Java Developer";
const years = 5;

// 模板字面量
console.log(`I'm a ${name} with ${years} years experience`);

// 在浏览器中，你也可以：
// alert("Hello, World!");
// document.write("Hello, World!");
```
</UniversalEditor>

## JavaScript 版本（ES6+）

本课程专注于**现代 JavaScript（ES6+）**：

### ES2015 (ES6) - 主要版本
- `let` 和 `const` 块级变量
- 箭头函数
- 类
- 模板字面量
- 解构
- 展开运算符
- Promise
- 模块

### ES2016-ES2020 - 增量更新
- Array.includes (ES2016)
- Async/await (ES2017)
- 对象 rest/spread (ES2018)
- 可选链 (ES2020)
- 空值合并 (ES2020)

### ES2021+ - 最新特性
- 逻辑赋值运算符
- 数字分隔符
- String.replaceAll
- Promise.any
- 顶层 await

<UniversalEditor title="ES5 vs ES6+ 语法">
```javascript !! js
// ES5（旧 JavaScript - 我们不会重点讲这个）
var name = "John";
var age = 25;

function greet(name) {
    return "Hello, " + name;
}

var numbers = [1, 2, 3];
var doubled = numbers.map(function(n) {
    return n * 2;
});

// 构造函数
function Person(name) {
    this.name = name;
}

Person.prototype.greet = function() {
    console.log("Hello, " + this.name);
};
```

```javascript !! js
// ES6+（现代 JavaScript - 我们将学习的内容）
const name = "John";
const age = 25;

const greet = (name) => `Hello, ${name}`;

const numbers = [1, 2, 3];
const doubled = numbers.map(n => n * 2);

// 类语法
class Person {
    constructor(name) {
        this.name = name;
    }

    greet() {
        console.log(`Hello, ${this.name}`);
    }
}
```
</UniversalEditor>

## 浏览器环境 vs Node.js

### 浏览器 JavaScript
- **DOM API**：`document`、`window`、`querySelector`
- **Web API**：`fetch`、`localStorage`、`Canvas`、`WebGL`
- **无文件系统访问**（安全）
- **单页面上下文**

### Node.js JavaScript
- **无 DOM**：没有 `document` 或 `window`
- **文件系统访问**：`fs` 模块
- **HTTP 服务器**：`http`、`https` 模块
- **CommonJS 模块**：`require()`（也支持 ES 模块）

<UniversalEditor title="环境差异">
```javascript !! js
// 浏览器 JavaScript
// 从 API 获取数据并更新 DOM
async function loadUser(userId) {
    const response = await fetch(`/api/users/${userId}`);
    const user = await response.json();

    // 更新 DOM
    document.getElementById('user-name').textContent = user.name;
    document.getElementById('user-email').textContent = user.email;
}

loadUser(123);
```

```javascript !! js
// Node.js（服务器端）
const fs = require('fs');
const http = require('http');

// 创建 HTTP 服务器
const server = http.createServer((req, res) => {
    if (req.url === '/api/user') {
        // 从文件系统读取
        fs.readFile('user.json', (err, data) => {
            if (err) {
                res.writeHead(500);
                res.end('Error loading user');
                return;
            }

            res.writeHead(200, { 'Content-Type': 'application/json' });
            res.end(data);
        });
    }
});

server.listen(3000);
```
</UniversalEditor>

## Java 开发者的思维模型调整

### 关键思维转变

#### 1. 从编译时错误到运行时错误

**Java:**
```java
String name = "John";
// name = 42;  // 编译器立即捕获此错误
```

**JavaScript:**
```javascript
let name = "John";
name = 42;  // 有效！但稍后可能导致问题
console.log(name.toUpperCase());  // 运行时错误：name.toUpperCase is not a function
```

#### 2. 从类到原型

**Java:**
```java
// 一切都必须在类中
public class Utils {
    public static int add(int a, int b) {
        return a + b;
    }
}
```

**JavaScript:**
```javascript
// 函数可以独立存在
function add(a, b) {
    return a + b;
}

// 或作为箭头函数
const add = (a, b) => a + b;
```

#### 3. 从基于线程到基于事件的并发

**Java:**
```java
// 创建线程，并发运行
new Thread(() -> {
    doWork();
}).start();
```

**JavaScript:**
```javascript
// 使用事件循环、回调、promise
setTimeout(() => {
    doWork();
}, 1000);

// 或更好的方式，使用 async/await
await new Promise(resolve => {
    setTimeout(resolve, 1000);
});
doWork();
```

## JavaScript 常用术语

对于 Java 开发者，以下是关键的 JavaScript 术语：

| 术语 | Java 等价物 | 描述 |
|------|----------------|-------------|
| **变量** | Variable | 值的存储（无需类型声明） |
| **函数** | Method | 可重用的代码块（不绑定到类） |
| **对象** | Instance/Map | 键值对，动态属性 |
| **数组** | List/ArrayList | 有序列表（可包含混合类型） |
| **Promise** | Future/CompletableFuture | 异步操作结果 |
| **回调** | Listener/Observer | 作为参数传递的函数 |
| **闭包** | Lambda with captured variables | 保留作用域的函数 |
| **模块** | Package/Import | 代码组织（ES6） |
| **npm** | Maven/Gradle | 包管理器 |
| **事件循环** | Executor/Dispatcher | 异步执行模型 |
| **DOM** | - | 文档对象模型（仅浏览器） |
| **JSON** | - | JavaScript 对象表示法（数据格式） |

## 学习路径概述

本课程结构化地帮助 Java 开发者掌握 JavaScript：

### 模块结构

**模块 1-5：基本语法**
- 变量声明（let、const、var）
- 数据类型和类型强制转换
- 控制流（if/else、switch、循环）
- 函数（声明、表达式、箭头函数）
- 数组和数组方法

**模块 6-9：对象和类**
- 对象字面量和属性
- ES6 类和继承
- 原型和原型链
- `this` 上下文和绑定

**模块 10-11：异步编程**
- 回调和事件循环
- Promise 和 async/await
- 错误处理模式

**模块 12-15：前端开发**
- DOM 操作和 querySelector
- 事件处理和传播
- ES6 模块和导入
- 构建工具（webpack、Vite）

**模块 16-19：工具和最佳实践**
- 测试框架（Jest、Cypress）
- 框架基础（React、Vue）
- 常见陷阱和反模式
- 真实项目示例

## 练习

### 练习 1：浏览器控制台
1. 打开浏览器的开发者控制台（F12）
2. 尝试这些命令：
   ```javascript
   console.log("Hello from console!");
   const name = "Java Developer";
   console.log(`Welcome, ${name}!`);
   alert("You can do this!");
   ```

### 练习 2：Node.js 设置
1. 如果还没有，安装 Node.js
2. 创建文件 `hello.js`：
   ```javascript
   console.log("Hello from Node.js!");
   ```
3. 运行：`node hello.js`

### 练习 3：现代 JavaScript
通过运行此代码比较 ES5 vs ES6 语法：
```javascript
// ES5
var add = function(a, b) {
    return a + b;
};

// ES6
const addES6 = (a, b) => a + b;

console.log(add(1, 2));
console.log(addES6(1, 2));
```

### 练习 4：思维模型转变
思考这些差异：
1. 动态类型与静态类型感觉有何不同？
2. 一等函数提供什么优势？
3. 事件循环模型与 Java 线程有何不同？

## 总结

JavaScript 为 Java 开发者提供了一种完全不同的编程范式：

**关键差异：**
- **动态类型**：无需类型声明，运行时灵活性
- **基于原型**：对象从对象继承，而不是类
- **事件驱动**：单线程与事件循环，而不是多线程
- **一等函数**：函数是值，可以传递
- **无处不在**：运行在任何地方 - 浏览器、服务器、移动、桌面

**使 JavaScript 强大的特性：**
- 快速开发和即时反馈
- 全栈开发的通用语言
- 庞大的生态系统（npm 包）
- 现代语法（ES6+）使代码清晰易读
- 可扩展应用的异步编程模型

**你将学到：**
- 现代 JavaScript（ES6+）语法和特性
- 函数式和面向对象编程模式
- 使用 Promise 和 async/await 的异步编程
- 使用 DOM 操作的前端开发
- 使用 Node.js 的后端开发
- 最佳实践和常见模式

在接下来的模块中，我们将深入探讨 JavaScript 语法，从与 Java 的基本比较开始。准备好看看 JavaScript 的灵活性和简单性如何提高你的生产力！

准备好开始学习 JavaScript 了吗？让我们从**模块 1：基本语法比较**开始！
