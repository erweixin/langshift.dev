---
title: "模块 15：工具与构建"
description: "学习 JavaScript 构建工具、打包工具和开发工作流"
---

## 模块 15：工具与构建

现代 JavaScript 开发需要构建工具来进行代码打包、转译和优化。

## 学习目标

完成本模块后，你将：
✅ 理解 npm 和包管理
✅ 了解打包工具（webpack、Vite）
✅ 理解转译（Babel）
✅ 了解开发环境与生产环境构建
✅ 学习代码分割
✅ 掌握现代开发工作流

## 包管理：Java vs JavaScript

<UniversalEditor title="包管理">
```java !! java
// Java - Maven/Gradle
// pom.xml (Maven)
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>5.3.8</version>
    </dependency>
</dependencies>

// build.gradle
dependencies {
    implementation 'org.springframework:spring-core:5.3.8'
}

// 安装依赖
mvn install  // 或: gradle build
```

```javascript !! js
// JavaScript - npm/yarn
// package.json
{
  "dependencies": {
    "lodash": "^4.17.21",
    "axios": "^0.27.2"
  },
  "devDependencies": {
    "webpack": "^5.72.0",
    "jest": "^28.1.0"
  }
}

// 安装依赖
npm install
npm install lodash  // 添加包
npm install --save-dev webpack  // 添加开发依赖
```
</UniversalEditor>

## 项目结构

<UniversalEditor title="项目结构">
```bash
my-project/
├── src/
│   ├── index.js          # 入口文件
│   ├── utils/
│   │   └── helpers.js
│   └── styles/
│       └── main.css
├── public/
│   └── index.html        # HTML 模板
├── dist/                 # 构建输出（自动生成）
├── package.json          # 依赖配置
├── webpack.config.js     # 构建配置
└── babel.config.js       # 转译器配置
```
</UniversalEditor>

## 构建工具

<UniversalEditor title="打包工具">
```javascript !! js
// Webpack 配置
// webpack.config.js
module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: 'babel-loader'
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      }
    ]
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './public/index.html'
    })
  ],
  mode: 'development'  // 或 'production'
};

// Vite（现代、更快）
// vite.config.js
export default {
  plugins: [react()],
  build: {
    outDir: 'dist',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom']
        }
      }
    }
  }
};
```
</UniversalEditor>

## 代码转译

<UniversalEditor title="Babel 配置">
```javascript !! js
// .babelrc 或 babel.config.js
module.exports = {
  presets: [
    ['@babel/preset-env', {
      targets: {
        browsers: ['> 1%', 'last 2 versions']
      }
    }],
    '@babel/preset-react'
  ],
  plugins: [
    '@babel/plugin-proposal-class-properties',
    '@babel/plugin-syntax-dynamic-import'
  ]
};

// Polyfills
import 'core-js/stable';
import 'regenerator-runtime/runtime';
```
</UniversalEditor>

## 脚本命令

<UniversalEditor title="包脚本">
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "jest",
    "lint": "eslint src/",
    "format": "prettier --write src/"
  }
}
```
</UniversalEditor>

## 最佳实践

<UniversalEditor title="工具最佳实践">
```javascript !! js
// 1. 使用现代构建工具
// Vite（比 webpack 更快）
npm create vite@latest my-app

// 2. 优化生产环境构建
// webpack
mode: 'production',
optimization: {
  minimize: true,
  splitChunks: {
    chunks: 'all'
  }
}

// 3. 代码分割
// 动态导入
const module = await import('./module.js');

// 4. 源映射用于调试
devtool: 'source-map'  // webpack

// 5. 热模块替换
// Vite 内置此功能
npm run dev
```
</UniversalEditor>

## 总结

### 关键要点

1. **npm**：JavaScript 的包管理器
2. **打包工具**：webpack、Vite（合并文件）
3. **Babel**：转译现代 JavaScript
4. **开发工具**：HMR、源映射
5. **生产环境**：压缩、分割

## 接下来是什么？

下一节：**模块 16：测试与调试** - 学习 Jest、调试工具和测试模式！
