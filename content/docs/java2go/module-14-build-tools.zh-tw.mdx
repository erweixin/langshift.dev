---
title: "模組 14：建構工具和依賴管理"
---

本模組介紹 Go 的建構工具和依賴管理，與 Java 的 Maven 和 Gradle 生態系統進行比較。

## Go 工具 vs Java 建構工具

**Java 建構工具：**
- Maven：基於 XML，約定優於配置
- Gradle：Groovy/Kotlin DSL，靈活強大
- 複雜的依賴解析和傳遞衝突
- 各種任務的插件生態系統
- 建構生命週期管理

**Go 建構工具：**
- `go`：官方命令列工具鏈
- 簡單、快速、有主見
- 最小版本選擇（MVS）用於依賴
- 標準化的專案結構
- 內建測試、基準測試和效能分析

<UniversalEditor title="建構指令比較">
```bash !! bash
# Java: Maven 指令
mvn clean                    # 清理建構產物
mvn compile                  # 編譯原始碼
mvn test                     # 執行測試
mvn package                  # 建立 JAR/WAR
mvn install                  # 安裝到本地儲存庫
mvn deploy                   # 部署到遠端儲存庫
mvn dependency:tree          # 顯示依賴樹
mvn versions:display-dependency-updates  # 檢查更新

# Java: Gradle 指令
gradle clean                 # 清理建構產物
gradle build                 # 建構專案
gradle test                  # 執行測試
gradle bootRun              # 執行 Spring Boot 應用
gradle dependencies         # 顯示依賴
gradle dependencyUpdates    # 檢查更新

# 兩者都支援：
# - 多模組專案
# - 自訂外掛
# - 建構設定檔
# - 持續整合
```

```bash !! bash
# Go: go 指令
go build                    # 建構可執行檔
go test                     # 執行測試
go run main.go             # 建構並執行
go fmt ./...               # 格式化程式碼
go vet ./...               # 執行靜態分析
go mod init                # 初始化模組
go mod tidy                # 清理依賴
go get github.com/pkg/pkg  # 新增依賴
go install github.com/pkg/cmd@latest  # 安裝工具

# Go 工具：
go list -m all             # 列出所有依賴
go mod graph               # 顯示依賴圖
go mod verify              # 驗證依賴
go mod why github.com/pkg  # 解釋為什麼需要依賴
go generate                # 產生程式碼
go tool cover              # 覆蓋率分析

# 優勢：
# - 單一工具鏈
# - 更快的建構
# - 更簡單的依賴模型
# - 內建於語言
```
</UniversalEditor>

## 依賴管理

<UniversalEditor title="依賴管理">
```xml !! xml
<!-- Java: Maven pom.xml -->
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>myapp</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <properties>
        <java.version>17</java.version>
        <spring.boot.version>3.1.0</spring.boot.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.28</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring.boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

```go !! go
// Go: go.mod
module github.com/example/myapp

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/go-redis/redis/v8 v8.11.5
    gorm.io/gorm v1.25.4
)

require (
    github.com/cespare/xxhash/v2 v2.2.0 // indirect
    github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f // indirect
    github.com/jinzhu/inflection v1.0.0 // indirect
)

// go.sum 包含所有依賴的校驗和
// 由 Go 工具自動管理

// Go 中沒有版本衝突！
// 最小版本選擇（MVS）演算法：
// - 使用滿足所有要求的最小版本
// - 可預測和可重現的建構
// - 無需衝突解決
```
</UniversalEditor>

---

### 練習問題：
1. 為什麼 Go 的依賴管理比 Java 更簡單？
2. Go 中內建測試的優勢是什麼？
3. 建構標籤如何在 Go 中啟用特定於平台的程式碼？
4. 為什麼 Go 通常不需要 Makefile 而 Java 專案經常需要？

### 專案想法：
- 為樣板程式碼建立自訂 Go 產生器
- 為 Go 專案設置全面的 CI/CD 管線
- 建構分析 Go 依賴圖的工具
- 實作基於工作區的多模組 Go 專案

### 下一步：
- 探索 Go 的生態系統和熱門函式庫
- 學習 Go 中的資料庫整合
- 了解微服務架構
- 建構生產就緒的應用程式
