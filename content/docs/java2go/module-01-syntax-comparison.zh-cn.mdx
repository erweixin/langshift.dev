---
title: "模块 01：语法对比 - Java 到 Go"
---

本模块探讨 Java 和 Go 之间的基本语法差异，帮助你有效地将 Java 知识迁移到 Go。

## 变量声明

### 哲学差异

**Java：** 显式类型，冗长的声明
```java
String name = "Alice";
int age = 25;
double salary = 50000.50;
boolean isActive = true;
```

**Go：** 类型推断，简洁语法
```go
name := "Alice"           // 推断为 string
age := 25                 // 推断为 int
salary := 50000.50        // 推断为 float64
isActive := true          // 推断为 bool
```

### 声明方法对比

| Java | Go | 描述 |
|------|-----|-------------|
| `String name = "Alice";` | `name := "Alice"` | 类型推断的简短声明 |
| `final String NAME = "Bob";` | `const NAME = "Bob"` | 常量声明 |
| `String name;` | `var name string` | 零值变量 |
| `int x = 10;` | `x := 10` 或 `var x int = 10` | 显式 vs 推断类型 |

<UniversalEditor title="变量声明对比">
```java !! java
// Java: 变量声明
public class Variables {
    public static void main(String[] args) {
        // 显式类型声明
        String name = "Alice";
        int age = 30;
        double salary = 75000.50;
        boolean isActive = true;

        // Final 常量
        final int MAX_COUNT = 100;

        // 声明但不初始化（对象为 null）
        String uninitialized;
        uninitialized = "现在已初始化";

        // 多个声明
        int x = 10, y = 20, z = 30;

        System.out.println("Name: " + name);
        System.out.println("Age: " + age);
        System.out.println("Salary: " + salary);
        System.out.println("Active: " + isActive);
    }
}
```

```go !! go
// Go: 变量声明
package main

import "fmt"

func main() {
    // 简短声明（类型推断）- 最常用
    name := "Alice"
    age := 30
    salary := 75000.50
    isActive := true

    // 常量声明
    const MAX_COUNT = 100

    // 零值变量（Go 中没有未初始化的变量）
    var uninitialized string
    uninitialized = "现在已初始化"

    // 多个声明
    x, y, z := 10, 20, 30

    // 显式类型声明
    var employeeId int = 12345

    fmt.Printf("Name: %s\n", name)
    fmt.Printf("Age: %d\n", age)
    fmt.Printf("Salary: %.2f\n", salary)
    fmt.Printf("Active: %t\n", isActive)
    fmt.Printf("Employee ID: %d\n", employeeId)
}
```
</UniversalEditor>

### Go 中的零值

与 Java 中未初始化的对象为 `null` 不同，Go 总是将变量初始化为零值：

| Go 类型 | 零值 | Java 等价物 |
|---------|------------|-----------------|
| `int`, `int64` 等 | `0` | `0` |
| `float64`, `float32` | `0.0` | `0.0` |
| `bool` | `false` | `false` |
| `string` | `""`（空字符串）| `null` |
| 指针类型 | `nil` | `null` |
| `slice` | `nil` | `null` |

<UniversalEditor title="零值初始化">
```java !! java
// Java: Null vs 默认值
public class ZeroValues {
    static int primitiveInt;      // 0
    static double primitiveDouble; // 0.0
    static boolean primitiveBool;  // false
    static String objectString;    // null

    public static void main(String[] args) {
        System.out.println(primitiveInt);    // 0
        System.out.println(primitiveDouble); // 0.0
        System.out.println(primitiveBool);   // false
        System.out.println(objectString);    // null

        // 需要 null 检查
        if (objectString != null) {
            System.out.println(objectString.length());
        }
    }
}
```

```go !! go
// Go: 零值（基本类型没有 Null）
package main

import "fmt"

var primitiveInt int
var primitiveDouble float64
var primitiveBool bool
var objectString string

func main() {
    fmt.Println(primitiveInt)    // 0
    fmt.Println(primitiveDouble) // 0
    fmt.Println(primitiveBool)   // false
    fmt.Println(objectString)    // ""（空字符串，不是 nil！）

    // 不需要 null 检查
    fmt.Println(len(objectString)) // 0

    // 指针示例（可以为 nil）
    var pointer *int
    fmt.Println(pointer) // <nil>

    if pointer != nil {
        fmt.Println(*pointer)
    }
}
```
</UniversalEditor>

## 数据类型对比

### 基本类型

| Java | Go | 说明 |
|------|-----|-------|
| `byte` | `byte` | 相同（8位）|
| `short` | `int16` | 16位整数 |
| `int` | `int` | 平台相关（32或64位）|
| `long` | `int64` | 64位整数 |
| `float` | `float32` | 32位浮点 |
| `double` | `float64` | 64位浮点 |
| `char` | `rune` | Go 的 rune 是 Unicode 码点 |
| `boolean` | `bool` | 相同概念 |
| `String` | `string` | 都不可变，UTF-8 |

### Go 特有类型

Go 提供了更精确的整数类型：

```go
// 有符号整数
int8    // 8位 (-128 到 127)
int16   // 16位
int32   // 32位
int64   // 64位
int     // 平台相关（32或64位）

// 无符号整数
uint8   // 8位 (0 到 255) - 也叫 byte
uint16  // 16位
uint32  // 32位
uint64  // 64位
uint    // 平台相关
uintptr // 用于指针的无符号整数

// 浮点数
float32 // 32位 IEEE 754
float64 // 64位 IEEE 754

// 复数（Java 没有！）
complex64  // complex64 带 float32 实部和虚部
complex128 // complex128 带 float64 实部和虚部
```

<UniversalEditor title="类型系统对比">
```java !! java
// Java: 类型系统
public class Types {
    public static void main(String[] args) {
        // 基本类型
        byte b = 100;
        short s = 1000;
        int i = 100000;
        long l = 1000000L;
        float f = 3.14f;
        double d = 3.14159;
        char c = 'A';
        boolean bool = true;

        // String（引用类型）
        String name = "Alice";

        // 数组（固定大小）
        int[] numbers = new int[5];
        numbers[0] = 10;

        // ArrayList（动态）
        java.util.List<String> list = new java.util.ArrayList<>();
        list.add("Hello");

        System.out.println("Int: " + i);
        System.out.println("Double: " + d);
        System.out.println("String: " + name);
    }
}
```

```go !! go
// Go: 类型系统
package main

import "fmt"

func main() {
    // 基本类型
    var b byte = 100        // uint8
    var s int16 = 1000
    var i int = 100000
    var l int64 = 1000000
    var f float32 = 3.14
    var d float64 = 3.14159
    var c rune = 'A'        // rune 是 int32 的别名
    var boolVal bool = true

    // String（内置类型，不是类）
    var name string = "Alice"

    // 数组（固定大小）
    var numbers [5]int
    numbers[0] = 10

    // 切片（动态数组）- 内置，无需导入
    var slice []int = []int{1, 2, 3}
    slice = append(slice, 4) // 添加元素

    // Map（内置）
    var person map[string]int = map[string]int{
        "age": 30,
    }

    fmt.Printf("Int: %d\n", i)
    fmt.Printf("Double: %f\n", d)
    fmt.Printf("String: %s\n", name)
    fmt.Printf("Slice: %v\n", slice)
    fmt.Printf("Map: %v\n", person)
}
```
</UniversalEditor>

## 控制流

### If/Else 语句

Go 的 if/else 与 Java 类似，但有重要区别：
- 条件周围不需要括号
- 左大括号必须在 if 同一行
- Go 中没有三元运算符

<UniversalEditor title="If/Else 对比">
```java !! java
// Java: If/Else
public class Conditionals {
    public static void main(String[] args) {
        int score = 85;

        // 带括号
        if (score >= 90) {
            System.out.println("A");
        } else if (score >= 80) {
            System.out.println("B");
        } else {
            System.out.println("C");
        }

        // 三元运算符
        String result = (score >= 60) ? "Pass" : "Fail";
        System.out.println(result);

        // Null 检查
        String name = null;
        if (name != null && name.length() > 0) {
            System.out.println(name);
        }
    }
}
```

```go !! go
// Go: If/Else
package main

import "fmt"

func main() {
    score := 85

    // 不需要括号
    if score >= 90 {
        fmt.Println("A")
    } else if score >= 80 {
        fmt.Println("B")
    } else {
        fmt.Println("C")
    }

    // Go 中没有三元运算符！
    // 使用常规 if/else 代替
    var result string
    if score >= 60 {
        result = "Pass"
    } else {
        result = "Fail"
    }
    fmt.Println(result)

    // 带初始化语句的 if
    if name := getName(); name != "" {
        fmt.Printf("Name: %s\n", name)
    }

    // 一个 if 中的多个条件
    x := 10
    switch {
    case x < 0:
        fmt.Println("Negative")
    case x < 10:
        fmt.Println("Single digit")
    default:
        fmt.Println("Double digit")
    }
}

func getName() string {
    return "Alice"
}
```
</UniversalEditor>

### Switch 语句

Go 的 switch 比 Java 更强大：
- 不需要 break（默认不穿透）
- 可以对任何类型切换，不只是整数
- 一个 case 中可以有多个值
- 不需要 default

<UniversalEditor title="Switch 语句对比">
```java !! java
// Java: Switch 语句
public class SwitchCase {
    public static void main(String[] args) {
        int dayOfWeek = 3;

        // 传统 switch
        switch (dayOfWeek) {
            case 1:
                System.out.println("Monday");
                break; // 需要防止穿透
            case 2:
                System.out.println("Tuesday");
                break;
            case 3:
                System.out.println("Wednesday");
                break;
            default:
                System.out.println("Other day");
        }

        // Java 14+ 增强型 switch
        String dayType = switch (dayOfWeek) {
            case 1, 2, 3, 4, 5 -> "Weekday";
            case 6, 7 -> "Weekend";
            default -> "Invalid";
        };
        System.out.println(dayType);
    }
}
```

```go !! go
// Go: Switch 语句
package main

import "fmt"

func main() {
    dayOfWeek := 3

    // 不需要 break！默认不穿透
    switch dayOfWeek {
    case 1:
        fmt.Println("Monday")
    case 2:
        fmt.Println("Tuesday")
    case 3:
        fmt.Println("Wednesday")
    default:
        fmt.Println("Other day")
    }

    // 一个 case 中的多个值
    switch dayOfWeek {
    case 1, 2, 3, 4, 5:
        fmt.Println("Weekday")
    case 6, 7:
        fmt.Println("Weekend")
    default:
        fmt.Println("Invalid")
    }

    // 带条件的 switch（不需要表达式）
    score := 85
    switch {
    case score >= 90:
        fmt.Println("A")
    case score >= 80:
        fmt.Println("B")
    case score >= 70:
        fmt.Println("C")
    default:
        fmt.Println("D")
    }

    // 字符串 switch（以及任何类型！）
    OS := "linux"
    switch OS {
    case "darwin":
        fmt.Println("macOS")
    case "linux":
        fmt.Println("Linux")
    case "windows":
        fmt.Println("Windows")
    }
}
```
</UniversalEditor>

## 循环

### For 循环 - Go 中唯一的循环

Go 只有 `for` 循环（没有 `while`，没有 `do-while`），但非常灵活：

<UniversalEditor title="循环对比">
```java !! java
// Java: 多种循环类型
public class Loops {
    public static void main(String[] args) {
        // 传统 for 循环
        for (int i = 0; i < 5; i++) {
            System.out.println("Count: " + i);
        }

        // 增强型 for 循环（for-each）
        int[] numbers = {1, 2, 3, 4, 5};
        for (int num : numbers) {
            System.out.println(num);
        }

        // While 循环
        int count = 0;
        while (count < 5) {
            System.out.println("While: " + count);
            count++;
        }

        // Do-while 循环
        do {
            System.out.println("Do-while: " + count);
            count--;
        } while (count > 0);
    }
}
```

```go !! go
// Go: 只有 for 循环，但非常灵活
package main

import "fmt"

func main() {
    // 传统 for 循环
    for i := 0; i < 5; i++ {
        fmt.Printf("Count: %d\n", i)
    }

    // 基于 range 的 for（类似增强型 for）
    numbers := []int{1, 2, 3, 4, 5}
    for i, num := range numbers {
        fmt.Printf("Index %d: %d\n", i, num)
    }

    // 只有值的 range
    for _, num := range numbers {
        fmt.Printf("Value: %d\n", num)
    }

    // 只有索引的 range
    for i := range numbers {
        fmt.Printf("Index: %d\n", i)
    }

    // While 风格循环（省略所有三个组件）
    count := 0
    for count < 5 {
        fmt.Printf("While: %d\n", count)
        count++
    }

    // 无限循环
    sum := 0
    for {
        sum++
        if sum > 10 {
            break
        }
    }
    fmt.Printf("Sum: %d\n", sum)

    // Range 遍历 map
    person := map[string]int{
        "age":  30,
        "score": 85,
    }
    for key, value := range person {
        fmt.Printf("%s: %d\n", key, value)
    }

    // Range 遍历字符串（按 rune）
    for i, char := range "Hello" {
        fmt.Printf("Index %d: %c\n", i, char)
    }
}
```
</UniversalEditor>

## 函数

### 函数声明

<UniversalEditor title="函数声明对比">
```java !! java
// Java: 函数方法
public class Functions {
    // 静态方法（类似 Go 函数）
    public static int add(int a, int b) {
        return a + b;
    }

    // 带返回类型的方法
    public String greet(String name) {
        return "Hello, " + name;
    }

    // Void 方法
    public void printMessage(String message) {
        System.out.println(message);
    }

    // 多返回值？无法直接实现！
    // 需要使用类或数组

    // 可变参数
    public int sum(int... numbers) {
        int total = 0;
        for (int num : numbers) {
            total += num;
        }
        return total;
    }

    public static void main(String[] args) {
        System.out.println(add(5, 3));

        Functions f = new Functions();
        System.out.println(f.greet("Alice"));
        f.printMessage("Hello");

        System.out.println(sum(1, 2, 3, 4, 5));
    }
}
```

```go !! go
// Go: 多返回值函数！
package main

import "fmt"

// 简单函数
func add(a int, b int) int {
    return a + b
}

// 简写参数类型
func subtract(a, b int) int {
    return a - b
}

// 多返回值（非常有用！）
func divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, fmt.Errorf("除以零")
    }
    return a / b, nil
}

// 命名返回值
func getDimensions() (width, height int) {
    width = 100
    height = 200
    return // 裸返回（返回 width, height）
}

// 可变函数（可变参数）
func sum(numbers ...int) int {
    total := 0
    for _, num := range numbers {
        total += num
    }
    return total
}

// 函数作为类型（一等公民）
var operation func(int, int) int = func(a, b int) int {
    return a * b
}

func main() {
    fmt.Println(add(5, 3))
    fmt.Println(subtract(10, 3))

    // 多返回值
    result, err := divide(10, 2)
    if err != nil {
        fmt.Println("Error:", err)
    } else {
        fmt.Println("Result:", result)
    }

    // 命名返回值
    w, h := getDimensions()
    fmt.Printf("Dimensions: %d x %d\n", w, h)

    // 可变函数
    fmt.Println(sum(1, 2, 3, 4, 5))

    // 函数作为变量
    fmt.Println(operation(5, 6))
}
```
</UniversalEditor>

### Go 中的方法

与 Java 不同，方法在结构体外部定义：

<UniversalEditor title="方法对比">
```java !! java
// Java: 类内部的方法
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // 实例方法
    public String getName() {
        return name;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String introduce() {
        return "Hi, I'm " + name;
    }

    public static void main(String[] args) {
        Person p = new Person("Alice", 30);
        System.out.println(p.introduce());
    }
}
```

```go !! go
// Go: 结构体外部定义的方法
package main

import "fmt"

// 结构体定义
type Person struct {
    Name string
    Age  int
}

// 构造函数（地道的 Go）
func NewPerson(name string, age int) *Person {
    return &Person{
        Name: name,
        Age:  age,
    }
}

// 值接收者方法
func (p Person) GetName() string {
    return p.Name
}

// 指针接收者方法（可修改）
func (p *Person) SetAge(age int) {
    p.Age = age
}

// 方法
func (p Person) Introduce() string {
    return fmt.Sprintf("Hi, I'm %s", p.Name)
}

func main() {
    // 构造函数
    p := NewPerson("Alice", 30)
    fmt.Println(p.Introduce())

    p.SetAge(31)
    fmt.Printf("Age: %d\n", p.Age)
}
```
</UniversalEditor>

## 数组和切片

<UniversalEditor title="数组和切片对比">
```java !! java
// Java: 数组和 ArrayList
import java.util.ArrayList;
import java.util.List;

public class Arrays {
    public static void main(String[] args) {
        // 数组（固定大小）
        int[] fixedArray = new int[5];
        fixedArray[0] = 10;

        // 数组字面量
        int[] numbers = {1, 2, 3, 4, 5};
        System.out.println("Length: " + numbers.length);

        // ArrayList（动态）
        List<String> list = new ArrayList<>();
        list.add("Hello");
        list.add("World");
        list.add("Java");

        System.out.println("List size: " + list.size());
        System.out.println("Element: " + list.get(0));

        // 迭代
        for (String item : list) {
            System.out.println(item);
        }

        // 子列表
        List<String> subList = list.subList(0, 2);
        System.out.println("Sublist: " + subList);
    }
}
```

```go !! go
// Go: 数组和切片
package main

import "fmt"

func main() {
    // 数组（固定大小）- 很少直接使用
    var fixedArray [5]int
    fixedArray[0] = 10

    // 数组字面量
    numbers := [5]int{1, 2, 3, 4, 5}
    fmt.Printf("Array length: %d\n", len(numbers))

    // 切片（数组的动态视图）- 最常用
    var slice []int
    slice = append(slice, 1)
    slice = append(slice, 2)
    slice = append(slice, 3)

    // 切片字面量
    fruits := []string{"Apple", "Banana", "Cherry"}
    fmt.Printf("Slice length: %d\n", len(fruits))
    fmt.Printf("Element: %s\n", fruits[0])

    // 使用 range 迭代
    for i, fruit := range fruits {
        fmt.Printf("Index %d: %s\n", i, fruit)
    }

    // 切片切片（子切片）
    subSlice := fruits[0:2] // 元素 0 和 1
    fmt.Printf("Sub-slice: %v\n", subSlice)

    // 追加到切片
    fruits = append(fruits, "Date")
    fmt.Printf("After append: %v\n", fruits)

    // 复制切片
    copySlice := make([]string, len(fruits))
    copy(copySlice, fruits)
    fmt.Printf("Copy: %v\n", copySlice)

    // 预分配带容量的切片
    bigSlice := make([]int, 0, 100) // 长度 0，容量 100
    fmt.Printf("Length: %d, Capacity: %d\n", len(bigSlice), cap(bigSlice))
}
```
</UniversalEditor>

## 关键语法差异总结

| 特性 | Java | Go |
|---------|------|-----|
| **分号** | 必需 | 可选（推断）|
| **if/for 中的括号** | 必需 | 可选 |
| **大括号位置** | 灵活 | 必须在同一行 |
| **三元运算符** | `condition ? true : false` | 无三元，使用 if/else |
| **While 循环** | `while (condition)` | `for condition` |
| **Do-while** | `do {} while (condition)` | 无直接等价物 |
| **For-each** | `for (item : collection)` | `for item := range collection` |
| **Break/Continue** | `break label` | `break label`（类似）|
| **Switch 穿透** | 默认（需要 break）| 使用 `fallthrough` 关键字选择加入 |
| **多返回值** | 需要类/对象 | 内置 `(type1, type2)` |
| **Null 检查** | `if (obj != null)` | `if obj != nil` |
| **字符串连接** | `+` 运算符 | `+` 或 `fmt.Sprintf` |

---

### 练习题：
1. Go 的类型推断与 Java 的类型声明有何不同？
2. 为什么 Go 没有三元运算符？你如何实现相同的效果？
3. 解释 Go 的数组和切片的区别，并将它们与 Java 的数组和 ArrayList 进行比较。
4. 编写一个返回多个值的 Go 函数，并展示如何处理每个返回值。

### 项目想法：
- 创建一个简单的成绩计算器程序，它：
  - 接受学生成绩作为输入
  - 计算平均分和字母等级
  - 使用多返回值作为结果
  - 演示 if/else 和 switch 语句

### 下一步：
- 学习 Go 的面向对象编程方法
- 理解 Go 的包系统
- 探索 Go 强大的并发模型
