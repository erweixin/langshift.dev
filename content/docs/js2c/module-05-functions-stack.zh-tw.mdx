---
title: "å‡½æ•¸å’Œæ£§ç®¡ç†"
description: "å¾ JavaScript è¦–è§’å­¸ç¿’ C èªè¨€å‡½æ•¸å’Œæ£§ç®¡ç†ã€‚ç†è§£å‡½æ•¸åƒæ•¸å‚³éæ©Ÿåˆ¶ã€æ£§å¹€ã€éæ­¸å‡½æ•¸ã€å‡½æ•¸æŒ‡æ¨™å’Œè¨˜æ†¶é«”ç®¡ç†ã€‚"
---

# å‡½æ•¸å’Œæ£§ç®¡ç†

## 1. ä»‹ç´¹

### å¾ JavaScript å‡½æ•¸åˆ° C å‡½æ•¸

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•¸æ˜¯ä¸€ç­‰ç‰©ä»¶ï¼Œå…·æœ‰é–‰åŒ…ã€è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†å’Œéˆæ´»çš„åƒæ•¸è™•ç†ã€‚åœ¨ C ä¸­ï¼Œå‡½æ•¸æ›´åŠ åŸå§‹ï¼Œä½†æä¾›äº†å°è¨˜æ†¶é«”ã€æ£§ç®¡ç†å’Œæ•ˆèƒ½å„ªåŒ–çš„ç²¾ç¢ºæ§åˆ¶ã€‚

C å‡½æ•¸æ˜¯æ¨¡çµ„åŒ–ç¨‹å¼è¨­è¨ˆçš„åŸºç¤å»ºæ§‹å¡Šï¼Œæä¾›ï¼š
- ç¨‹å¼ç¢¼é‡ç”¨å’Œçµ„ç¹”
- å°è¨˜æ†¶é«”åˆ†é…çš„ç²¾ç¢ºæ§åˆ¶
- æ•ˆèƒ½å„ªåŒ–æ©Ÿæœƒ
- ç³»çµ±ç´šç¨‹å¼è¨­è¨ˆèƒ½åŠ›

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**: C å‡½æ•¸åœ¨å‘¼å«æ£§ä¸ŠåŸ·è¡Œï¼Œæ¯æ¬¡å‡½æ•¸å‘¼å«éƒ½æœƒå»ºç«‹ä¸€å€‹æ£§å¹€ï¼ŒåŒ…å«å€åŸŸè®Šæ•¸ã€åƒæ•¸å’Œè¿”å›ä½å€ã€‚ç†è§£æ£§ç®¡ç†å°è¨˜æ†¶é«”å®‰å…¨å’Œæ•ˆèƒ½è‡³é—œé‡è¦ã€‚

## 2. å‡½æ•¸åŸºç¤

### 2.1 å‡½æ•¸å®£å‘Šå’Œå®šç¾©

<UniversalEditor title="å‡½æ•¸å®£å‘Š" compare={true}>
```javascript !! js
// JavaScript - éˆæ´»çš„å‡½æ•¸å®£å‘Š
function greet(name) {
    return `Hello, ${name}!`;
}

// å‡½æ•¸è¡¨é”å¼
const greet2 = function(name) {
    return `Hello, ${name}!`;
};

// ç®­é ­å‡½æ•¸
const greet3 = (name) => `Hello, ${name}!`;

// é è¨­åƒæ•¸
function greetWithDefault(name = "World") {
    return `Hello, ${name}!`;
}

// å¯è®Šåƒæ•¸
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

// å‡½æ•¸å‘¼å«
console.log(greet("Alice"));
console.log(greetWithDefault());
console.log(sum(1, 2, 3, 4, 5));
```

```c !! c
#include <stdio.h>

// å‡½æ•¸å®£å‘Šï¼ˆåŸå‹ï¼‰
int greet(const char* name);
int sum(int a, int b);
void printArray(int arr[], int size);

// å‡½æ•¸å®šç¾©
int greet(const char* name) {
    printf("Hello, %s!\n", name);
    return 0;
}

// å¸¶è¿”å›å€¼çš„å‡½æ•¸
int sum(int a, int b) {
    return a + b;
}

// å¸¶é™£åˆ—åƒæ•¸çš„å‡½æ•¸
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

// å¸¶å¤šå€‹åƒæ•¸çš„å‡½æ•¸
int calculate(int a, int b, char operation) {
    switch (operation) {
        case '+': return a + b;
        case '-': return a - b;
        case '*': return a * b;
        case '/': return b != 0 ? a / b : 0;
        default: return 0;
    }
}

int main() {
    // å‡½æ•¸å‘¼å«
    greet("Alice");
    
    int result = sum(10, 20);
    printf("Sum: %d\n", result);
    
    int arr[] = {1, 2, 3, 4, 5};
    printArray(arr, 5);
    
    printf("10 + 5 = %d\n", calculate(10, 5, '+'));
    printf("10 - 5 = %d\n", calculate(10, 5, '-'));
    
    return 0;
}
```
</UniversalEditor>

### 2.2 å‡½æ•¸åƒæ•¸å’Œæ£§å¹€

<UniversalEditor title="å‡½æ•¸åƒæ•¸å’Œæ£§" compare={true}>
```javascript !! js
// JavaScript - åŸºæœ¬å‹åˆ¥æŒ‰å€¼å‚³éï¼Œç‰©ä»¶æŒ‰åƒè€ƒå‚³é
function modifyValue(x) {
    x = 100;  // åŸºæœ¬å‹åˆ¥çš„å€åŸŸå‰¯æœ¬
    console.log("å‡½æ•¸å…§éƒ¨:", x);
}

function modifyObject(obj) {
    obj.name = "Modified";  // ä¿®æ”¹åŸå§‹ç‰©ä»¶
    console.log("å‡½æ•¸å…§éƒ¨:", obj.name);
}

function modifyArray(arr) {
    arr.push(100);  // ä¿®æ”¹åŸå§‹é™£åˆ—
    console.log("å‡½æ•¸å…§éƒ¨:", arr);
}

// æ¸¬è©¦ä¸åŒå‹åˆ¥
let num = 10;
let person = { name: "John" };
let numbers = [1, 2, 3];

console.log("ä¿®æ”¹å‰:", num, person.name, numbers);
modifyValue(num);
modifyObject(person);
modifyArray(numbers);
console.log("ä¿®æ”¹å¾Œ:", num, person.name, numbers);
```

```c !! c
#include <stdio.h>

// æŒ‰å€¼å‚³éï¼ˆC ä¸­çš„é è¨­æ–¹å¼ï¼‰
void modifyValue(int x) {
    x = 100;  // å€åŸŸå‰¯æœ¬ï¼Œä¸å½±éŸ¿åŸå§‹å€¼
    printf("å‡½æ•¸å…§éƒ¨: x = %d\n", x);
}

// æŒ‰æŒ‡æ¨™å‚³éï¼ˆæ¨¡æ“¬æŒ‰åƒè€ƒå‚³éï¼‰
void modifyValueByPointer(int* x) {
    *x = 100;  // ä¿®æ”¹åŸå§‹å€¼
    printf("å‡½æ•¸å…§éƒ¨: *x = %d\n", *x);
}

// æŒ‰æŒ‡æ¨™å‚³éé™£åˆ—
void modifyArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        arr[i] *= 2;  // ä¿®æ”¹åŸå§‹é™£åˆ—
    }
    printf("å‡½æ•¸å…§éƒ¨: é™£åˆ—å·²ä¿®æ”¹\n");
}

// å¸¶å€åŸŸè®Šæ•¸çš„å‡½æ•¸ï¼ˆæ£§å¹€ï¼‰
void functionWithLocals(int param) {
    int local1 = 10;
    int local2 = 20;
    int local3 = local1 + local2 + param;
    
    printf("å€åŸŸè®Šæ•¸: %d, %d, %d\n", local1, local2, local3);
    printf("åƒæ•¸: %d\n", param);
    
    // é€™äº›è®Šæ•¸å„²å­˜åœ¨å‡½æ•¸çš„æ£§å¹€ä¸­
    // å‡½æ•¸è¿”å›æ™‚è‡ªå‹•é‡‹æ”¾
}

int main() {
    int num = 10;
    int arr[] = {1, 2, 3, 4, 5};
    
    printf("ä¿®æ”¹å‰: num = %d\n", num);
    modifyValue(num);  // æŒ‰å€¼å‚³é
    printf("modifyValue å¾Œ: num = %d\n", num);
    
    modifyValueByPointer(&num);  // æŒ‰æŒ‡æ¨™å‚³é
    printf("modifyValueByPointer å¾Œ: num = %d\n", num);
    
    printf("é™£åˆ—ä¿®æ”¹å‰: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
    
    modifyArray(arr, 5);  // æŒ‰æŒ‡æ¨™å‚³éé™£åˆ—
    
    printf("é™£åˆ—ä¿®æ”¹å¾Œ: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
    
    functionWithLocals(5);
    
    return 0;
}
```
</UniversalEditor>

### 2.3 æ£§å¹€çµæ§‹

<UniversalEditor title="æ£§å¹€è¦–è¦ºåŒ–" compare={true}>
```javascript !! js
// JavaScript - è‡ªå‹•æ£§ç®¡ç†
function outerFunction(x) {
    let outerVar = x * 2;
    
    function innerFunction(y) {
        let innerVar = y + outerVar;  // é–‰åŒ…æ•ç² outerVar
        console.log("å…§éƒ¨å‡½æ•¸:", innerVar);
        return innerVar;
    }
    
    console.log("å¤–éƒ¨å‡½æ•¸:", outerVar);
    return innerFunction(10);
}

// å‡½æ•¸å‘¼å«å»ºç«‹åŸ·è¡Œä¸Šä¸‹æ–‡
let result = outerFunction(5);
console.log("çµæœ:", result);

// æ£§è¿½è¹¤é¡¯ç¤ºå‘¼å«å±¤æ¬¡
function demonstrateStack() {
    console.trace("ç•¶å‰æ£§è¿½è¹¤");
}

demonstrateStack();
```

```c !! c
#include <stdio.h>

// æ¼”ç¤ºæ£§å¹€çš„å‡½æ•¸
void functionA(int param1, int param2) {
    int local1 = param1 + param2;
    int local2 = param1 * param2;
    
    printf("å‡½æ•¸ A - åƒæ•¸: %d, %d\n", param1, param2);
    printf("å‡½æ•¸ A - å€åŸŸè®Šæ•¸: %d, %d\n", local1, local2);
    
    // æ£§å¹€çµæ§‹:
    // +------------------+
    // | è¿”å›ä½å€         |  <- å‡½æ•¸è¿”å›å¾Œçš„ä½å€
    // +------------------+
    // | param2           |  <- å‡½æ•¸åƒæ•¸
    // +------------------+
    // | param1           |
    // +------------------+
    // | local1           |  <- å€åŸŸè®Šæ•¸
    // +------------------+
    // | local2           |
    // +------------------+
    // | æ£§æŒ‡æ¨™           |  <- ç•¶å‰æ£§ä½ç½®
    // +------------------+
}

void functionB(int x) {
    int local = x * 2;
    printf("å‡½æ•¸ B - åƒæ•¸: %d, å€åŸŸè®Šæ•¸: %d\n", x, local);
    
    // å‘¼å«å¦ä¸€å€‹å‡½æ•¸ï¼ˆå»ºç«‹æ–°çš„æ£§å¹€ï¼‰
    functionA(x, local);
}

int main() {
    printf("ä¸»å‡½æ•¸é–‹å§‹\n");
    
    // æ¯æ¬¡å‡½æ•¸å‘¼å«éƒ½å»ºç«‹æ–°çš„æ£§å¹€
    functionB(5);
    
    printf("ä¸»å‡½æ•¸çµæŸ\n");
    return 0;
}
```
</UniversalEditor>

## 3. éæ­¸å’Œæ£§ç®¡ç†

### 3.1 éæ­¸å‡½æ•¸

<UniversalEditor title="éæ­¸å‡½æ•¸" compare={true}>
```javascript !! js
// JavaScript - å¸¶è‡ªå‹•æ£§ç®¡ç†çš„éæ­¸
function factorial(n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
}

function fibonacci(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

function countdown(n) {
    if (n <= 0) {
        console.log("ç™¼å°„ï¼");
        return;
    }
    console.log(n);
    countdown(n - 1);
}

// éæ­¸é™£åˆ—è™•ç†
function sumArray(arr, index = 0) {
    if (index >= arr.length) return 0;
    return arr[index] + sumArray(arr, index + 1);
}

// æ¸¬è©¦éæ­¸
console.log("5 çš„éšä¹˜:", factorial(5));
console.log("æ–æ³¢é‚£å¥‘(7):", fibonacci(7));
countdown(3);
console.log("[1,2,3,4,5] çš„å’Œ:", sumArray([1, 2, 3, 4, 5]));
```

```c !! c
#include <stdio.h>

// éæ­¸éšä¹˜å‡½æ•¸
int factorial(int n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

// éæ­¸æ–æ³¢é‚£å¥‘ï¼ˆæ•ˆç‡ä½ä½†æ¼”ç¤ºéæ­¸ï¼‰
int fibonacci(int n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// éæ­¸å€’æ•¸è¨ˆæ™‚
void countdown(int n) {
    if (n <= 0) {
        printf("ç™¼å°„ï¼\n");
        return;
    }
    printf("%d\n", n);
    countdown(n - 1);
}

// éæ­¸é™£åˆ—æ±‚å’Œ
int sumArray(int arr[], int size, int index) {
    if (index >= size) {
        return 0;
    }
    return arr[index] + sumArray(arr, size, index + 1);
}

// éæ­¸äºŒåˆ†æœå°‹
int binarySearch(int arr[], int left, int right, int target) {
    if (left > right) {
        return -1;  // æœªæ‰¾åˆ°
    }
    
    int mid = left + (right - left) / 2;
    
    if (arr[mid] == target) {
        return mid;
    } else if (arr[mid] > target) {
        return binarySearch(arr, left, mid - 1, target);
    } else {
        return binarySearch(arr, mid + 1, right, target);
    }
}

int main() {
    printf("5 çš„éšä¹˜: %d\n", factorial(5));
    printf("æ–æ³¢é‚£å¥‘(7): %d\n", fibonacci(7));
    
    countdown(3);
    
    int arr[] = {1, 2, 3, 4, 5};
    printf("é™£åˆ—å’Œ: %d\n", sumArray(arr, 5, 0));
    
    int sorted[] = {1, 3, 5, 7, 9, 11, 13, 15};
    int target = 7;
    int result = binarySearch(sorted, 0, 7, target);
    printf("äºŒåˆ†æœå°‹ %d: ç´¢å¼• %d\n", target, result);
    
    return 0;
}
```
</UniversalEditor>

### 3.2 æ£§æº¢å‡ºå’Œè¨˜æ†¶é«”ç®¡ç†

<UniversalEditor title="æ£§æº¢å‡ºé é˜²" compare={true}>
```javascript !! js
// JavaScript - å¸¶é™åˆ¶çš„è‡ªå‹•æ£§ç®¡ç†
function deepRecursion(n) {
    if (n <= 0) return 0;
    return 1 + deepRecursion(n - 1);
}

// JavaScript æœ‰å‘¼å«æ£§é™åˆ¶
try {
    console.log("æ·±åº¦éæ­¸çµæœ:", deepRecursion(10000));
} catch (error) {
    console.log("æ£§æº¢å‡º:", error.message);
}

// å°¾éæ­¸å„ªåŒ–ï¼ˆES6ï¼‰
function tailRecursiveFactorial(n, accumulator = 1) {
    if (n <= 1) return accumulator;
    return tailRecursiveFactorial(n - 1, n * accumulator);
}

console.log("å°¾éæ­¸éšä¹˜:", tailRecursiveFactorial(5));
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

// å¯èƒ½å°è‡´æ£§æº¢å‡ºçš„æ·±åº¦éæ­¸
int deepRecursion(int n) {
    if (n <= 0) {
        return 0;
    }
    return 1 + deepRecursion(n - 1);
}

// å°¾éæ­¸éšä¹˜ï¼ˆæ›´é«˜æ•ˆï¼‰
int tailRecursiveFactorial(int n, int accumulator) {
    if (n <= 1) {
        return accumulator;
    }
    return tailRecursiveFactorial(n - 1, n * accumulator);
}

// è¿­ä»£ç‰ˆæœ¬ï¼ˆé˜²æ­¢æ£§æº¢å‡ºï¼‰
int iterativeFactorial(int n) {
    int result = 1;
    for (int i = 2; i <= n; i++) {
        result *= i;
    }
    return result;
}

// æ¼”ç¤ºæ£§å¤§å°é™åˆ¶çš„å‡½æ•¸
void demonstrateStackLimits() {
    // å¤§å‹å€åŸŸé™£åˆ—å¯èƒ½å°è‡´æ£§æº¢å‡º
    // int largeArray[1000000];  // å±éšªï¼
    
    // ç›¸åï¼Œä½¿ç”¨å‹•æ…‹åˆ†é…
    int* largeArray = malloc(1000000 * sizeof(int));
    if (largeArray != NULL) {
        printf("å¤§å‹é™£åˆ—åˆ†é…æˆåŠŸ\n");
        free(largeArray);  // é‡è¦ï¼šé‡‹æ”¾è¨˜æ†¶é«”
    }
}

int main() {
    printf("å°¾éæ­¸éšä¹˜ 5: %d\n", 
           tailRecursiveFactorial(5, 1));
    
    printf("è¿­ä»£éšä¹˜ 5: %d\n", 
           iterativeFactorial(5));
    
    // å°å¿ƒæ·±åº¦éæ­¸
    printf("æ·±åº¦éæ­¸ï¼ˆå°ï¼‰: %d\n", deepRecursion(100));
    
    demonstrateStackLimits();
    
    return 0;
}
```
</UniversalEditor>

## 4. å‡½æ•¸æŒ‡æ¨™

### 4.1 å‡½æ•¸æŒ‡æ¨™åŸºç¤

<UniversalEditor title="å‡½æ•¸æŒ‡æ¨™" compare={true}>
```javascript !! js
// JavaScript - å‡½æ•¸æ˜¯ä¸€ç­‰ç‰©ä»¶
function add(a, b) {
    return a + b;
}

function multiply(a, b) {
    return a * b;
}

function subtract(a, b) {
    return a - b;
}

// å‡½æ•¸å¯ä»¥è³¦å€¼çµ¦è®Šæ•¸
let operation = add;
console.log("ä½¿ç”¨å‡½æ•¸æŒ‡æ¨™:", operation(5, 3));

// å‡½æ•¸å¯ä»¥ä½œç‚ºåƒæ•¸å‚³é
function calculate(a, b, func) {
    return func(a, b);
}

console.log("åŠ æ³•:", calculate(10, 5, add));
console.log("ä¹˜æ³•:", calculate(10, 5, multiply));
console.log("æ¸›æ³•:", calculate(10, 5, subtract));

// å‡½æ•¸å¯ä»¥å„²å­˜åœ¨é™£åˆ—ä¸­
let operations = [add, multiply, subtract];
for (let i = 0; i < operations.length; i++) {
    console.log(`æ“ä½œ ${i}:`, operations[i](10, 2));
}

// å‡½æ•¸å¯ä»¥å¾å‡½æ•¸è¿”å›
function getOperation(type) {
    switch (type) {
        case 'add': return add;
        case 'multiply': return multiply;
        case 'subtract': return subtract;
        default: return add;
    }
}

let selectedOp = getOperation('multiply');
console.log("é¸æ“‡çš„æ“ä½œ:", selectedOp(6, 7));
```

```c !! c
#include <stdio.h>

// å‡½æ•¸å®£å‘Š
int add(int a, int b);
int multiply(int a, int b);
int subtract(int a, int b);

// å‡½æ•¸å®šç¾©
int add(int a, int b) {
    return a + b;
}

int multiply(int a, int b) {
    return a * b;
}

int subtract(int a, int b) {
    return a - b;
}

// æ¥å—å‡½æ•¸æŒ‡æ¨™ä½œç‚ºåƒæ•¸çš„å‡½æ•¸
int calculate(int a, int b, int (*operation)(int, int)) {
    return operation(a, b);
}

// è¿”å›å‡½æ•¸æŒ‡æ¨™çš„å‡½æ•¸
int (*getOperation(char type))(int, int) {
    switch (type) {
        case 'a': return add;
        case 'm': return multiply;
        case 's': return subtract;
        default: return add;
    }
}

int main() {
    // å‡½æ•¸æŒ‡æ¨™å®£å‘Š
    int (*operation)(int, int);
    
    // å°‡å‡½æ•¸è³¦å€¼çµ¦æŒ‡æ¨™
    operation = add;
    printf("ä½¿ç”¨å‡½æ•¸æŒ‡æ¨™: %d\n", operation(5, 3));
    
    // å°‡å‡½æ•¸æŒ‡æ¨™å‚³éçµ¦å¦ä¸€å€‹å‡½æ•¸
    printf("åŠ æ³•: %d\n", calculate(10, 5, add));
    printf("ä¹˜æ³•: %d\n", calculate(10, 5, multiply));
    printf("æ¸›æ³•: %d\n", calculate(10, 5, subtract));
    
    // å‡½æ•¸æŒ‡æ¨™é™£åˆ—
    int (*operations[3])(int, int) = {add, multiply, subtract};
    char* names[] = {"add", "multiply", "subtract"};
    
    for (int i = 0; i < 3; i++) {
        printf("%s: %d\n", names[i], operations[i](10, 2));
    }
    
    // å¾å‡½æ•¸ç²å–å‡½æ•¸æŒ‡æ¨™
    int (*selectedOp)(int, int) = getOperation('m');
    printf("é¸æ“‡çš„æ“ä½œ: %d\n", selectedOp(6, 7));
    
    return 0;
}
```
</UniversalEditor>

### 4.2 å‡½æ•¸æŒ‡æ¨™ä½œç‚ºå›èª¿

<UniversalEditor title="å‡½æ•¸æŒ‡æ¨™ä½œç‚ºå›èª¿" compare={true}>
```javascript !! js
// JavaScript - å›èª¿å‡½æ•¸
function processArray(arr, callback) {
    let result = [];
    for (let i = 0; i < arr.length; i++) {
        result.push(callback(arr[i]));
    }
    return result;
}

// å›èª¿å‡½æ•¸
function double(x) {
    return x * 2;
}

function square(x) {
    return x * x;
}

function isEven(x) {
    return x % 2 === 0;
}

// ä½¿ç”¨å›èª¿
let numbers = [1, 2, 3, 4, 5];
console.log("åŸå§‹:", numbers);
console.log("ç¿»å€:", processArray(numbers, double));
console.log("å¹³æ–¹:", processArray(numbers, square));

// å¸¶å›èª¿çš„éæ¿¾
function filterArray(arr, predicate) {
    let result = [];
    for (let i = 0; i < arr.length; i++) {
        if (predicate(arr[i])) {
            result.push(arr[i]);
        }
    }
    return result;
}

console.log("å¶æ•¸:", filterArray(numbers, isEven));

// å¸¶å›èª¿çš„æ’åº
function compareNumbers(a, b) {
    return a - b;
}

let unsorted = [3, 1, 4, 1, 5, 9, 2, 6];
unsorted.sort(compareNumbers);
console.log("æ’åºå¾Œ:", unsorted);
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

// å‡½æ•¸æŒ‡æ¨™é¡å‹å®šç¾©ï¼Œæé«˜å¯è®€æ€§
typedef int (*OperationFunc)(int);
typedef int (*ComparisonFunc)(int, int);

// ä½¿ç”¨å›èª¿è™•ç†é™£åˆ—çš„å‡½æ•¸
void processArray(int arr[], int size, OperationFunc operation) {
    for (int i = 0; i < size; i++) {
        arr[i] = operation(arr[i]);
    }
}

// ä½¿ç”¨å›èª¿éæ¿¾é™£åˆ—çš„å‡½æ•¸
int* filterArray(int arr[], int size, int (*predicate)(int), int* resultSize) {
    int* result = malloc(size * sizeof(int));
    *resultSize = 0;
    
    for (int i = 0; i < size; i++) {
        if (predicate(arr[i])) {
            result[*resultSize] = arr[i];
            (*resultSize)++;
        }
    }
    
    return result;
}

// å›èª¿å‡½æ•¸
int doubleValue(int x) {
    return x * 2;
}

int squareValue(int x) {
    return x * x;
}

int isEven(int x) {
    return x % 2 == 0;
}

int isPositive(int x) {
    return x > 0;
}

// æ’åºçš„æ¯”è¼ƒå‡½æ•¸
int compareAscending(int a, int b) {
    return a - b;
}

int compareDescending(int a, int b) {
    return b - a;
}

// å¸¶æ¯”è¼ƒå‡½æ•¸çš„ç°¡å–®æ°£æ³¡æ’åº
void bubbleSort(int arr[], int size, ComparisonFunc compare) {
    for (int i = 0; i < size - 1; i++) {
        for (int j = 0; j < size - i - 1; j++) {
            if (compare(arr[j], arr[j + 1]) > 0) {
                // äº¤æ›
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

int main() {
    int numbers[] = {1, 2, 3, 4, 5};
    int size = 5;
    
    printf("åŸå§‹é™£åˆ—: ");
    printArray(numbers, size);
    
    // ä½¿ç”¨ä¸åŒå›èª¿è™•ç†
    int doubled[5];
    for (int i = 0; i < size; i++) {
        doubled[i] = numbers[i];
    }
    processArray(doubled, size, doubleValue);
    printf("ç¿»å€: ");
    printArray(doubled, size);
    
    // éæ¿¾é™£åˆ—
    int resultSize;
    int* evenNumbers = filterArray(numbers, size, isEven, &resultSize);
    printf("å¶æ•¸: ");
    printArray(evenNumbers, resultSize);
    free(evenNumbers);
    
    // æ’åºé™£åˆ—
    int unsorted[] = {3, 1, 4, 1, 5, 9, 2, 6};
    int unsortedSize = 8;
    
    printf("æœªæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    bubbleSort(unsorted, unsortedSize, compareAscending);
    printf("å‡åºæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    bubbleSort(unsorted, unsortedSize, compareDescending);
    printf("é™åºæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    return 0;
}
```
</UniversalEditor>

## 5. å¯è®Šåƒæ•¸å’Œé«˜ç´šç‰¹æ€§

### 5.1 å¯è®Šåƒæ•¸å‡½æ•¸

<UniversalEditor title="å¯è®Šåƒæ•¸" compare={true}>
```javascript !! js
// JavaScript - å‰©é¤˜åƒæ•¸å’Œ arguments ç‰©ä»¶
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

function average(...numbers) {
    if (numbers.length === 0) return 0;
    return numbers.reduce((a, b) => a + b, 0) / numbers.length;
}

function formatString(template, ...values) {
    return template.replace(/\{(\d+)\}/g, (match, index) => {
        return values[index] || match;
    });
}

// ä½¿ç”¨å¯è®Šåƒæ•¸
console.log("å’Œ:", sum(1, 2, 3, 4, 5));
console.log("å¹³å‡å€¼:", average(10, 20, 30, 40));
console.log("æ ¼å¼åŒ–:", formatString("Hello {0}, you are {1} years old", "Alice", 25));

// arguments ç‰©ä»¶ï¼ˆéºç•™ï¼‰
function legacySum() {
    let total = 0;
    for (let i = 0; i < arguments.length; i++) {
        total += arguments[i];
    }
    return total;
}

console.log("éºç•™æ±‚å’Œ:", legacySum(1, 2, 3, 4, 5));
```

```c !! c
#include <stdio.h>
#include <stdarg.h>

// å¯è®Šåƒæ•¸å‡½æ•¸
int sum(int count, ...) {
    va_list args;
    va_start(args, count);
    
    int total = 0;
    for (int i = 0; i < count; i++) {
        total += va_arg(args, int);
    }
    
    va_end(args);
    return total;
}

// å¯è®Šåƒæ•¸æ±‚å¹³å‡å€¼
double average(int count, ...) {
    va_list args;
    va_start(args, count);
    
    double total = 0.0;
    for (int i = 0; i < count; i++) {
        total += va_arg(args, double);
    }
    
    va_end(args);
    return count > 0 ? total / count : 0.0;
}

// å¯è®Šåƒæ•¸å­—ä¸²æ ¼å¼åŒ–
void printFormatted(const char* format, ...) {
    va_list args;
    va_start(args, format);
    
    vprintf(format, args);
    
    va_end(args);
}

// ä¸åŒå‹åˆ¥çš„å¯è®Šåƒæ•¸
void printMixed(const char* prefix, int count, ...) {
    va_list args;
    va_start(args, count);
    
    printf("%s: ", prefix);
    for (int i = 0; i < count; i++) {
        // å‡è¨­äº¤æ›¿çš„ int å’Œ double
        if (i % 2 == 0) {
            int val = va_arg(args, int);
            printf("%d ", val);
        } else {
            double val = va_arg(args, double);
            printf("%.2f ", val);
        }
    }
    printf("\n");
    
    va_end(args);
}

int main() {
    // ä½¿ç”¨å¯è®Šåƒæ•¸
    printf("5 å€‹æ•¸çš„å’Œ: %d\n", sum(5, 1, 2, 3, 4, 5));
    printf("3 å€‹æ•¸çš„å’Œ: %d\n", sum(3, 10, 20, 30));
    
    printf("4 å€‹æ•¸çš„å¹³å‡å€¼: %.2f\n", average(4, 10.0, 20.0, 30.0, 40.0));
    
    printFormatted("Hello %s, you are %d years old\n", "Alice", 25);
    printFormatted("Temperature: %.1fÂ°C, Humidity: %d%%\n", 23.5, 65);
    
    printMixed("æ··åˆå€¼", 6, 10, 3.14, 20, 2.718, 30, 1.414);
    
    return 0;
}
```
</UniversalEditor>

### 5.2 å…§è¯å‡½æ•¸å’Œå„ªåŒ–

<UniversalEditor title="å…§è¯å‡½æ•¸" compare={true}>
```javascript !! js
// JavaScript - å‡½æ•¸å„ªåŒ–
function simpleAdd(a, b) {
    return a + b;
}

// ç¾ä»£ JavaScript å¼•æ“å„ªåŒ–å°å‡½æ•¸
const optimizedAdd = (a, b) => a + b;

// å‡½æ•¸å…§è¯ï¼ˆå¼•æ“å„ªåŒ–ï¼‰
function processData(data) {
    let result = 0;
    for (let i = 0; i < data.length; i++) {
        result += optimizedAdd(data[i], 1);  // å¯èƒ½è¢«å…§è¯
    }
    return result;
}

// æ•ˆèƒ½æ¸¬é‡
function measurePerformance(func, iterations) {
    const start = performance.now();
    for (let i = 0; i < iterations; i++) {
        func(i, i + 1);
    }
    const end = performance.now();
    return end - start;
}

console.log("ç°¡å–®å‡½æ•¸æ™‚é–“:", measurePerformance(simpleAdd, 1000000));
console.log("å„ªåŒ–å‡½æ•¸æ™‚é–“:", measurePerformance(optimizedAdd, 1000000));
```

```c !! c
#include <stdio.h>
#include <time.h>

// æ™®é€šå‡½æ•¸
int regularAdd(int a, int b) {
    return a + b;
}

// å…§è¯å‡½æ•¸ï¼ˆç·¨è­¯å™¨å»ºè­°ï¼‰
inline int inlineAdd(int a, int b) {
    return a + b;
}

// éœæ…‹å…§è¯ï¼ˆæ›´æ˜ç¢ºï¼‰
static inline int staticInlineAdd(int a, int b) {
    return a + b;
}

// å·¨é›†ï¼ˆé è™•ç†å™¨æ›¿æ›ï¼‰
#define MACRO_ADD(a, b) ((a) + (b))

// ä½¿ç”¨å…§è¯å‡½æ•¸çš„å‡½æ•¸
int processData(int data[], int size) {
    int result = 0;
    for (int i = 0; i < size; i++) {
        // é€™äº›å‘¼å«å¯èƒ½è¢«ç·¨è­¯å™¨å…§è¯
        result += inlineAdd(data[i], 1);
        result += staticInlineAdd(data[i], 2);
        result += MACRO_ADD(data[i], 3);
    }
    return result;
}

// æ•ˆèƒ½æ¸¬é‡å‡½æ•¸
double measurePerformance(int (*func)(int, int), int iterations) {
    clock_t start = clock();
    
    for (int i = 0; i < iterations; i++) {
        func(i, i + 1);
    }
    
    clock_t end = clock();
    return ((double)(end - start)) / CLOCKS_PER_SEC;
}

int main() {
    int data[] = {1, 2, 3, 4, 5};
    int size = 5;
    
    printf("è™•ç†çš„è³‡æ–™: %d\n", processData(data, size));
    
    // æ•ˆèƒ½æ¯”è¼ƒ
    int iterations = 1000000;
    
    printf("æ™®é€šå‡½æ•¸æ™‚é–“: %.6f ç§’\n", 
           measurePerformance(regularAdd, iterations));
    
    printf("å…§è¯å‡½æ•¸æ™‚é–“: %.6f ç§’\n", 
           measurePerformance(inlineAdd, iterations));
    
    printf("éœæ…‹å…§è¯æ™‚é–“: %.6f ç§’\n", 
           measurePerformance(staticInlineAdd, iterations));
    
    // æ³¨æ„ï¼šå¯¦éš›æ•ˆèƒ½å–æ±ºæ–¼ç·¨è­¯å™¨å„ªåŒ–
    // åœ¨ä¸åŒç·¨è­¯å™¨å’Œå„ªåŒ–ç´šåˆ¥ä¸‹å¯èƒ½æœ‰æ‰€ä¸åŒ
    
    return 0;
}
```
</UniversalEditor>

## 6. ç·´ç¿’

### ç·´ç¿’ 1: éæ­¸é™£åˆ—è™•ç†
ç·¨å¯«ä¸€å€‹ C å‡½æ•¸ï¼Œéæ­¸æŸ¥æ‰¾é™£åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚

<UniversalEditor title="ç·´ç¿’ 1: éæ­¸æœ€å¤§å€¼" compare={true}>
```javascript !! js
// JavaScript è§£æ±ºæ–¹æ¡ˆ
function findMaxRecursive(arr, index = 0) {
    if (index >= arr.length) {
        return -Infinity;
    }
    
    let current = arr[index];
    let rest = findMaxRecursive(arr, index + 1);
    
    return current > rest ? current : rest;
}

// æ¸¬è©¦
let numbers = [3, 7, 2, 9, 1, 8, 5];
console.log("æœ€å¤§å€¼:", findMaxRecursive(numbers));
```

```c !! c
#include <stdio.h>
#include <limits.h>

// C è§£æ±ºæ–¹æ¡ˆ
int findMaxRecursive(int arr[], int size, int index) {
    // åŸºæœ¬æƒ…æ³ï¼šå¦‚æœåˆ°é”æœ«å°¾
    if (index >= size) {
        return INT_MIN;
    }
    
    // ç²å–ç•¶å‰å…ƒç´ 
    int current = arr[index];
    
    // éæ­¸æŸ¥æ‰¾å‰©é¤˜é™£åˆ—çš„æœ€å¤§å€¼
    int restMax = findMaxRecursive(arr, size, index + 1);
    
    // è¿”å›ç•¶å‰å€¼å’Œå‰©é¤˜å€¼ä¸­çš„è¼ƒå¤§è€…
    return (current > restMax) ? current : restMax;
}

int main() {
    int numbers[] = {3, 7, 2, 9, 1, 8, 5};
    int size = sizeof(numbers) / sizeof(numbers[0]);
    
    int max = findMaxRecursive(numbers, size, 0);
    printf("æœ€å¤§å€¼: %d\n", max);
    
    return 0;
}
```
</UniversalEditor>

### ç·´ç¿’ 2: å‡½æ•¸æŒ‡æ¨™è¨ˆç®—å™¨
ä½¿ç”¨å‡½æ•¸æŒ‡æ¨™å»ºç«‹è¨ˆç®—å™¨ã€‚

<UniversalEditor title="ç·´ç¿’ 2: å‡½æ•¸æŒ‡æ¨™è¨ˆç®—å™¨" compare={true}>
```javascript !! js
// JavaScript è§£æ±ºæ–¹æ¡ˆ
const calculator = {
    add: (a, b) => a + b,
    subtract: (a, b) => a - b,
    multiply: (a, b) => a * b,
    divide: (a, b) => b !== 0 ? a / b : NaN
};

function calculate(operation, a, b) {
    if (calculator[operation]) {
        return calculator[operation](a, b);
    }
    return NaN;
}

// æ¸¬è©¦
console.log("10 + 5 =", calculate('add', 10, 5));
console.log("10 - 5 =", calculate('subtract', 10, 5));
console.log("10 * 5 =", calculate('multiply', 10, 5));
console.log("10 / 5 =", calculate('divide', 10, 5));
```

```c !! c
#include <stdio.h>

// è¨ˆç®—å™¨æ“ä½œçš„å‡½æ•¸æŒ‡æ¨™é¡å‹
typedef double (*Operation)(double, double);

// è¨ˆç®—å™¨å‡½æ•¸
double add(double a, double b) {
    return a + b;
}

double subtract(double a, double b) {
    return a - b;
}

double multiply(double a, double b) {
    return a * b;
}

double divide(double a, double b) {
    return b != 0 ? a / b : 0;
}

// ä½¿ç”¨å‡½æ•¸æŒ‡æ¨™çš„è¨ˆç®—å™¨å‡½æ•¸
double calculate(Operation operation, double a, double b) {
    return operation(a, b);
}

int main() {
    double a = 10.0, b = 5.0;
    
    printf("%.1f + %.1f = %.1f\n", a, b, calculate(add, a, b));
    printf("%.1f - %.1f = %.1f\n", a, b, calculate(subtract, a, b));
    printf("%.1f * %.1f = %.1f\n", a, b, calculate(multiply, a, b));
    printf("%.1f / %.1f = %.1f\n", a, b, calculate(divide, a, b));
    
    return 0;
}
```
</UniversalEditor>

## 7. ç¸½çµ

### æ¶µè“‹çš„æ ¸å¿ƒæ¦‚å¿µ

1. **å‡½æ•¸å®£å‘Šå’Œå®šç¾©**: C å‡½æ•¸éœ€è¦é¡¯å¼å®£å‘Šï¼Œå…·æœ‰åš´æ ¼çš„åƒæ•¸å‹åˆ¥
2. **æ£§å¹€**: æ¯æ¬¡å‡½æ•¸å‘¼å«éƒ½å»ºç«‹ä¸€å€‹æ£§å¹€ï¼ŒåŒ…å«å€åŸŸè®Šæ•¸ã€åƒæ•¸å’Œè¿”å›ä½å€
3. **åƒæ•¸å‚³é**: C é è¨­ä½¿ç”¨æŒ‰å€¼å‚³éï¼Œä½†æŒ‡æ¨™å¯ä»¥å¯¦ç¾æŒ‰åƒè€ƒå‚³éè¡Œç‚º
4. **éæ­¸**: C æ”¯æ´éæ­¸ï¼Œä½†éœ€è¦å°å¿ƒæ£§ç®¡ç†ä»¥é¿å…æº¢å‡º
5. **å‡½æ•¸æŒ‡æ¨™**: å¯¦ç¾å‹•æ…‹å‡½æ•¸é¸æ“‡å’Œå›èª¿æ©Ÿåˆ¶
6. **å¯è®Šåƒæ•¸**: ä½¿ç”¨ `stdarg.h` å…è¨±å‡½æ•¸æ¥å—å¯è®Šæ•¸é‡çš„åƒæ•¸
7. **å…§è¯å‡½æ•¸**: å‘ç·¨è­¯å™¨æä¾›æ•ˆèƒ½å„ªåŒ–æç¤º

### è¨˜æ†¶é«”ç®¡ç†è€ƒæ…®

- **æ£§è®Šæ•¸**: éš¨å‡½æ•¸å‘¼å«è‡ªå‹•åˆ†é…å’Œé‡‹æ”¾
- **æ£§æº¢å‡º**: æ·±åº¦éæ­¸å¯èƒ½å°è‡´æ£§æº¢å‡ºï¼›å°å¤§å‹å•é¡Œä½¿ç”¨è¿­ä»£
- **å‡½æ•¸æŒ‡æ¨™**: èˆ‡å‹•æ…‹åˆ†é…ä¸€èµ·ä½¿ç”¨æ™‚éœ€è¦å°å¿ƒè¨˜æ†¶é«”ç®¡ç†
- **å¯è®Šåƒæ•¸**: éœ€è¦æ­£ç¢ºä½¿ç”¨ `va_start` å’Œ `va_end` é€²è¡Œåˆå§‹åŒ–å’Œæ¸…ç†

### æœ€ä½³å¯¦è¸

1. **å§‹çµ‚å®£å‘Šå‡½æ•¸åŸå‹**åœ¨ä½¿ç”¨å‰
2. **åœ¨å‡½æ•¸å®£å‘Šä¸­ä½¿ç”¨æœ‰æ„ç¾©çš„åƒæ•¸å**
3. **åœ¨éæ­¸å‡½æ•¸ä¸­æª¢æŸ¥æ£§æº¢å‡º**
4. **ä½¿ç”¨å‡½æ•¸æŒ‡æ¨™**å¯¦ç¾éˆæ´»ã€å¯é‡ç”¨çš„ç¨‹å¼ç¢¼
5. **å°æ•ˆèƒ½é—œéµç¨‹å¼ç¢¼å„ªå…ˆä½¿ç”¨è¿­ä»£è€Œééæ­¸**
6. **å°å°è€Œé »ç¹å‘¼å«çš„å‡½æ•¸ä½¿ç”¨å…§è¯å‡½æ•¸**
7. **å°å¿ƒè™•ç†å¯è®Šåƒæ•¸**ä¸¦é€²è¡Œé©ç•¶çš„å‹åˆ¥æª¢æŸ¥

### æ•ˆèƒ½æç¤º

- **å…§è¯å‡½æ•¸**: å°å°è€Œé »ç¹å‘¼å«çš„å‡½æ•¸ä½¿ç”¨ `inline` é—œéµå­—
- **å‡½æ•¸æŒ‡æ¨™**: å¯èƒ½å¢åŠ è¼•å¾®é–‹éŠ·ä½†æä¾›éˆæ´»æ€§
- **éæ­¸ vs è¿­ä»£**: æ ¹æ“šå•é¡Œè¤‡é›œæ€§å’Œæ£§ä½¿ç”¨æƒ…æ³é¸æ“‡
- **æ£§ç®¡ç†**: äº†è§£ç’°å¢ƒä¸­çš„æ£§å¤§å°é™åˆ¶

ç†è§£ C å‡½æ•¸å’Œæ£§ç®¡ç†å°æ–¼ç·¨å¯«é«˜æ•ˆã€å®‰å…¨ã€å¯ç¶­è­·çš„ç¨‹å¼ç¢¼è‡³é—œé‡è¦ã€‚é€™äº›æ¦‚å¿µç‚ºç³»çµ±ç¨‹å¼è¨­è¨ˆå’Œæ•ˆèƒ½å„ªåŒ–ç­‰æ›´é«˜ç´šä¸»é¡Œå¥ å®šäº†åŸºç¤ã€‚ 