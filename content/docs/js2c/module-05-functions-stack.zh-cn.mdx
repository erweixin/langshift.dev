---
title: "å‡½æ•°å’Œæ ˆç®¡ç†"
description: "ä» JavaScript è§†è§’å­¦ä¹  C è¯­è¨€å‡½æ•°å’Œæ ˆç®¡ç†ã€‚ç†è§£å‡½æ•°å‚æ•°ä¼ é€’æœºåˆ¶ã€æ ˆå¸§ã€é€’å½’å‡½æ•°ã€å‡½æ•°æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†ã€‚"
---

# å‡½æ•°å’Œæ ˆç®¡ç†

## 1. ä»‹ç»

### ä» JavaScript å‡½æ•°åˆ° C å‡½æ•°

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡ï¼Œå…·æœ‰é—­åŒ…ã€è‡ªåŠ¨å†…å­˜ç®¡ç†å’Œçµæ´»çš„å‚æ•°å¤„ç†ã€‚åœ¨ C ä¸­ï¼Œå‡½æ•°æ›´åŠ åŸå§‹ï¼Œä½†æä¾›äº†å¯¹å†…å­˜ã€æ ˆç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–çš„ç²¾ç¡®æ§åˆ¶ã€‚

C å‡½æ•°æ˜¯æ¨¡å—åŒ–ç¼–ç¨‹çš„åŸºç¡€æ„å»ºå—ï¼Œæä¾›ï¼š
- ä»£ç é‡ç”¨å’Œç»„ç»‡
- å¯¹å†…å­˜åˆ†é…çš„ç²¾ç¡®æ§åˆ¶
- æ€§èƒ½ä¼˜åŒ–æœºä¼š
- ç³»ç»Ÿçº§ç¼–ç¨‹èƒ½åŠ›

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**: C å‡½æ•°åœ¨è°ƒç”¨æ ˆä¸Šè¿è¡Œï¼Œæ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ŒåŒ…å«å±€éƒ¨å˜é‡ã€å‚æ•°å’Œè¿”å›åœ°å€ã€‚ç†è§£æ ˆç®¡ç†å¯¹å†…å­˜å®‰å…¨å’Œæ€§èƒ½è‡³å…³é‡è¦ã€‚

## 2. å‡½æ•°åŸºç¡€

### 2.1 å‡½æ•°å£°æ˜å’Œå®šä¹‰

<UniversalEditor title="å‡½æ•°å£°æ˜" compare={true}>
```javascript !! js
// JavaScript - çµæ´»çš„å‡½æ•°å£°æ˜
function greet(name) {
    return `Hello, ${name}!`;
}

// å‡½æ•°è¡¨è¾¾å¼
const greet2 = function(name) {
    return `Hello, ${name}!`;
};

// ç®­å¤´å‡½æ•°
const greet3 = (name) => `Hello, ${name}!`;

// é»˜è®¤å‚æ•°
function greetWithDefault(name = "World") {
    return `Hello, ${name}!`;
}

// å¯å˜å‚æ•°
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

// å‡½æ•°è°ƒç”¨
console.log(greet("Alice"));
console.log(greetWithDefault());
console.log(sum(1, 2, 3, 4, 5));
```

```c !! c
#include <stdio.h>

// å‡½æ•°å£°æ˜ï¼ˆåŸå‹ï¼‰
int greet(const char* name);
int sum(int a, int b);
void printArray(int arr[], int size);

// å‡½æ•°å®šä¹‰
int greet(const char* name) {
    printf("Hello, %s!\n", name);
    return 0;
}

// å¸¦è¿”å›å€¼çš„å‡½æ•°
int sum(int a, int b) {
    return a + b;
}

// å¸¦æ•°ç»„å‚æ•°çš„å‡½æ•°
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

// å¸¦å¤šä¸ªå‚æ•°çš„å‡½æ•°
int calculate(int a, int b, char operation) {
    switch (operation) {
        case '+': return a + b;
        case '-': return a - b;
        case '*': return a * b;
        case '/': return b != 0 ? a / b : 0;
        default: return 0;
    }
}

int main() {
    // å‡½æ•°è°ƒç”¨
    greet("Alice");
    
    int result = sum(10, 20);
    printf("Sum: %d\n", result);
    
    int arr[] = {1, 2, 3, 4, 5};
    printArray(arr, 5);
    
    printf("10 + 5 = %d\n", calculate(10, 5, '+'));
    printf("10 - 5 = %d\n", calculate(10, 5, '-'));
    
    return 0;
}
```
</UniversalEditor>

### 2.2 å‡½æ•°å‚æ•°å’Œæ ˆå¸§

<UniversalEditor title="å‡½æ•°å‚æ•°å’Œæ ˆ" compare={true}>
```javascript !! js
// JavaScript - åŸºæœ¬ç±»å‹æŒ‰å€¼ä¼ é€’ï¼Œå¯¹è±¡æŒ‰å¼•ç”¨ä¼ é€’
function modifyValue(x) {
    x = 100;  // åŸºæœ¬ç±»å‹çš„å±€éƒ¨å‰¯æœ¬
    console.log("å‡½æ•°å†…éƒ¨:", x);
}

function modifyObject(obj) {
    obj.name = "Modified";  // ä¿®æ”¹åŸå§‹å¯¹è±¡
    console.log("å‡½æ•°å†…éƒ¨:", obj.name);
}

function modifyArray(arr) {
    arr.push(100);  // ä¿®æ”¹åŸå§‹æ•°ç»„
    console.log("å‡½æ•°å†…éƒ¨:", arr);
}

// æµ‹è¯•ä¸åŒç±»å‹
let num = 10;
let person = { name: "John" };
let numbers = [1, 2, 3];

console.log("ä¿®æ”¹å‰:", num, person.name, numbers);
modifyValue(num);
modifyObject(person);
modifyArray(numbers);
console.log("ä¿®æ”¹å:", num, person.name, numbers);
```

```c !! c
#include <stdio.h>

// æŒ‰å€¼ä¼ é€’ï¼ˆC ä¸­çš„é»˜è®¤æ–¹å¼ï¼‰
void modifyValue(int x) {
    x = 100;  // å±€éƒ¨å‰¯æœ¬ï¼Œä¸å½±å“åŸå§‹å€¼
    printf("å‡½æ•°å†…éƒ¨: x = %d\n", x);
}

// æŒ‰æŒ‡é’ˆä¼ é€’ï¼ˆæ¨¡æ‹ŸæŒ‰å¼•ç”¨ä¼ é€’ï¼‰
void modifyValueByPointer(int* x) {
    *x = 100;  // ä¿®æ”¹åŸå§‹å€¼
    printf("å‡½æ•°å†…éƒ¨: *x = %d\n", *x);
}

// æŒ‰æŒ‡é’ˆä¼ é€’æ•°ç»„
void modifyArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        arr[i] *= 2;  // ä¿®æ”¹åŸå§‹æ•°ç»„
    }
    printf("å‡½æ•°å†…éƒ¨: æ•°ç»„å·²ä¿®æ”¹\n");
}

// å¸¦å±€éƒ¨å˜é‡çš„å‡½æ•°ï¼ˆæ ˆå¸§ï¼‰
void functionWithLocals(int param) {
    int local1 = 10;
    int local2 = 20;
    int local3 = local1 + local2 + param;
    
    printf("å±€éƒ¨å˜é‡: %d, %d, %d\n", local1, local2, local3);
    printf("å‚æ•°: %d\n", param);
    
    // è¿™äº›å˜é‡å­˜å‚¨åœ¨å‡½æ•°çš„æ ˆå¸§ä¸­
    // å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾
}

int main() {
    int num = 10;
    int arr[] = {1, 2, 3, 4, 5};
    
    printf("ä¿®æ”¹å‰: num = %d\n", num);
    modifyValue(num);  // æŒ‰å€¼ä¼ é€’
    printf("modifyValue å: num = %d\n", num);
    
    modifyValueByPointer(&num);  // æŒ‰æŒ‡é’ˆä¼ é€’
    printf("modifyValueByPointer å: num = %d\n", num);
    
    printf("æ•°ç»„ä¿®æ”¹å‰: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
    
    modifyArray(arr, 5);  // æŒ‰æŒ‡é’ˆä¼ é€’æ•°ç»„
    
    printf("æ•°ç»„ä¿®æ”¹å: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
    
    functionWithLocals(5);
    
    return 0;
}
```
</UniversalEditor>

### 2.3 æ ˆå¸§ç»“æ„

<UniversalEditor title="æ ˆå¸§å¯è§†åŒ–" compare={true}>
```javascript !! js
// JavaScript - è‡ªåŠ¨æ ˆç®¡ç†
function outerFunction(x) {
    let outerVar = x * 2;
    
    function innerFunction(y) {
        let innerVar = y + outerVar;  // é—­åŒ…æ•è· outerVar
        console.log("å†…éƒ¨å‡½æ•°:", innerVar);
        return innerVar;
    }
    
    console.log("å¤–éƒ¨å‡½æ•°:", outerVar);
    return innerFunction(10);
}

// å‡½æ•°è°ƒç”¨åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡
let result = outerFunction(5);
console.log("ç»“æœ:", result);

// æ ˆè·Ÿè¸ªæ˜¾ç¤ºè°ƒç”¨å±‚æ¬¡
function demonstrateStack() {
    console.trace("å½“å‰æ ˆè·Ÿè¸ª");
}

demonstrateStack();
```

```c !! c
#include <stdio.h>

// æ¼”ç¤ºæ ˆå¸§çš„å‡½æ•°
void functionA(int param1, int param2) {
    int local1 = param1 + param2;
    int local2 = param1 * param2;
    
    printf("å‡½æ•° A - å‚æ•°: %d, %d\n", param1, param2);
    printf("å‡½æ•° A - å±€éƒ¨å˜é‡: %d, %d\n", local1, local2);
    
    // æ ˆå¸§ç»“æ„:
    // +------------------+
    // | è¿”å›åœ°å€         |  <- å‡½æ•°è¿”å›åçš„åœ°å€
    // +------------------+
    // | param2           |  <- å‡½æ•°å‚æ•°
    // +------------------+
    // | param1           |
    // +------------------+
    // | local1           |  <- å±€éƒ¨å˜é‡
    // +------------------+
    // | local2           |
    // +------------------+
    // | æ ˆæŒ‡é’ˆ           |  <- å½“å‰æ ˆä½ç½®
    // +------------------+
}

void functionB(int x) {
    int local = x * 2;
    printf("å‡½æ•° B - å‚æ•°: %d, å±€éƒ¨å˜é‡: %d\n", x, local);
    
    // è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼ˆåˆ›å»ºæ–°çš„æ ˆå¸§ï¼‰
    functionA(x, local);
}

int main() {
    printf("ä¸»å‡½æ•°å¼€å§‹\n");
    
    // æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½åˆ›å»ºæ–°çš„æ ˆå¸§
    functionB(5);
    
    printf("ä¸»å‡½æ•°ç»“æŸ\n");
    return 0;
}
```
</UniversalEditor>

## 3. é€’å½’å’Œæ ˆç®¡ç†

### 3.1 é€’å½’å‡½æ•°

<UniversalEditor title="é€’å½’å‡½æ•°" compare={true}>
```javascript !! js
// JavaScript - å¸¦è‡ªåŠ¨æ ˆç®¡ç†çš„é€’å½’
function factorial(n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
}

function fibonacci(n) {
    if (n <= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

function countdown(n) {
    if (n <= 0) {
        console.log("å‘å°„ï¼");
        return;
    }
    console.log(n);
    countdown(n - 1);
}

// é€’å½’æ•°ç»„å¤„ç†
function sumArray(arr, index = 0) {
    if (index >= arr.length) return 0;
    return arr[index] + sumArray(arr, index + 1);
}

// æµ‹è¯•é€’å½’
console.log("5 çš„é˜¶ä¹˜:", factorial(5));
console.log("æ–æ³¢é‚£å¥‘(7):", fibonacci(7));
countdown(3);
console.log("[1,2,3,4,5] çš„å’Œ:", sumArray([1, 2, 3, 4, 5]));
```

```c !! c
#include <stdio.h>

// é€’å½’é˜¶ä¹˜å‡½æ•°
int factorial(int n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

// é€’å½’æ–æ³¢é‚£å¥‘ï¼ˆæ•ˆç‡ä½ä½†æ¼”ç¤ºé€’å½’ï¼‰
int fibonacci(int n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// é€’å½’å€’è®¡æ—¶
void countdown(int n) {
    if (n <= 0) {
        printf("å‘å°„ï¼\n");
        return;
    }
    printf("%d\n", n);
    countdown(n - 1);
}

// é€’å½’æ•°ç»„æ±‚å’Œ
int sumArray(int arr[], int size, int index) {
    if (index >= size) {
        return 0;
    }
    return arr[index] + sumArray(arr, size, index + 1);
}

// é€’å½’äºŒåˆ†æŸ¥æ‰¾
int binarySearch(int arr[], int left, int right, int target) {
    if (left > right) {
        return -1;  // æœªæ‰¾åˆ°
    }
    
    int mid = left + (right - left) / 2;
    
    if (arr[mid] == target) {
        return mid;
    } else if (arr[mid] > target) {
        return binarySearch(arr, left, mid - 1, target);
    } else {
        return binarySearch(arr, mid + 1, right, target);
    }
}

int main() {
    printf("5 çš„é˜¶ä¹˜: %d\n", factorial(5));
    printf("æ–æ³¢é‚£å¥‘(7): %d\n", fibonacci(7));
    
    countdown(3);
    
    int arr[] = {1, 2, 3, 4, 5};
    printf("æ•°ç»„å’Œ: %d\n", sumArray(arr, 5, 0));
    
    int sorted[] = {1, 3, 5, 7, 9, 11, 13, 15};
    int target = 7;
    int result = binarySearch(sorted, 0, 7, target);
    printf("äºŒåˆ†æŸ¥æ‰¾ %d: ç´¢å¼• %d\n", target, result);
    
    return 0;
}
```
</UniversalEditor>

### 3.2 æ ˆæº¢å‡ºå’Œå†…å­˜ç®¡ç†

<UniversalEditor title="æ ˆæº¢å‡ºé¢„é˜²" compare={true}>
```javascript !! js
// JavaScript - å¸¦é™åˆ¶çš„è‡ªåŠ¨æ ˆç®¡ç†
function deepRecursion(n) {
    if (n <= 0) return 0;
    return 1 + deepRecursion(n - 1);
}

// JavaScript æœ‰è°ƒç”¨æ ˆé™åˆ¶
try {
    console.log("æ·±åº¦é€’å½’ç»“æœ:", deepRecursion(10000));
} catch (error) {
    console.log("æ ˆæº¢å‡º:", error.message);
}

// å°¾é€’å½’ä¼˜åŒ–ï¼ˆES6ï¼‰
function tailRecursiveFactorial(n, accumulator = 1) {
    if (n <= 1) return accumulator;
    return tailRecursiveFactorial(n - 1, n * accumulator);
}

console.log("å°¾é€’å½’é˜¶ä¹˜:", tailRecursiveFactorial(5));
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

// å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºçš„æ·±åº¦é€’å½’
int deepRecursion(int n) {
    if (n <= 0) {
        return 0;
    }
    return 1 + deepRecursion(n - 1);
}

// å°¾é€’å½’é˜¶ä¹˜ï¼ˆæ›´é«˜æ•ˆï¼‰
int tailRecursiveFactorial(int n, int accumulator) {
    if (n <= 1) {
        return accumulator;
    }
    return tailRecursiveFactorial(n - 1, n * accumulator);
}

// è¿­ä»£ç‰ˆæœ¬ï¼ˆé˜²æ­¢æ ˆæº¢å‡ºï¼‰
int iterativeFactorial(int n) {
    int result = 1;
    for (int i = 2; i <= n; i++) {
        result *= i;
    }
    return result;
}

// æ¼”ç¤ºæ ˆå¤§å°é™åˆ¶çš„å‡½æ•°
void demonstrateStackLimits() {
    // å¤§å‹å±€éƒ¨æ•°ç»„å¯èƒ½å¯¼è‡´æ ˆæº¢å‡º
    // int largeArray[1000000];  // å±é™©ï¼
    
    // ç›¸åï¼Œä½¿ç”¨åŠ¨æ€åˆ†é…
    int* largeArray = malloc(1000000 * sizeof(int));
    if (largeArray != NULL) {
        printf("å¤§å‹æ•°ç»„åˆ†é…æˆåŠŸ\n");
        free(largeArray);  // é‡è¦ï¼šé‡Šæ”¾å†…å­˜
    }
}

int main() {
    printf("å°¾é€’å½’é˜¶ä¹˜ 5: %d\n", 
           tailRecursiveFactorial(5, 1));
    
    printf("è¿­ä»£é˜¶ä¹˜ 5: %d\n", 
           iterativeFactorial(5));
    
    // å°å¿ƒæ·±åº¦é€’å½’
    printf("æ·±åº¦é€’å½’ï¼ˆå°ï¼‰: %d\n", deepRecursion(100));
    
    demonstrateStackLimits();
    
    return 0;
}
```
</UniversalEditor>

## 4. å‡½æ•°æŒ‡é’ˆ

### 4.1 å‡½æ•°æŒ‡é’ˆåŸºç¡€

<UniversalEditor title="å‡½æ•°æŒ‡é’ˆ" compare={true}>
```javascript !! js
// JavaScript - å‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡
function add(a, b) {
    return a + b;
}

function multiply(a, b) {
    return a * b;
}

function subtract(a, b) {
    return a - b;
}

// å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡
let operation = add;
console.log("ä½¿ç”¨å‡½æ•°æŒ‡é’ˆ:", operation(5, 3));

// å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’
function calculate(a, b, func) {
    return func(a, b);
}

console.log("åŠ æ³•:", calculate(10, 5, add));
console.log("ä¹˜æ³•:", calculate(10, 5, multiply));
console.log("å‡æ³•:", calculate(10, 5, subtract));

// å‡½æ•°å¯ä»¥å­˜å‚¨åœ¨æ•°ç»„ä¸­
let operations = [add, multiply, subtract];
for (let i = 0; i < operations.length; i++) {
    console.log(`æ“ä½œ ${i}:`, operations[i](10, 2));
}

// å‡½æ•°å¯ä»¥ä»å‡½æ•°è¿”å›
function getOperation(type) {
    switch (type) {
        case 'add': return add;
        case 'multiply': return multiply;
        case 'subtract': return subtract;
        default: return add;
    }
}

let selectedOp = getOperation('multiply');
console.log("é€‰æ‹©çš„æ“ä½œ:", selectedOp(6, 7));
```

```c !! c
#include <stdio.h>

// å‡½æ•°å£°æ˜
int add(int a, int b);
int multiply(int a, int b);
int subtract(int a, int b);

// å‡½æ•°å®šä¹‰
int add(int a, int b) {
    return a + b;
}

int multiply(int a, int b) {
    return a * b;
}

int subtract(int a, int b) {
    return a - b;
}

// æ¥å—å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„å‡½æ•°
int calculate(int a, int b, int (*operation)(int, int)) {
    return operation(a, b);
}

// è¿”å›å‡½æ•°æŒ‡é’ˆçš„å‡½æ•°
int (*getOperation(char type))(int, int) {
    switch (type) {
        case 'a': return add;
        case 'm': return multiply;
        case 's': return subtract;
        default: return add;
    }
}

int main() {
    // å‡½æ•°æŒ‡é’ˆå£°æ˜
    int (*operation)(int, int);
    
    // å°†å‡½æ•°èµ‹å€¼ç»™æŒ‡é’ˆ
    operation = add;
    printf("ä½¿ç”¨å‡½æ•°æŒ‡é’ˆ: %d\n", operation(5, 3));
    
    // å°†å‡½æ•°æŒ‡é’ˆä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°
    printf("åŠ æ³•: %d\n", calculate(10, 5, add));
    printf("ä¹˜æ³•: %d\n", calculate(10, 5, multiply));
    printf("å‡æ³•: %d\n", calculate(10, 5, subtract));
    
    // å‡½æ•°æŒ‡é’ˆæ•°ç»„
    int (*operations[3])(int, int) = {add, multiply, subtract};
    char* names[] = {"add", "multiply", "subtract"};
    
    for (int i = 0; i < 3; i++) {
        printf("%s: %d\n", names[i], operations[i](10, 2));
    }
    
    // ä»å‡½æ•°è·å–å‡½æ•°æŒ‡é’ˆ
    int (*selectedOp)(int, int) = getOperation('m');
    printf("é€‰æ‹©çš„æ“ä½œ: %d\n", selectedOp(6, 7));
    
    return 0;
}
```
</UniversalEditor>

### 4.2 å‡½æ•°æŒ‡é’ˆä½œä¸ºå›è°ƒ

<UniversalEditor title="å‡½æ•°æŒ‡é’ˆä½œä¸ºå›è°ƒ" compare={true}>
```javascript !! js
// JavaScript - å›è°ƒå‡½æ•°
function processArray(arr, callback) {
    let result = [];
    for (let i = 0; i < arr.length; i++) {
        result.push(callback(arr[i]));
    }
    return result;
}

// å›è°ƒå‡½æ•°
function double(x) {
    return x * 2;
}

function square(x) {
    return x * x;
}

function isEven(x) {
    return x % 2 === 0;
}

// ä½¿ç”¨å›è°ƒ
let numbers = [1, 2, 3, 4, 5];
console.log("åŸå§‹:", numbers);
console.log("ç¿»å€:", processArray(numbers, double));
console.log("å¹³æ–¹:", processArray(numbers, square));

// å¸¦å›è°ƒçš„è¿‡æ»¤
function filterArray(arr, predicate) {
    let result = [];
    for (let i = 0; i < arr.length; i++) {
        if (predicate(arr[i])) {
            result.push(arr[i]);
        }
    }
    return result;
}

console.log("å¶æ•°:", filterArray(numbers, isEven));

// å¸¦å›è°ƒçš„æ’åº
function compareNumbers(a, b) {
    return a - b;
}

let unsorted = [3, 1, 4, 1, 5, 9, 2, 6];
unsorted.sort(compareNumbers);
console.log("æ’åºå:", unsorted);
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

// å‡½æ•°æŒ‡é’ˆç±»å‹å®šä¹‰ï¼Œæé«˜å¯è¯»æ€§
typedef int (*OperationFunc)(int);
typedef int (*ComparisonFunc)(int, int);

// ä½¿ç”¨å›è°ƒå¤„ç†æ•°ç»„çš„å‡½æ•°
void processArray(int arr[], int size, OperationFunc operation) {
    for (int i = 0; i < size; i++) {
        arr[i] = operation(arr[i]);
    }
}

// ä½¿ç”¨å›è°ƒè¿‡æ»¤æ•°ç»„çš„å‡½æ•°
int* filterArray(int arr[], int size, int (*predicate)(int), int* resultSize) {
    int* result = malloc(size * sizeof(int));
    *resultSize = 0;
    
    for (int i = 0; i < size; i++) {
        if (predicate(arr[i])) {
            result[*resultSize] = arr[i];
            (*resultSize)++;
        }
    }
    
    return result;
}

// å›è°ƒå‡½æ•°
int doubleValue(int x) {
    return x * 2;
}

int squareValue(int x) {
    return x * x;
}

int isEven(int x) {
    return x % 2 == 0;
}

int isPositive(int x) {
    return x > 0;
}

// æ’åºçš„æ¯”è¾ƒå‡½æ•°
int compareAscending(int a, int b) {
    return a - b;
}

int compareDescending(int a, int b) {
    return b - a;
}

// å¸¦æ¯”è¾ƒå‡½æ•°çš„ç®€å•å†’æ³¡æ’åº
void bubbleSort(int arr[], int size, ComparisonFunc compare) {
    for (int i = 0; i < size - 1; i++) {
        for (int j = 0; j < size - i - 1; j++) {
            if (compare(arr[j], arr[j + 1]) > 0) {
                // äº¤æ¢
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

int main() {
    int numbers[] = {1, 2, 3, 4, 5};
    int size = 5;
    
    printf("åŸå§‹æ•°ç»„: ");
    printArray(numbers, size);
    
    // ä½¿ç”¨ä¸åŒå›è°ƒå¤„ç†
    int doubled[5];
    for (int i = 0; i < size; i++) {
        doubled[i] = numbers[i];
    }
    processArray(doubled, size, doubleValue);
    printf("ç¿»å€: ");
    printArray(doubled, size);
    
    // è¿‡æ»¤æ•°ç»„
    int resultSize;
    int* evenNumbers = filterArray(numbers, size, isEven, &resultSize);
    printf("å¶æ•°: ");
    printArray(evenNumbers, resultSize);
    free(evenNumbers);
    
    // æ’åºæ•°ç»„
    int unsorted[] = {3, 1, 4, 1, 5, 9, 2, 6};
    int unsortedSize = 8;
    
    printf("æœªæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    bubbleSort(unsorted, unsortedSize, compareAscending);
    printf("å‡åºæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    bubbleSort(unsorted, unsortedSize, compareDescending);
    printf("é™åºæ’åº: ");
    printArray(unsorted, unsortedSize);
    
    return 0;
}
```
</UniversalEditor>

## 5. å¯å˜å‚æ•°å’Œé«˜çº§ç‰¹æ€§

### 5.1 å¯å˜å‚æ•°å‡½æ•°

<UniversalEditor title="å¯å˜å‚æ•°" compare={true}>
```javascript !! js
// JavaScript - å‰©ä½™å‚æ•°å’Œ arguments å¯¹è±¡
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

function average(...numbers) {
    if (numbers.length === 0) return 0;
    return numbers.reduce((a, b) => a + b, 0) / numbers.length;
}

function formatString(template, ...values) {
    return template.replace(/\{(\d+)\}/g, (match, index) => {
        return values[index] || match;
    });
}

// ä½¿ç”¨å¯å˜å‚æ•°
console.log("å’Œ:", sum(1, 2, 3, 4, 5));
console.log("å¹³å‡å€¼:", average(10, 20, 30, 40));
console.log("æ ¼å¼åŒ–:", formatString("Hello {0}, you are {1} years old", "Alice", 25));

// arguments å¯¹è±¡ï¼ˆé—ç•™ï¼‰
function legacySum() {
    let total = 0;
    for (let i = 0; i < arguments.length; i++) {
        total += arguments[i];
    }
    return total;
}

console.log("é—ç•™æ±‚å’Œ:", legacySum(1, 2, 3, 4, 5));
```

```c !! c
#include <stdio.h>
#include <stdarg.h>

// å¯å˜å‚æ•°å‡½æ•°
int sum(int count, ...) {
    va_list args;
    va_start(args, count);
    
    int total = 0;
    for (int i = 0; i < count; i++) {
        total += va_arg(args, int);
    }
    
    va_end(args);
    return total;
}

// å¯å˜å‚æ•°æ±‚å¹³å‡å€¼
double average(int count, ...) {
    va_list args;
    va_start(args, count);
    
    double total = 0.0;
    for (int i = 0; i < count; i++) {
        total += va_arg(args, double);
    }
    
    va_end(args);
    return count > 0 ? total / count : 0.0;
}

// å¯å˜å‚æ•°å­—ç¬¦ä¸²æ ¼å¼åŒ–
void printFormatted(const char* format, ...) {
    va_list args;
    va_start(args, format);
    
    vprintf(format, args);
    
    va_end(args);
}

// ä¸åŒç±»å‹çš„å¯å˜å‚æ•°
void printMixed(const char* prefix, int count, ...) {
    va_list args;
    va_start(args, count);
    
    printf("%s: ", prefix);
    for (int i = 0; i < count; i++) {
        // å‡è®¾äº¤æ›¿çš„ int å’Œ double
        if (i % 2 == 0) {
            int val = va_arg(args, int);
            printf("%d ", val);
        } else {
            double val = va_arg(args, double);
            printf("%.2f ", val);
        }
    }
    printf("\n");
    
    va_end(args);
}

int main() {
    // ä½¿ç”¨å¯å˜å‚æ•°
    printf("5 ä¸ªæ•°çš„å’Œ: %d\n", sum(5, 1, 2, 3, 4, 5));
    printf("3 ä¸ªæ•°çš„å’Œ: %d\n", sum(3, 10, 20, 30));
    
    printf("4 ä¸ªæ•°çš„å¹³å‡å€¼: %.2f\n", average(4, 10.0, 20.0, 30.0, 40.0));
    
    printFormatted("Hello %s, you are %d years old\n", "Alice", 25);
    printFormatted("Temperature: %.1fÂ°C, Humidity: %d%%\n", 23.5, 65);
    
    printMixed("æ··åˆå€¼", 6, 10, 3.14, 20, 2.718, 30, 1.414);
    
    return 0;
}
```
</UniversalEditor>

### 5.2 å†…è”å‡½æ•°å’Œä¼˜åŒ–

<UniversalEditor title="å†…è”å‡½æ•°" compare={true}>
```javascript !! js
// JavaScript - å‡½æ•°ä¼˜åŒ–
function simpleAdd(a, b) {
    return a + b;
}

// ç°ä»£ JavaScript å¼•æ“ä¼˜åŒ–å°å‡½æ•°
const optimizedAdd = (a, b) => a + b;

// å‡½æ•°å†…è”ï¼ˆå¼•æ“ä¼˜åŒ–ï¼‰
function processData(data) {
    let result = 0;
    for (let i = 0; i < data.length; i++) {
        result += optimizedAdd(data[i], 1);  // å¯èƒ½è¢«å†…è”
    }
    return result;
}

// æ€§èƒ½æµ‹é‡
function measurePerformance(func, iterations) {
    const start = performance.now();
    for (let i = 0; i < iterations; i++) {
        func(i, i + 1);
    }
    const end = performance.now();
    return end - start;
}

console.log("ç®€å•å‡½æ•°æ—¶é—´:", measurePerformance(simpleAdd, 1000000));
console.log("ä¼˜åŒ–å‡½æ•°æ—¶é—´:", measurePerformance(optimizedAdd, 1000000));
```

```c !! c
#include <stdio.h>
#include <time.h>

// æ™®é€šå‡½æ•°
int regularAdd(int a, int b) {
    return a + b;
}

// å†…è”å‡½æ•°ï¼ˆç¼–è¯‘å™¨å»ºè®®ï¼‰
inline int inlineAdd(int a, int b) {
    return a + b;
}

// é™æ€å†…è”ï¼ˆæ›´æ˜ç¡®ï¼‰
static inline int staticInlineAdd(int a, int b) {
    return a + b;
}

// å®ï¼ˆé¢„å¤„ç†å™¨æ›¿æ¢ï¼‰
#define MACRO_ADD(a, b) ((a) + (b))

// ä½¿ç”¨å†…è”å‡½æ•°çš„å‡½æ•°
int processData(int data[], int size) {
    int result = 0;
    for (int i = 0; i < size; i++) {
        // è¿™äº›è°ƒç”¨å¯èƒ½è¢«ç¼–è¯‘å™¨å†…è”
        result += inlineAdd(data[i], 1);
        result += staticInlineAdd(data[i], 2);
        result += MACRO_ADD(data[i], 3);
    }
    return result;
}

// æ€§èƒ½æµ‹é‡å‡½æ•°
double measurePerformance(int (*func)(int, int), int iterations) {
    clock_t start = clock();
    
    for (int i = 0; i < iterations; i++) {
        func(i, i + 1);
    }
    
    clock_t end = clock();
    return ((double)(end - start)) / CLOCKS_PER_SEC;
}

int main() {
    int data[] = {1, 2, 3, 4, 5};
    int size = 5;
    
    printf("å¤„ç†çš„æ•°æ®: %d\n", processData(data, size));
    
    // æ€§èƒ½æ¯”è¾ƒ
    int iterations = 1000000;
    
    printf("æ™®é€šå‡½æ•°æ—¶é—´: %.6f ç§’\n", 
           measurePerformance(regularAdd, iterations));
    
    printf("å†…è”å‡½æ•°æ—¶é—´: %.6f ç§’\n", 
           measurePerformance(inlineAdd, iterations));
    
    printf("é™æ€å†…è”æ—¶é—´: %.6f ç§’\n", 
           measurePerformance(staticInlineAdd, iterations));
    
    // æ³¨æ„ï¼šå®é™…æ€§èƒ½å–å†³äºç¼–è¯‘å™¨ä¼˜åŒ–
    // åœ¨ä¸åŒç¼–è¯‘å™¨å’Œä¼˜åŒ–çº§åˆ«ä¸‹å¯èƒ½æœ‰æ‰€ä¸åŒ
    
    return 0;
}
```
</UniversalEditor>

## 6. ç»ƒä¹ 

### ç»ƒä¹  1: é€’å½’æ•°ç»„å¤„ç†
ç¼–å†™ä¸€ä¸ª C å‡½æ•°ï¼Œé€’å½’æŸ¥æ‰¾æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚

<UniversalEditor title="ç»ƒä¹  1: é€’å½’æœ€å¤§å€¼" compare={true}>
```javascript !! js
// JavaScript è§£å†³æ–¹æ¡ˆ
function findMaxRecursive(arr, index = 0) {
    if (index >= arr.length) {
        return -Infinity;
    }
    
    let current = arr[index];
    let rest = findMaxRecursive(arr, index + 1);
    
    return current > rest ? current : rest;
}

// æµ‹è¯•
let numbers = [3, 7, 2, 9, 1, 8, 5];
console.log("æœ€å¤§å€¼:", findMaxRecursive(numbers));
```

```c !! c
#include <stdio.h>
#include <limits.h>

// C è§£å†³æ–¹æ¡ˆ
int findMaxRecursive(int arr[], int size, int index) {
    // åŸºæœ¬æƒ…å†µï¼šå¦‚æœåˆ°è¾¾æœ«å°¾
    if (index >= size) {
        return INT_MIN;
    }
    
    // è·å–å½“å‰å…ƒç´ 
    int current = arr[index];
    
    // é€’å½’æŸ¥æ‰¾å‰©ä½™æ•°ç»„çš„æœ€å¤§å€¼
    int restMax = findMaxRecursive(arr, size, index + 1);
    
    // è¿”å›å½“å‰å€¼å’Œå‰©ä½™å€¼ä¸­çš„è¾ƒå¤§è€…
    return (current > restMax) ? current : restMax;
}

int main() {
    int numbers[] = {3, 7, 2, 9, 1, 8, 5};
    int size = sizeof(numbers) / sizeof(numbers[0]);
    
    int max = findMaxRecursive(numbers, size, 0);
    printf("æœ€å¤§å€¼: %d\n", max);
    
    return 0;
}
```
</UniversalEditor>

### ç»ƒä¹  2: å‡½æ•°æŒ‡é’ˆè®¡ç®—å™¨
ä½¿ç”¨å‡½æ•°æŒ‡é’ˆåˆ›å»ºè®¡ç®—å™¨ã€‚

<UniversalEditor title="ç»ƒä¹  2: å‡½æ•°æŒ‡é’ˆè®¡ç®—å™¨" compare={true}>
```javascript !! js
// JavaScript è§£å†³æ–¹æ¡ˆ
const calculator = {
    add: (a, b) => a + b,
    subtract: (a, b) => a - b,
    multiply: (a, b) => a * b,
    divide: (a, b) => b !== 0 ? a / b : NaN
};

function calculate(operation, a, b) {
    if (calculator[operation]) {
        return calculator[operation](a, b);
    }
    return NaN;
}

// æµ‹è¯•
console.log("10 + 5 =", calculate('add', 10, 5));
console.log("10 - 5 =", calculate('subtract', 10, 5));
console.log("10 * 5 =", calculate('multiply', 10, 5));
console.log("10 / 5 =", calculate('divide', 10, 5));
```

```c !! c
#include <stdio.h>

// è®¡ç®—å™¨æ“ä½œçš„å‡½æ•°æŒ‡é’ˆç±»å‹
typedef double (*Operation)(double, double);

// è®¡ç®—å™¨å‡½æ•°
double add(double a, double b) {
    return a + b;
}

double subtract(double a, double b) {
    return a - b;
}

double multiply(double a, double b) {
    return a * b;
}

double divide(double a, double b) {
    return b != 0 ? a / b : 0;
}

// ä½¿ç”¨å‡½æ•°æŒ‡é’ˆçš„è®¡ç®—å™¨å‡½æ•°
double calculate(Operation operation, double a, double b) {
    return operation(a, b);
}

int main() {
    double a = 10.0, b = 5.0;
    
    printf("%.1f + %.1f = %.1f\n", a, b, calculate(add, a, b));
    printf("%.1f - %.1f = %.1f\n", a, b, calculate(subtract, a, b));
    printf("%.1f * %.1f = %.1f\n", a, b, calculate(multiply, a, b));
    printf("%.1f / %.1f = %.1f\n", a, b, calculate(divide, a, b));
    
    return 0;
}
```
</UniversalEditor>

## 7. æ€»ç»“

### æ¶µç›–çš„æ ¸å¿ƒæ¦‚å¿µ

1. **å‡½æ•°å£°æ˜å’Œå®šä¹‰**: C å‡½æ•°éœ€è¦æ˜¾å¼å£°æ˜ï¼Œå…·æœ‰ä¸¥æ ¼çš„å‚æ•°ç±»å‹
2. **æ ˆå¸§**: æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ŒåŒ…å«å±€éƒ¨å˜é‡ã€å‚æ•°å’Œè¿”å›åœ°å€
3. **å‚æ•°ä¼ é€’**: C é»˜è®¤ä½¿ç”¨æŒ‰å€¼ä¼ é€’ï¼Œä½†æŒ‡é’ˆå¯ä»¥å®ç°æŒ‰å¼•ç”¨ä¼ é€’è¡Œä¸º
4. **é€’å½’**: C æ”¯æŒé€’å½’ï¼Œä½†éœ€è¦å°å¿ƒæ ˆç®¡ç†ä»¥é¿å…æº¢å‡º
5. **å‡½æ•°æŒ‡é’ˆ**: å®ç°åŠ¨æ€å‡½æ•°é€‰æ‹©å’Œå›è°ƒæœºåˆ¶
6. **å¯å˜å‚æ•°**: ä½¿ç”¨ `stdarg.h` å…è®¸å‡½æ•°æ¥å—å¯å˜æ•°é‡çš„å‚æ•°
7. **å†…è”å‡½æ•°**: å‘ç¼–è¯‘å™¨æä¾›æ€§èƒ½ä¼˜åŒ–æç¤º

### å†…å­˜ç®¡ç†è€ƒè™‘

- **æ ˆå˜é‡**: éšå‡½æ•°è°ƒç”¨è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾
- **æ ˆæº¢å‡º**: æ·±åº¦é€’å½’å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼›å¯¹å¤§å‹é—®é¢˜ä½¿ç”¨è¿­ä»£
- **å‡½æ•°æŒ‡é’ˆ**: ä¸åŠ¨æ€åˆ†é…ä¸€èµ·ä½¿ç”¨æ—¶éœ€è¦å°å¿ƒå†…å­˜ç®¡ç†
- **å¯å˜å‚æ•°**: éœ€è¦æ­£ç¡®ä½¿ç”¨ `va_start` å’Œ `va_end` è¿›è¡Œåˆå§‹åŒ–å’Œæ¸…ç†

### æœ€ä½³å®è·µ

1. **å§‹ç»ˆå£°æ˜å‡½æ•°åŸå‹**åœ¨ä½¿ç”¨å‰
2. **åœ¨å‡½æ•°å£°æ˜ä¸­ä½¿ç”¨æœ‰æ„ä¹‰çš„å‚æ•°å**
3. **åœ¨é€’å½’å‡½æ•°ä¸­æ£€æŸ¥æ ˆæº¢å‡º**
4. **ä½¿ç”¨å‡½æ•°æŒ‡é’ˆ**å®ç°çµæ´»ã€å¯é‡ç”¨çš„ä»£ç 
5. **å¯¹æ€§èƒ½å…³é”®ä»£ç ä¼˜å…ˆä½¿ç”¨è¿­ä»£è€Œéé€’å½’**
6. **å¯¹å°è€Œé¢‘ç¹è°ƒç”¨çš„å‡½æ•°ä½¿ç”¨å†…è”å‡½æ•°**
7. **å°å¿ƒå¤„ç†å¯å˜å‚æ•°**å¹¶è¿›è¡Œé€‚å½“çš„ç±»å‹æ£€æŸ¥

### æ€§èƒ½æç¤º

- **å†…è”å‡½æ•°**: å¯¹å°è€Œé¢‘ç¹è°ƒç”¨çš„å‡½æ•°ä½¿ç”¨ `inline` å…³é”®å­—
- **å‡½æ•°æŒ‡é’ˆ**: å¯èƒ½å¢åŠ è½»å¾®å¼€é”€ä½†æä¾›çµæ´»æ€§
- **é€’å½’ vs è¿­ä»£**: æ ¹æ®é—®é¢˜å¤æ‚æ€§å’Œæ ˆä½¿ç”¨æƒ…å†µé€‰æ‹©
- **æ ˆç®¡ç†**: äº†è§£ç¯å¢ƒä¸­çš„æ ˆå¤§å°é™åˆ¶

ç†è§£ C å‡½æ•°å’Œæ ˆç®¡ç†å¯¹äºç¼–å†™é«˜æ•ˆã€å®‰å…¨ã€å¯ç»´æŠ¤çš„ä»£ç è‡³å…³é‡è¦ã€‚è¿™äº›æ¦‚å¿µä¸ºç³»ç»Ÿç¼–ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–ç­‰æ›´é«˜çº§ä¸»é¢˜å¥ å®šäº†åŸºç¡€ã€‚ 