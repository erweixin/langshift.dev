---
title: "æª”æ¡ˆæ“ä½œå’Œ I/O"
description: "å¾ JavaScript è¦–è§’å­¸ç¿’ C èªè¨€æª”æ¡ˆæ“ä½œï¼Œç†è§£æª”æ¡ˆ I/Oã€éŒ¯èª¤è™•ç†ï¼Œä¸¦å°æ¯” JavaScript File APIã€‚"
---

# æª”æ¡ˆæ“ä½œå’Œ I/O

## 1. æ¦‚å¿µä»‹ç´¹

### å¾ JavaScript File API åˆ° C æª”æ¡ˆæ“ä½œ

åœ¨ JavaScript ä¸­ï¼Œæª”æ¡ˆæ“ä½œé€šå¸¸æ˜¯éåŒæ­¥çš„ï¼Œé€é File API æˆ– Node.js fs æ¨¡çµ„è™•ç†ã€‚è€Œåœ¨ C èªè¨€ä¸­ï¼Œæª”æ¡ˆæ“ä½œæ˜¯åŒæ­¥çš„ï¼Œä½¿ç”¨åº•å±¤ç³»çµ±å‘¼å«ï¼Œæä¾›å°æª”æ¡ˆè™•ç†çš„ç›´æ¥æ§åˆ¶ã€‚

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**ï¼šC æª”æ¡ˆæ“ä½œçµ¦ä½ å°æª”æ¡ˆ I/O çš„ç²¾ç¢ºæ§åˆ¶ï¼Œä½†éœ€è¦ä»”ç´°çš„éŒ¯èª¤è™•ç†å’Œè³‡æºç®¡ç†ã€‚

## 2. åŸºç¤æª”æ¡ˆæ“ä½œ

<UniversalEditor title="åŸºç¤æª”æ¡ˆæ“ä½œ" compare={true}>
```javascript !! js
// JavaScript - File API (ç€è¦½å™¨)
const fileInput = document.getElementById('fileInput');
fileInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function(e) {
        console.log('æª”æ¡ˆå…§å®¹:', e.target.result);
    };
    
    reader.readAsText(file);
});

// Node.js fs æ¨¡çµ„
const fs = require('fs');

// åŒæ­¥è®€å–
try {
    const data = fs.readFileSync('input.txt', 'utf8');
    console.log('æª”æ¡ˆå…§å®¹:', data);
} catch (err) {
    console.error('è®€å–æª”æ¡ˆéŒ¯èª¤:', err);
}

// éåŒæ­¥è®€å–
fs.readFile('input.txt', 'utf8', (err, data) => {
    if (err) {
        console.error('éŒ¯èª¤:', err);
        return;
    }
    console.log('æª”æ¡ˆå…§å®¹:', data);
});
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

int main() {
    FILE* file;
    char buffer[1024];
    
    // ä»¥è®€å–æ¨¡å¼é–‹å•Ÿæª”æ¡ˆ
    file = fopen("input.txt", "r");
    if (file == NULL) {
        printf("éŒ¯èª¤ï¼šç„¡æ³•ä»¥è®€å–æ¨¡å¼é–‹å•Ÿæª”æ¡ˆ\n");
        return 1;
    }
    
    // è®€å–æª”æ¡ˆå…§å®¹
    while (fgets(buffer, sizeof(buffer), file) != NULL) {
        printf("è¡Œ: %s", buffer);
    }
    
    // é—œé–‰æª”æ¡ˆ
    fclose(file);
    
    // å¯«å…¥æª”æ¡ˆ
    file = fopen("output.txt", "w");
    if (file == NULL) {
        printf("éŒ¯èª¤ï¼šç„¡æ³•ä»¥å¯«å…¥æ¨¡å¼é–‹å•Ÿæª”æ¡ˆ\n");
        return 1;
    }
    
    fprintf(file, "ä½ å¥½ï¼ŒC æª”æ¡ˆæ“ä½œï¼\n");
    fprintf(file, "é€™æ˜¯ä¸€å€‹æ¸¬è©¦æª”æ¡ˆã€‚\n");
    
    fclose(file);
    printf("æª”æ¡ˆå¯«å…¥æˆåŠŸ\n");
    
    return 0;
}
```
</UniversalEditor>

## 3. æª”æ¡ˆæ¨¡å¼å’Œæ“ä½œ

<UniversalEditor title="æª”æ¡ˆæ¨¡å¼" compare={true}>
```javascript !! js
// JavaScript - ä¸åŒçš„æª”æ¡ˆæ“ä½œ
const fs = require('fs');

// è®€å–æª”æ¡ˆ
fs.readFile('data.txt', 'utf8', (err, data) => {
    if (err) throw err;
    console.log(data);
});

// å¯«å…¥æª”æ¡ˆï¼ˆè¦†è“‹ï¼‰
fs.writeFile('output.txt', 'æ–°å…§å®¹', (err) => {
    if (err) throw err;
    console.log('æª”æ¡ˆå·²å¯«å…¥');
});

// è¿½åŠ åˆ°æª”æ¡ˆ
fs.appendFile('log.txt', 'æ–°æ—¥èªŒæ¢ç›®\n', (err) => {
    if (err) throw err;
    console.log('å·²è¿½åŠ åˆ°æª”æ¡ˆ');
});

// æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨
if (fs.existsSync('data.txt')) {
    console.log('æª”æ¡ˆå­˜åœ¨');
}
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

int main() {
    FILE* file;
    
    // ä¸åŒçš„æª”æ¡ˆæ¨¡å¼
    // "r" - å”¯è®€
    // "w" - å¯«å…¥ï¼ˆå»ºç«‹æ–°æª”æ¡ˆï¼Œæˆªæ–·ç¾æœ‰æª”æ¡ˆï¼‰
    // "a" - è¿½åŠ 
    // "r+" - è®€å¯«
    // "w+" - è®€å¯«ï¼ˆå»ºç«‹æ–°æª”æ¡ˆï¼‰
    // "a+" - è®€å’Œè¿½åŠ 
    
    // è®€å–æ¨¡å¼
    file = fopen("data.txt", "r");
    if (file != NULL) {
        printf("æª”æ¡ˆå·²ä»¥è®€å–æ¨¡å¼é–‹å•Ÿ\n");
        fclose(file);
    }
    
    // å¯«å…¥æ¨¡å¼ï¼ˆè¦†è“‹ï¼‰
    file = fopen("output.txt", "w");
    if (file != NULL) {
        fprintf(file, "é€™æœƒè¦†è“‹æª”æ¡ˆ\n");
        fclose(file);
    }
    
    // è¿½åŠ æ¨¡å¼
    file = fopen("log.txt", "a");
    if (file != NULL) {
        fprintf(file, "æ–°æ—¥èªŒæ¢ç›®\n");
        fclose(file);
    }
    
    // è®€å¯«æ¨¡å¼
    file = fopen("data.txt", "r+");
    if (file != NULL) {
        // å¯ä»¥åŒæ™‚è®€å¯«
        char buffer[100];
        fgets(buffer, sizeof(buffer), file);
        printf("è®€å–: %s", buffer);
        
        fseek(file, 0, SEEK_END); // è·³åˆ°æœ«å°¾
        fprintf(file, "è¿½åŠ çš„å…§å®¹\n");
        fclose(file);
    }
    
    return 0;
}
```
</UniversalEditor>

## 4. éŒ¯èª¤è™•ç†å’Œæª”æ¡ˆå®šä½

<UniversalEditor title="éŒ¯èª¤è™•ç†" compare={true}>
```javascript !! js
// JavaScript - éŒ¯èª¤è™•ç†
const fs = require('fs');

function readFileSafely(filename) {
    try {
        const data = fs.readFileSync(filename, 'utf8');
        return data;
    } catch (error) {
        if (error.code === 'ENOENT') {
            console.log('æª”æ¡ˆæœªæ‰¾åˆ°');
        } else if (error.code === 'EACCES') {
            console.log('æ¬Šé™è¢«æ‹’çµ•');
        } else {
            console.log('éŒ¯èª¤:', error.message);
        }
        return null;
    }
}

// æª”æ¡ˆå®šä½ï¼ˆNode.js Bufferï¼‰
const buffer = Buffer.alloc(1024);
const fd = fs.openSync('data.txt', 'r');
fs.readSync(fd, buffer, 0, 100, 50); // å¾ä½ç½® 50 é–‹å§‹è®€å– 100 ä½å…ƒçµ„
fs.closeSync(fd);
```

```c !! c
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

int main() {
    FILE* file;
    char buffer[1024];
    
    // é–‹å•Ÿæª”æ¡ˆä¸¦é€²è¡ŒéŒ¯èª¤æª¢æŸ¥
    file = fopen("ä¸å­˜åœ¨çš„æª”æ¡ˆ.txt", "r");
    if (file == NULL) {
        printf("é–‹å•Ÿæª”æ¡ˆéŒ¯èª¤: %s\n", strerror(errno));
        
        // æª¢æŸ¥ç‰¹å®šéŒ¯èª¤é¡å‹
        if (errno == ENOENT) {
            printf("æª”æ¡ˆä¸å­˜åœ¨\n");
        } else if (errno == EACCES) {
            printf("æ¬Šé™è¢«æ‹’çµ•\n");
        }
        return 1;
    }
    
    // æª”æ¡ˆå®šä½
    fseek(file, 0, SEEK_SET);   // æª”æ¡ˆé–‹é ­
    fseek(file, 0, SEEK_END);   // æª”æ¡ˆæœ«å°¾
    fseek(file, 10, SEEK_CUR);  // å¾ç•¶å‰ä½ç½®å‘å¾Œ 10 ä½å…ƒçµ„
    
    // å–å¾—ç•¶å‰ä½ç½®
    long position = ftell(file);
    printf("ç•¶å‰ä½ç½®: %ld\n", position);
    
    // è®€å–æŒ‡å®šæ•¸é‡
    size_t bytes_read = fread(buffer, 1, 100, file);
    if (bytes_read < 100) {
        if (feof(file)) {
            printf("å·²åˆ°é”æª”æ¡ˆæœ«å°¾\n");
        }
        if (ferror(file)) {
            printf("è®€å–æª”æ¡ˆéŒ¯èª¤\n");
        }
    }
    
    fclose(file);
    return 0;
}
```
</UniversalEditor>

## 5. äºŒé€²ä½æª”æ¡ˆæ“ä½œ

<UniversalEditor title="äºŒé€²ä½æª”æ¡ˆæ“ä½œ" compare={true}>
```javascript !! js
// JavaScript - äºŒé€²ä½æª”æ¡ˆè™•ç†
const fs = require('fs');

// è®€å–äºŒé€²ä½æª”æ¡ˆ
fs.readFile('image.jpg', (err, data) => {
    if (err) throw err;
    console.log('äºŒé€²ä½è³‡æ–™é•·åº¦:', data.length);
    
    // è™•ç†äºŒé€²ä½è³‡æ–™
    const buffer = Buffer.from(data);
    console.log('å‰ 10 ä½å…ƒçµ„:', buffer.slice(0, 10));
});

// å¯«å…¥äºŒé€²ä½è³‡æ–™
const binaryData = Buffer.from([0x48, 0x65, 0x6C, 0x6C, 0x6F]); // "Hello"
fs.writeFile('binary.dat', binaryData, (err) => {
    if (err) throw err;
    console.log('äºŒé€²ä½æª”æ¡ˆå·²å¯«å…¥');
});
```

```c !! c
#include <stdio.h>
#include <stdlib.h>

// äºŒé€²ä½è³‡æ–™çµæ§‹
typedef struct {
    int id;
    char name[50];
    float score;
} Student;

int main() {
    FILE* file;
    Student student;
    
    // å¯«å…¥äºŒé€²ä½è³‡æ–™
    file = fopen("students.dat", "wb");
    if (file == NULL) {
        printf("ä»¥å¯«å…¥æ¨¡å¼é–‹å•Ÿæª”æ¡ˆéŒ¯èª¤\n");
        return 1;
    }
    
    // å¯«å…¥å­¸ç”Ÿè¨˜éŒ„
    Student students[] = {
        {1, "Alice", 95.5},
        {2, "Bob", 87.2},
        {3, "Charlie", 92.8}
    };
    
    fwrite(students, sizeof(Student), 3, file);
    fclose(file);
    
    // è®€å–äºŒé€²ä½è³‡æ–™
    file = fopen("students.dat", "rb");
    if (file == NULL) {
        printf("ä»¥è®€å–æ¨¡å¼é–‹å•Ÿæª”æ¡ˆéŒ¯èª¤\n");
        return 1;
    }
    
    // è®€å–å­¸ç”Ÿè¨˜éŒ„
    while (fread(&student, sizeof(Student), 1, file) == 1) {
        printf("ID: %d, å§“å: %s, åˆ†æ•¸: %.1f\n", 
               student.id, student.name, student.score);
    }
    
    fclose(file);
    return 0;
}
```
</UniversalEditor>

## 6. å¸¸è¦‹é™·é˜±
- **æœªæª¢æŸ¥æª”æ¡ˆé–‹å•ŸæˆåŠŸ**ï¼šå§‹çµ‚æª¢æŸ¥ `fopen()` æ˜¯å¦è¿”å› NULL
- **å¿˜è¨˜é—œé–‰æª”æ¡ˆ**ï¼šå§‹çµ‚å‘¼å« `fclose()` ä»¥é˜²æ­¢è³‡æºæ´©æ¼
- **ç·©è¡å€æº¢ä½**ï¼šç¢ºä¿ç·©è¡å€å¤§å°å°æª”æ¡ˆæ“ä½œè¶³å¤ 
- **æª”æ¡ˆå®šä½éŒ¯èª¤**ï¼šè¬¹æ…ä½¿ç”¨ `fseek()` å’Œ `ftell()`
- **äºŒé€²ä½èˆ‡æ–‡å­—æ¨¡å¼**ï¼šç‚ºæª”æ¡ˆé¡å‹ä½¿ç”¨é©ç•¶çš„æ¨¡å¼

## 7. ç·´ç¿’é¡Œ
1. æ’°å¯«ä¸€å€‹ç¨‹å¼ï¼Œå°‡ä¸€å€‹æª”æ¡ˆè¤‡è£½åˆ°å¦ä¸€å€‹æª”æ¡ˆï¼Œé©ç•¶è™•ç†éŒ¯èª¤ã€‚
2. å»ºç«‹ä¸€å€‹å‡½æ•¸ï¼Œé€è¡Œè®€å–æª”æ¡ˆä¸¦è¨ˆç®—å–®å­—æ•¸é‡ã€‚
3. æ’°å¯«ä¸€å€‹ç¨‹å¼ï¼Œå°‡å¸¶æ™‚é–“æˆ³çš„è³‡æ–™è¿½åŠ åˆ°æ—¥èªŒæª”æ¡ˆã€‚

## 8. æ•ˆèƒ½åˆ†æ
- C æª”æ¡ˆæ“ä½œé€šå¸¸æ¯” JavaScript æ›´å¿«ï¼Œå› ç‚ºç›´æ¥ä½¿ç”¨ç³»çµ±å‘¼å«
- ç·©è¡ I/Oï¼ˆ`fprintf`ã€`fscanf`ï¼‰æ¯”é€å­—å…ƒ I/O æ›´é«˜æ•ˆ
- äºŒé€²ä½æª”æ¡ˆæ“ä½œæ¯”æ–‡å­—æ“ä½œæ›´å¿«
- é©ç•¶çš„éŒ¯èª¤è™•ç†å°å¥å£¯çš„æª”æ¡ˆæ“ä½œè‡³é—œé‡è¦

---

> **å°çµ**ï¼šC æª”æ¡ˆæ“ä½œæä¾›åº•å±¤æ§åˆ¶å’Œé«˜æ€§èƒ½ï¼Œä½†éœ€è¦ä»”ç´°çš„éŒ¯èª¤è™•ç†å’Œè³‡æºç®¡ç†ã€‚ç†è§£æª”æ¡ˆæ¨¡å¼ã€å®šä½å’ŒäºŒé€²ä½æ“ä½œå°ç³»çµ±ç¨‹å¼è¨­è¨ˆè‡³é—œé‡è¦ã€‚ 