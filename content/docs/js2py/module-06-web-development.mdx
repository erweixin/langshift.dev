---
title: "Python Web å¼€å‘ï¼šFastAPI æŒ‡å—"
description: "ä» JavaScript (Node.js/Express) å¼€å‘è€…è§†è§’ï¼Œæ·±å…¥å­¦ä¹  Python çš„ç°ä»£ Web æ¡†æ¶ FastAPIã€‚"
---

## 1. å¼•è¨€

### ä» Express åˆ° FastAPI

ä½œä¸ºä¸€å JavaScript å¼€å‘è€…ï¼Œä½ å¾ˆå¯èƒ½å¯¹ `Node.js` å’Œ `Express` éå¸¸ç†Ÿæ‚‰ã€‚å®ƒä»¬æ˜¯æ„å»ºå¿«é€Ÿã€å¯æ‰©å±•çš„ç½‘ç»œåº”ç”¨çš„å¼ºå¤§ç»„åˆã€‚å½“ä½ è½¬å‘ Python æ—¶ï¼Œä½ ä¼šå‘ç° `FastAPI` æ˜¯ä¸€ä¸ªéå¸¸ç›¸ä¼¼ä¸”åŒæ ·å¼ºå¤§çš„é€‰æ‹©ã€‚

`FastAPI` æ˜¯ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿï¼ˆé«˜æ€§èƒ½ï¼‰çš„ Web æ¡†æ¶ï¼Œç”¨äºæ„å»º APIã€‚å®ƒçš„è®¾è®¡çµæ„Ÿæ¥æºäº `Flask` å’Œ `Express`ï¼Œå¹¶å……åˆ†åˆ©ç”¨äº† Python çš„ç±»å‹æç¤ºå’Œå¼‚æ­¥åŠŸèƒ½ã€‚

**æ ¸å¿ƒæ¦‚å¿µç±»æ¯”**

| Python (FastAPI) | JavaScript (Express) | ä¸»è¦åŠŸèƒ½ |
| --- | --- | --- |
| **FastAPI** | `Express` | Web æ¡†æ¶æ ¸å¿ƒ |
| **Uvicorn/Hypercorn** | `node` / `pm2` | åº”ç”¨æœåŠ¡å™¨ |
| **Pydantic æ¨¡å‹** | Joi / Zod / æ‰‹åŠ¨éªŒè¯ | æ•°æ®éªŒè¯å’Œåºåˆ—åŒ– |
| **ä¾èµ–æ³¨å…¥** | ä¸­é—´ä»¶ / æœåŠ¡ç±» | ç®¡ç†ä¾èµ–å’Œå…±äº«é€»è¾‘ |
| **`async def`** | `async` å‡½æ•° | å¼‚æ­¥è¯·æ±‚å¤„ç† |

> ğŸ’¡ **å­¦ä¹ ç­–ç•¥**ï¼šå°† FastAPI è§†ä¸ºä¸€ä¸ªâ€œå¸¦ç±»å‹çš„ã€å¼‚æ­¥ä¼˜å…ˆçš„ Expressâ€ã€‚è®¸å¤šæ¦‚å¿µï¼Œå¦‚è·¯ç”±ã€è¯·æ±‚ã€å“åº”å’Œä¸­é—´ä»¶ï¼Œéƒ½ä¼šè®©ä½ æ„Ÿåˆ°éå¸¸ç†Ÿæ‚‰ã€‚

## 2. ç¬¬ä¸€ä¸ª FastAPI åº”ç”¨

è®©æˆ‘ä»¬ä»ä¸€ä¸ªç»å…¸çš„ "Hello, World!" ç¤ºä¾‹å¼€å§‹ï¼Œå¯¹æ¯” `FastAPI` å’Œ `Express` çš„åŸºæœ¬ç»“æ„ã€‚

<PythonEditor title="Hello, World: FastAPI vs. Express" compare={true}>
```javascript !! js
// JavaScript (Express)
// server.js
const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hello, World!');
});

app.listen(port, () => {
  console.log(`Server is running at http://localhost:${port}`);
});
```

```python !! py
# Python (FastAPI)
# main.py
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "Hello, World!"}

# è¿è¡ŒæœåŠ¡å™¨ (åœ¨å‘½ä»¤è¡Œä¸­):
# uvicorn main:app --reload
```
</PythonEditor>

## 3. è·¯ç”±ä¸è¯·æ±‚å¤„ç†

### 3.1 è·¯å¾„å‚æ•°

<PythonEditor title="è·¯å¾„å‚æ•°å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (Express)
app.get('/items/:itemId', (req, res) => {
  const itemId = req.params.itemId;
  res.json({ item_id: itemId });
});
```

```python !! py
# Python (FastAPI)
from fastapi import FastAPI

app = FastAPI()

@app.get("/items/{item_id}")
def read_item(item_id: int):
    return {"item_id": item_id}
```
</PythonEditor>

### 3.2 æŸ¥è¯¢å‚æ•°

<PythonEditor title="æŸ¥è¯¢å‚æ•°å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (Express)
app.get('/items', (req, res) => {
  const skip = req.query.skip || 0;
  const limit = req.query.limit || 10;
  res.json({ skip, limit });
});
```

```python !! py
# Python (FastAPI)
from fastapi import FastAPI

app = FastAPI()

@app.get("/items/")
def read_items(skip: int = 0, limit: int = 10):
    return {"skip": skip, "limit": limit}
```
</PythonEditor>

### 3.3 è¯·æ±‚ä½“

`FastAPI` ä½¿ç”¨ `Pydantic` æ¨¡å‹æ¥å®šä¹‰è¯·æ±‚ä½“ï¼Œè¿™ä½¿å¾—æ•°æ®éªŒè¯ã€åºåˆ—åŒ–å’Œæ–‡æ¡£ç”Ÿæˆå˜å¾—éå¸¸ç®€å•ã€‚

<PythonEditor title="è¯·æ±‚ä½“å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (Express)
app.use(express.json());

app.post('/items', (req, res) => {
  const { name, price } = req.body;
  // æ‰‹åŠ¨éªŒè¯
  if (!name || !price) {
    return res.status(400).json({ error: 'Missing name or price' });
  }
  res.json({ name, price });
});
```

```python !! py
# Python (FastAPI)
from fastapi import FastAPI
from pydantic import BaseModel

class Item(BaseModel):
    name: str
    price: float
    is_offer: bool | None = None

app = FastAPI()

@app.post("/items/")
def create_item(item: Item):
    return item
```
</PythonEditor>

## 4. æ•°æ®éªŒè¯ä¸ Pydantic

`Pydantic` æ˜¯ `FastAPI` çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ã€‚å®ƒæä¾›äº†å¼ºå¤§çš„æ•°æ®éªŒè¯åŠŸèƒ½ï¼Œç±»ä¼¼äº `TypeScript` çš„ç±»å‹ç³»ç»ŸåŠ ä¸Š `Zod` æˆ– `Joi` çš„è¿è¡Œæ—¶éªŒè¯ã€‚

<PythonEditor title="æ•°æ®éªŒè¯å¯¹æ¯”" compare={true}>
```typescript !! ts
// TypeScript (with Zod for runtime validation)
import { z } from 'zod';

const UserSchema = z.object({
  username: z.string().min(3),
  email: z.string().email(),
  age: z.number().optional(),
});

type User = z.infer<typeof UserSchema>;

function createUser(user: unknown): User {
  return UserSchema.parse(user);
}
```

```python !! py
# Python (with Pydantic)
from pydantic import BaseModel, Field, EmailStr

class User(BaseModel):
    username: str = Field(min_length=3)
    email: EmailStr
    age: int | None = None

def create_user(user_data: dict) -> User:
    return User(**user_data)
```
</PythonEditor>

## 5. ä¾èµ–æ³¨å…¥

`FastAPI` çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿéå¸¸å¼ºå¤§ï¼Œå¯ä»¥è½»æ¾åœ°ç®¡ç†æ•°æ®åº“è¿æ¥ã€è®¤è¯å’Œæˆæƒç­‰å…±äº«é€»è¾‘ã€‚

<PythonEditor title="ä¾èµ–æ³¨å…¥å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (Express middleware)
function getDb(req, res, next) {
  req.db = new Database();
  next();
}

function requireAuth(req, res, next) {
  if (!req.headers.authorization) {
    return res.status(401).send('Unauthorized');
  }
  req.user = getUserFromToken(req.headers.authorization);
  next();
}

app.get('/profile', getDb, requireAuth, (req, res) => {
  res.json({ user: req.user });
});
```

```python !! py
# Python (FastAPI dependencies)
from fastapi import Depends, FastAPI, HTTPException, status

app = FastAPI()

class Database:
    def __init__(self): ...

def get_db():
    db = Database()
    try:
        yield db
    finally:
        # close db connection
        pass

async def get_current_user(token: str = Depends(oauth2_scheme)):
    # ... (logic to get user from token)
    return user

@app.get("/profile")
async def read_profile(current_user: User = Depends(get_current_user), db: Database = Depends(get_db)):
    return {"user": current_user}
```
</PythonEditor>

## 6. å¼‚æ­¥æ”¯æŒ

`FastAPI` æ˜¯ä¸€ä¸ªå¼‚æ­¥ä¼˜å…ˆçš„æ¡†æ¶ï¼Œå¯ä»¥è½»æ¾åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œå¦‚æ•°æ®åº“æŸ¥è¯¢ã€API è°ƒç”¨ç­‰ã€‚

<PythonEditor title="å¼‚æ­¥å¤„ç†å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (Express)
app.get('/data', async (req, res) => {
  try {
    const data = await fetch('https://api.example.com/data').then(r => r.json());
    res.json(data);
  } catch (error) {
    res.status(500).json({ error: 'Failed to fetch data' });
  }
});
```

```python !! py
# Python (FastAPI)
import httpx
from fastapi import FastAPI

app = FastAPI()

@app.get("/data")
async def get_data():
    async with httpx.AsyncClient() as client:
        response = await client.get("https://api.example.com/data")
        response.raise_for_status()
        return response.json()
```
</PythonEditor>

## 7. æ€»ç»“

`FastAPI` ä¸ºä» `JavaScript/Express` èƒŒæ™¯è¿‡æ¸¡è€Œæ¥çš„ Python å¼€å‘è€…æä¾›äº†ä¸€ä¸ªç†Ÿæ‚‰è€Œå¼ºå¤§çš„ Web å¼€å‘ä½“éªŒã€‚é€šè¿‡åˆ©ç”¨ç±»å‹æç¤ºã€å¼‚æ­¥å’Œä¾èµ–æ³¨å…¥ï¼Œ`FastAPI` å¯ä»¥å¸®åŠ©ä½ æ„å»ºå¥å£®ã€é«˜æ€§èƒ½çš„ APIã€‚

ç°åœ¨ä½ å·²ç»æŒæ¡äº† `FastAPI` çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥å¼€å§‹æ„å»ºè‡ªå·±çš„ Python Web åº”ç”¨äº†ï¼
