---
title: "æ¨¡å— 11: ç¼–å†™ Pythonic ä»£ç "
description: "å­¦ä¹ å¦‚ä½•ç¼–å†™åœ°é“ã€ä¼˜é›…ä¸”é«˜æ•ˆçš„ Python ä»£ç ï¼ŒçœŸæ­£åƒä¸€ä¸ª Python å¼€å‘è€…ä¸€æ ·æ€è€ƒã€‚"
---

## 1. å¼•è¨€

æ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é£æ ¼å’Œå“²å­¦ã€‚â€œPythonicâ€è¿™ä¸ªè¯ç”¨æ¥æè¿°é‚£äº›éµå¾ª Python ç¤¾åŒºå…¬è®¤çš„æœ€ä½³å®è·µã€å……åˆ†åˆ©ç”¨è¯­è¨€ç‰¹æ€§ã€ä»£ç ç®€æ´æ˜“è¯»ä¸”é«˜æ•ˆçš„ä»£ç é£æ ¼ã€‚

å¯¹äºä» JavaScript è¿‡æ¥çš„å¼€å‘è€…æ¥è¯´ï¼Œä»…ä»…æŒæ¡è¯­æ³•æ˜¯ä¸å¤Ÿçš„ã€‚å­¦ä¹ ç¼–å†™ Pythonic ä»£ç ï¼Œæ„å‘³ç€è¦å¼€å§‹ç”¨â€œPython çš„æ–¹å¼â€å»æ€è€ƒå’Œè§£å†³é—®é¢˜ã€‚

> ğŸ’¡ **å­¦ä¹ ç­–ç•¥**ï¼šå°†ç¼–å†™ Pythonic ä»£ç çœ‹ä½œæ˜¯å­¦ä¹ ä¸€é—¨è¯­è¨€çš„â€œä¹ è¯­â€å’Œâ€œä¿šè¯­â€ã€‚å®ƒèƒ½è®©ä½ çš„ä»£ç æ›´å—ç¤¾åŒºæ¬¢è¿ï¼Œä¹Ÿæ›´æ˜“äºä»–äººç†è§£å’Œç»´æŠ¤ã€‚

## 2. åˆ—è¡¨æ¨å¯¼å¼ (List Comprehensions)

åˆ—è¡¨æ¨å¯¼å¼æ˜¯ Python ä¸­æœ€å…·ä»£è¡¨æ€§çš„ç‰¹æ€§ä¹‹ä¸€ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€æ´ä¼˜é›…çš„æ–¹å¼æ¥æ ¹æ®ç°æœ‰åˆ—è¡¨åˆ›å»ºæ–°åˆ—è¡¨ï¼Œé€šå¸¸æ¯”ä½¿ç”¨ `map()` å’Œ `filter()` æ›´å…·å¯è¯»æ€§ã€‚

<PythonEditor title="åˆ—è¡¨æ¨å¯¼å¼ vs. map/filter" compare={true}>
```javascript !! js
// JavaScript (map and filter)
const numbers = [1, 2, 3, 4, 5];

// è·å–æ‰€æœ‰æ•°å­—çš„å¹³æ–¹
const squares = numbers.map(n => n * n);

// è·å–æ‰€æœ‰å¶æ•°çš„å¹³æ–¹
const evenSquares = numbers
  .filter(n => n % 2 === 0)
  .map(n => n * n);
```

```python !! py
# Python (List Comprehensions)
numbers = [1, 2, 3, 4, 5]

# è·å–æ‰€æœ‰æ•°å­—çš„å¹³æ–¹ (Pythonic)
squares = [n * n for n in numbers]

# è·å–æ‰€æœ‰å¶æ•°çš„å¹³æ–¹ (Pythonic)
even_squares = [n * n for n in numbers if n % 2 == 0]

# é Pythonic çš„æ–¹å¼
even_squares_long = list(map(lambda n: n * n, filter(lambda n: n % 2 == 0, numbers)))
```
</PythonEditor>

## 3. EAFP vs LBYL

è¿™æ˜¯ä¸¤ç§ä¸åŒçš„ç¼–ç¨‹é£æ ¼ï¼ŒPython ç¤¾åŒºæ™®éæ¨å´‡ EAFPã€‚

*   **LBYL (Look Before You Leap)**: â€œä¸‰æ€è€Œåè¡Œâ€ã€‚åœ¨æ‰§è¡Œæ“ä½œå‰ï¼Œå…ˆè¿›è¡Œå„ç§æ£€æŸ¥ã€‚è¿™åœ¨ JavaScript ä¸­å¾ˆå¸¸è§ã€‚
*   **EAFP (Easier to Ask for Forgiveness than Permission)**: â€œå…ˆæ–©åå¥â€ã€‚ç›´æ¥å°è¯•æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼ˆå¼‚å¸¸ï¼‰ï¼Œå†è¿›è¡Œå¤„ç†ã€‚

<PythonEditor title="EAFP vs. LBYL å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (LBYL é£æ ¼)
const user = { profile: { name: 'Alice' } };

if (user && user.profile && user.profile.name) {
  console.log(user.profile.name);
} else {
  console.log('Name not found');
}

// ä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦ ?. æ›´ç®€æ´
console.log(user?.profile?.name || 'Name not found');
```

```python !! py
# Python (EAFP é£æ ¼ - Pythonic)
user = {"profile": {"name": "Alice"}}

try:
    print(user["profile"]["name"])
except (KeyError, TypeError):
    print("Name not found")

# Python (LBYL é£æ ¼ - ä¸é‚£ä¹ˆ Pythonic)
if "profile" in user and isinstance(user["profile"], dict) and "name" in user["profile"]:
    print(user["profile"]["name"])
else:
    print("Name not found")
```
</PythonEditor>

## 4. ä½¿ç”¨ `enumerate` è¿›è¡Œè¿­ä»£

å½“ä½ åœ¨å¾ªç¯ä¸­åŒæ—¶éœ€è¦ç´¢å¼•å’Œå€¼æ—¶ï¼Œä¸è¦ä½¿ç”¨ `range(len(my_list))`ã€‚Pythonic çš„æ–¹å¼æ˜¯ä½¿ç”¨å†…ç½®å‡½æ•° `enumerate`ã€‚

<PythonEditor title="enumerate vs. range(len(...))" compare={true}>
```javascript !! js
// JavaScript
const items = ['a', 'b', 'c'];

items.forEach((item, index) => {
  console.log(`Index: ${index}, Item: ${item}`);
});
```

```python !! py
# Python (Pythonic)
items = ['a', 'b', 'c']

for index, item in enumerate(items):
    print(f"Index: {index}, Item: {item}")

# Python (ä¸é‚£ä¹ˆ Pythonic)
for i in range(len(items)):
    print(f"Index: {i}, Item: {items[i]}")
```
</PythonEditor>

## 5. è§£åŒ… (Unpacking)

Python å…è®¸ä½ å°†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨æˆ–å…ƒç»„ï¼‰çš„å…ƒç´ â€œè§£åŒ…â€åˆ°å¤šä¸ªå˜é‡ä¸­ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€‚

<PythonEditor title="è§£åŒ… vs. æ‰‹åŠ¨èµ‹å€¼" compare={true}>
```javascript !! js
// JavaScript (è§£æ„èµ‹å€¼)
const point = [10, 20, 30];
const [x, y, z] = point;

const [first, ...rest] = [1, 2, 3, 4];
// first = 1, rest = [2, 3, 4]
```

```python !! py
# Python (è§£åŒ…)
point = (10, 20, 30)
x, y, z = point

# æ˜Ÿå·è¡¨è¾¾å¼ (ç±»ä¼¼ JS çš„ rest)
first, *rest, last = [1, 2, 3, 4, 5]
# first = 1, rest = [2, 3, 4], last = 5
```
</PythonEditor>

## 6. ä½¿ç”¨ `with` è¯­å¥ç®¡ç†èµ„æº

æ­£å¦‚åœ¨â€œå¸¸è§é™·é˜±â€æ¨¡å—ä¸­æåˆ°çš„ï¼Œä½¿ç”¨ `with` è¯­å¥ï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼‰æ˜¯å¤„ç†éœ€è¦æ˜¾å¼å…³é—­çš„èµ„æºï¼ˆå¦‚æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ï¼‰çš„æœ€ Pythonic çš„æ–¹å¼ã€‚å®ƒèƒ½ç¡®ä¿èµ„æºå³ä½¿åœ¨å‘ç”Ÿé”™è¯¯æ—¶ä¹Ÿèƒ½è¢«æ­£ç¡®é‡Šæ”¾ã€‚

<PythonEditor title="with è¯­å¥ vs. try...finally" compare={true}>
```javascript !! js
// JavaScript (æ²¡æœ‰ç›´æ¥å¯¹åº”ç‰©ï¼Œé€šå¸¸ç”¨ try...finally)
let resource;
try {
  resource = acquireResource();
  // use resource
} finally {
  if (resource) {
    releaseResource(resource);
  }
}
```

```python !! py
# Python (Pythonic)
with open("my_file.txt", "r") as f:
    content = f.read()
    # æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œå³ä½¿åœ¨è¯»å–æ—¶å‘ç”Ÿé”™è¯¯

# Python (ä¸é‚£ä¹ˆ Pythonic)
f = open("my_file.txt", "r")
try:
    content = f.read()
finally:
    f.close()
```
</PythonEditor>

## 7. æ€»ç»“

ç¼–å†™ Pythonic ä»£ç æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œå®ƒå…³ä¹äºä»£ç çš„å¯è¯»æ€§ã€ç®€æ´æ€§å’Œæ•ˆç‡ã€‚å½“ä½ å¼€å§‹è‡ªç„¶åœ°ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ã€`enumerate` å’Œ `with` è¯­å¥æ—¶ï¼Œä½ å°±çœŸæ­£èµ°ä¸Šäº†æˆä¸ºä¸€ååœ°é“ Python å¼€å‘è€…çš„é“è·¯ã€‚

**æ ¸å¿ƒåŸåˆ™**ï¼šä»£ç é¦–å…ˆæ˜¯å†™ç»™äººçœ‹çš„ï¼Œå…¶æ¬¡æ‰æ˜¯ç»™æœºå™¨æ‰§è¡Œçš„ã€‚Pythonic çš„ä»£ç æ­£æ˜¯è¿™ä¸€åŸåˆ™çš„æœ€ä½³ä½“ç°ã€‚
