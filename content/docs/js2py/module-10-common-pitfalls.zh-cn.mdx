---
title: "æ¨¡å— 10: å¸¸è§é™·é˜±"
description: "ä» JavaScript å¼€å‘è€…è§†è§’ï¼Œè§£æ Python ä¸­å¸¸è§çš„æ¦‚å¿µé™·é˜±å’Œæ˜“é”™ç‚¹ã€‚"
---

## 1. å¼•è¨€

å½“ä½ ä»ä¸€ç§è¯­è¨€åˆ‡æ¢åˆ°å¦ä¸€ç§æ—¶ï¼Œæœ€æ£˜æ‰‹çš„å¾€å¾€ä¸æ˜¯æ–°è¯­æ³•ï¼Œè€Œæ˜¯ä¸€äº›çœ‹ä¼¼ç›¸åŒä½†è¡Œä¸ºå´æˆªç„¶ä¸åŒçš„â€œé™·é˜±â€ã€‚è¿™äº›ç»†å¾®çš„å·®å¼‚å¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„ bug å’Œå›°æƒ‘ã€‚

æœ¬æ¨¡å—ä¸“é—¨ä¸ºä½ â€”â€”ä» JavaScript è¿‡æ¸¡åˆ° Python çš„å¼€å‘è€…â€”â€”æ¢³ç†äº†ä¸€äº›æœ€å¸¸è§çš„æ¦‚å¿µé™·é˜±ã€‚

> ğŸ’¡ **å­¦ä¹ ç­–ç•¥**ï¼šä¸è¦æ­»è®°ç¡¬èƒŒã€‚ç†è§£æ¯ä¸ªé™·é˜±èƒŒåçš„â€œä¸ºä»€ä¹ˆâ€ï¼Œå¹¶å°†å…¶ä¸ JavaScript çš„è¡Œä¸ºè¿›è¡Œå¯¹æ¯”ï¼Œè¿™æ ·ä½ æ‰èƒ½åœ¨å®é™…ç¼–ç ä¸­è‡ªç„¶è€Œç„¶åœ°é¿å¼€å®ƒä»¬ã€‚

## 2. çœŸå€¼ (Truthy) ä¸å‡å€¼ (Falsy)

åœ¨ Python ä¸­ï¼Œç©ºçš„é›†åˆç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ï¼‰è¢«è®¤ä¸ºæ˜¯â€œå‡å€¼â€(Falsy)ã€‚è¿™ä¸ JavaScript çš„è¡Œä¸ºæœ‰æ˜¾è‘—ä¸åŒï¼Œåœ¨ JS ä¸­ï¼Œç©ºæ•°ç»„ `[]` å’Œç©ºå¯¹è±¡ `{}` éƒ½æ˜¯â€œçœŸå€¼â€(Truthy)ã€‚

<PythonEditor title="çœŸå€¼ä¸å‡å€¼å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript
if ([]) {
  console.log("ç©ºæ•°ç»„åœ¨ JS ä¸­æ˜¯ truthy"); // ä¼šè¢«æ‰“å°
}

if ({}) {
  console.log("ç©ºå¯¹è±¡åœ¨ JS ä¸­æ˜¯ truthy"); // ä¼šè¢«æ‰“å°
}

if ("") {
  console.log("ç©ºå­—ç¬¦ä¸²æ˜¯ falsy"); // ä¸ä¼šè¢«æ‰“å°
}

if (0) {
  console.log("0 æ˜¯ falsy"); // ä¸ä¼šè¢«æ‰“å°
}
```

```python !! py
# Python
if []:
    print("ç©ºåˆ—è¡¨åœ¨ Python ä¸­æ˜¯ Falsy")  # ä¸ä¼šè¢«æ‰“å°
else:
    print("ç©ºåˆ—è¡¨ä¸ºå‡")

if {}:
    print("ç©ºå­—å…¸åœ¨ Python ä¸­æ˜¯ Falsy")  # ä¸ä¼šè¢«æ‰“å°
else:
    print("ç©ºå­—å…¸ä¸ºå‡")

if "":
    print("ç©ºå­—ç¬¦ä¸²æ˜¯ Falsy")  # ä¸ä¼šè¢«æ‰“å°
else:
    print("ç©ºå­—ç¬¦ä¸²ä¸ºå‡")

if 0:
    print("0 æ˜¯ Falsy")  # ä¸ä¼šè¢«æ‰“å°
else:
    print("0 ä¸ºå‡")
```
</PythonEditor>

## 3. `this` vs `self`

åœ¨ JavaScript çš„ç±»æ–¹æ³•ä¸­ï¼Œ`this` æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå…¶æŒ‡å‘åœ¨å‡½æ•°è°ƒç”¨æ—¶ç¡®å®šã€‚è€Œåœ¨ Python çš„å®ä¾‹æ–¹æ³•ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæŒ‰ç…§æƒ¯ä¾‹å‘½åä¸º `self`ï¼‰æ˜¾å¼åœ°ä»£è¡¨å®ä¾‹æœ¬èº«ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ã€‚

<PythonEditor title="this vs. self å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript
class Counter {
  constructor() {
    this.count = 0;
  }

  increment() {
    this.count++;
    console.log(this.count);
  }
}

const counter = new Counter();
counter.increment(); // 1
```

```python !! py
# Python
class Counter:
    def __init__(self):
        self.count = 0

    def increment(self):  # `self` å¿…é¡»ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ˜¾å¼ä¼ é€’
        self.count += 1
        print(self.count)

counter = Counter()
counter.increment()  # 1
```
</PythonEditor>

## 4. å˜é‡ä½œç”¨åŸŸ

JavaScript (ES6+) æ‹¥æœ‰å—çº§ä½œç”¨åŸŸï¼ˆç”± `{}` ç•Œå®šï¼‰ï¼Œè€Œ Python çš„ä½œç”¨åŸŸæ˜¯åŸºäºå‡½æ•°ï¼ˆæˆ–ç±»ã€æ¨¡å—ï¼‰çš„ã€‚åœ¨ `for` å¾ªç¯ç­‰ä»£ç å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåœ¨ Python ä¸­ä¼šâ€œæ³„æ¼â€åˆ°å¤–éƒ¨ä½œç”¨åŸŸã€‚

<PythonEditor title="ä½œç”¨åŸŸå¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript (å—çº§ä½œç”¨åŸŸ)
for (let i = 0; i < 3; i++) {
  console.log(i);
}
// console.log(i); // ReferenceError: i is not defined

if (true) {
  const blockVar = 'hello';
}
// console.log(blockVar); // ReferenceError: blockVar is not defined
```

```python !! py
# Python (å‡½æ•°çº§ä½œç”¨åŸŸ)
for i in range(3):
    print(i)

print(f"å¾ªç¯ç»“æŸåï¼Œi ä»ç„¶å­˜åœ¨: {i}") # è¾“å‡º: å¾ªç¯ç»“æŸåï¼Œi ä»ç„¶å­˜åœ¨: 2

if True:
    block_var = 'hello'

print(f"if å—ç»“æŸåï¼Œå˜é‡ä»ç„¶å­˜åœ¨: {block_var}") # è¾“å‡º: if å—ç»“æŸåï¼Œå˜é‡ä»ç„¶å­˜åœ¨: hello
```
</PythonEditor>

## 5. å¯å˜é»˜è®¤å‚æ•°

è¿™æ˜¯ä¸€ä¸ª Python ä¸­éå¸¸ç»å…¸ä¸”è‡­åæ˜­è‘—çš„â€œé™·é˜±â€ã€‚å¦‚æœå‡½æ•°çš„é»˜è®¤å‚æ•°æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨æˆ–å­—å…¸ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šåœ¨æ‰€æœ‰è°ƒç”¨ä¹‹é—´å…±äº«ã€‚è¿™ä¸ JavaScript çš„è¡Œä¸ºå®Œå…¨ä¸åŒã€‚

<PythonEditor title="å¯å˜é»˜è®¤å‚æ•°å¯¹æ¯”" compare={true}>
```javascript !! js
// JavaScript
function append(item, arr = []) {
  arr.push(item);
  return arr;
}

console.log(append(1)); // [1]
console.log(append(2)); // [2] (æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„)
```

```python !! py
# Python (é”™è¯¯çš„æ–¹å¼)
def append_bad(item, arr=[]):
    arr.append(item)
    return arr

print(append_bad(1))  # [1]
print(append_bad(2))  # [1, 2] (åˆ—è¡¨è¢«æ‰€æœ‰è°ƒç”¨å…±äº«ï¼)

# æ­£ç¡®çš„æ–¹å¼
def append_good(item, arr=None):
    if arr is None:
        arr = []
    arr.append(item)
    return arr

print(append_good(1)) # [1]
print(append_good(2)) # [2]
```
</PythonEditor>

## 6. `null`/`undefined` vs `None`

JavaScript ä¸­æœ‰ä¸¤ä¸ªè¡¨ç¤ºâ€œæ— â€çš„å€¼ï¼š`null`ï¼ˆè¡¨ç¤ºâ€œæœ‰æ„è®¾ç½®çš„ç©ºå€¼â€ï¼‰å’Œ `undefined`ï¼ˆè¡¨ç¤ºâ€œæœªå®šä¹‰â€ï¼‰ã€‚åœ¨ Python ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå¯¹åº”çš„æ¦‚å¿µï¼š`None`ã€‚

<PythonEditor title="null/undefined vs. None" compare={true}>
```javascript !! js
// JavaScript
let a; // undefined
let b = null; // null

function greet(name) {
  // å¦‚æœä¸ä¼ å‚æ•°ï¼Œname æ˜¯ undefined
  console.log(name);
}
```

```python !! py
# Python
a = None  # åªæœ‰ None

def greet(name=None):
    # é€šå¸¸ä½¿ç”¨ None ä½œä¸ºé»˜è®¤å€¼
    print(name)

# æ£€æŸ¥æ˜¯å¦ä¸º None
if a is None:
    print("a is None")
```
</PythonEditor>


## 7. å¾ªç¯å˜é‡æ•è· (Loop Variable Capture)

è¿™æ˜¯ Python ä½œç”¨åŸŸè§„åˆ™çš„ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå¸¸å‘ç”Ÿåœ¨é—­åŒ…æˆ– lambda å‡½æ•°ä¸­ã€‚

<PythonEditor title="å¾ªç¯å˜é‡æ•è·" compare={true}>
```javascript !! js
// JavaScript (ES6 let)
const funcs = [];
for (let i = 0; i < 3; i++) {
    funcs.push(() => console.log(i));
}

funcs[0](); // 0
funcs[1](); // 1
funcs[2](); // 2
// å› ä¸º let å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç»‘å®š
```

```python !! py
# Python
funcs = []
for i in range(3):
    funcs.append(lambda: print(i))

funcs[0]()  # 2
funcs[1]()  # 2
funcs[2]()  # 2
# ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º lambda å‡½æ•°æ•è·çš„æ˜¯å˜é‡ i çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å€¼ã€‚
# å½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå¾ªç¯å·²ç»ç»“æŸï¼Œi çš„å€¼æ˜¯ 2ã€‚

# ä¿®å¤æ–¹æ³•ï¼šä½¿ç”¨é»˜è®¤å‚æ•°ç»‘å®šå½“å‰å€¼
funcs_fixed = []
for i in range(3):
    funcs_fixed.append(lambda x=i: print(x))

funcs_fixed[0]()  # 0
funcs_fixed[1]()  # 1
funcs_fixed[2]()  # 2
```
</PythonEditor>

## 8. èµ‹å€¼ vs æ‹·è´ (Assignment vs Copying)

åœ¨ Python ä¸­ï¼Œèµ‹å€¼è¯­å¥ (`=`) æ°¸è¿œä¸ä¼šå¤åˆ¶å¯¹è±¡ï¼Œå®ƒåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ã€‚è¿™ä¸ JavaScript çš„å¯¹è±¡èµ‹å€¼è¡Œä¸ºä¸€è‡´ï¼Œä½†å¯¹äºä¹ æƒ¯äº†æŸäº› C++ è¡Œä¸ºçš„å¼€å‘è€…æ¥è¯´å¯èƒ½æ˜¯ä¸ªé™·é˜±ã€‚

<PythonEditor title="èµ‹å€¼ vs æ‹·è´" compare={true}>
```javascript !! js
// JavaScript
const list1 = [1, 2, 3];
const list2 = list1; // å¼•ç”¨èµ‹å€¼

list2.push(4);
console.log(list1); // [1, 2, 3, 4] (ä¹Ÿè¢«ä¿®æ”¹äº†)

// æµ…æ‹·è´
const list3 = [...list1];
list3.push(5);
console.log(list1); // [1, 2, 3, 4] (ä¸å—å½±å“)
```

```python !! py
# Python
list1 = [1, 2, 3]
list2 = list1  # å¼•ç”¨èµ‹å€¼

list2.append(4)
print(list1)  # [1, 2, 3, 4] (ä¹Ÿè¢«ä¿®æ”¹äº†)

# æµ…æ‹·è´
list3 = list1.copy()  # æˆ– list1[:]
list3.append(5)
print(list1)  # [1, 2, 3, 4] (ä¸å—å½±å“)

# æ·±æ‹·è´ (å¯¹äºåµŒå¥—å¯¹è±¡)
import copy
nested1 = [[1, 2], [3, 4]]
nested2 = copy.deepcopy(nested1)
nested2[0][0] = 999
print(nested1[0][0])  # 1 (ä¸å—å½±å“)
```
</PythonEditor>

## 8. æ€»ç»“


ç†è§£å¹¶æŒæ¡è¿™äº›å·®å¼‚ï¼Œå°†å¸®åŠ©ä½ æ›´å¿«åœ°å†™å‡ºå¥å£®ã€æ— æ„å¤–çš„ Python ä»£ç ã€‚å½“ä½ é‡åˆ°æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºæ—¶ï¼Œä¸å¦¨å›è¿‡å¤´æ¥çœ‹çœ‹è¿™ä¸ªåˆ—è¡¨ï¼Œæ£€æŸ¥æ˜¯å¦è¸©ä¸­äº†å…¶ä¸­çš„æŸä¸ªâ€œé™·é˜±â€ã€‚
