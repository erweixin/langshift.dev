---
title: "å‹åˆ¥ç³»çµ±èˆ‡ç‰¹å¾µ"
description: "å­¸ç¿’ Rust çš„éœæ…‹å‹åˆ¥ç³»çµ±ã€ç‰¹å¾µï¼ˆTraitsï¼‰å’Œæ³›å‹ï¼Œå°æ¯” JavaScript çš„å‹•æ…‹å‹åˆ¥ç³»çµ±"
---

# å‹åˆ¥ç³»çµ±èˆ‡ç‰¹å¾µ

## ğŸ“– å­¸ç¿’ç›®æ¨™

ç†è§£ Rust çš„éœæ…‹å‹åˆ¥ç³»çµ±å’Œç‰¹å¾µç³»çµ±ï¼Œå­¸æœƒä½¿ç”¨æ³›å‹å’Œç‰¹å¾µç´„æŸï¼Œå°æ¯” JavaScript çš„å‹•æ…‹å‹åˆ¥ç³»çµ±ã€‚

---

## ğŸ¯ å‹åˆ¥ç³»çµ±å°æ¯”

### JavaScript çš„å‹•æ…‹å‹åˆ¥

JavaScript æ˜¯å‹•æ…‹å‹åˆ¥èªè¨€ï¼Œå‹åˆ¥åœ¨åŸ·è¡Œæ™‚ç¢ºå®šï¼š

<UniversalEditor title="JavaScript å‹•æ…‹å‹åˆ¥" compare={true}>
```javascript !! js
// JavaScript å‹•æ…‹å‹åˆ¥ç¯„ä¾‹
function add(a, b) {
    return a + b;
}

// å¯ä»¥å‚³éä»»ä½•å‹åˆ¥çš„åƒæ•¸
console.log(add(5, 3));        // 8 (æ•¸å­—)
console.log(add("Hello", " World")); // "Hello World" (å­—ä¸²)
console.log(add(5, "3"));      // "53" (å­—ä¸²æ‹¼æ¥)
console.log(add([1, 2], [3, 4])); // "1,23,4" (é™£åˆ—è½‰å­—ä¸²)

// åŸ·è¡Œæ™‚å‹åˆ¥æª¢æŸ¥
function processData(data) {
    if (typeof data === 'number') {
        return data * 2;
    } else if (typeof data === 'string') {
        return data.toUpperCase();
    } else if (Array.isArray(data)) {
        return data.length;
    } else {
        return "æœªçŸ¥å‹åˆ¥";
    }
}

console.log(processData(10));      // 20
console.log(processData("hello")); // "HELLO"
console.log(processData([1, 2, 3])); // 3

// å‹åˆ¥è½‰æ›
let value = "42";
let number = parseInt(value); // é¡¯å¼è½‰æ›
let result = value * 1;       // éš±å¼è½‰æ›
console.log(typeof number, number); // "number" 42
console.log(typeof result, result); // "number" 42

// å‹•æ…‹å±¬æ€§
let obj = {};
obj.name = "Rust";           // å‹•æ…‹æ–°å¢å±¬æ€§
obj.age = 25;
obj.sayHello = function() {  // å‹•æ…‹æ–°å¢æ–¹æ³•
    return `Hello, I'm ${this.name}`;
};

console.log(obj.sayHello()); // "Hello, I'm Rust"
```
</UniversalEditor>

### Rust çš„éœæ…‹å‹åˆ¥

Rust æ˜¯éœæ…‹å‹åˆ¥èªè¨€ï¼Œå‹åˆ¥åœ¨ç·¨è­¯æ™‚ç¢ºå®šï¼š

<UniversalEditor title="Rust éœæ…‹å‹åˆ¥" compare={true}>
```rust !! rs
// Rust éœæ…‹å‹åˆ¥ç¯„ä¾‹
fn add(a: i32, b: i32) -> i32 {
    a + b
}

// åªèƒ½å‚³éæŒ‡å®šå‹åˆ¥çš„åƒæ•¸
fn main_add() {
    println!("{}", add(5, 3)); // 8
}

// é€™äº›æœƒå°è‡´ç·¨è­¯éŒ¯èª¤ï¼š
// println!("{}", add("Hello", "World")); // éŒ¯èª¤ï¼šå‹åˆ¥ä¸ç¬¦
// println!("{}", add(5, "3")); // éŒ¯èª¤ï¼šå‹åˆ¥ä¸ç¬¦

// ä½¿ç”¨æ³›å‹è™•ç†ä¸åŒå‹åˆ¥
fn process_data<T>(data: T) -> String 
where
    T: std::fmt::Display,
{
    format!("è™•ç†å¾Œçš„è³‡æ–™: {}", data)
}

// æˆ–ä½¿ç”¨ç‰¹å¾µç‰©ä»¶
trait Processable {
    fn process(&self) -> String;
}

impl Processable for i32 {
    fn process(&self) -> String {
        format!("æ•¸å­—: {}", self * 2)
    }
}

impl Processable for String {
    fn process(&self) -> String {
        format!("å­—ä¸²: {}", self.to_uppercase())
    }
}

impl Processable for Vec<i32> {
    fn process(&self) -> String {
        format!("é™£åˆ—é•·åº¦: {}", self.len())
    }
}

fn process_with_trait(data: &dyn Processable) -> String {
    data.process()
}

// å‹åˆ¥è½‰æ›
fn type_conversion() {
    let value = "42";
    let number: i32 = value.parse().unwrap(); // é¡¯å¼è½‰æ›
    println!("è½‰æ›å¾Œçš„æ•¸å­—: {}", number);
    
    // ä½¿ç”¨ as é€²è¡Œå‹åˆ¥è½‰æ›
    let float: f64 = 42.0;
    let integer: i32 = float as i32;
    println!("æµ®é»æ•¸è½‰æ•´æ•¸: {}", integer);
}

// çµæ§‹é«”å®šç¾©
struct User {
    name: String,
    age: u32,
}

impl User {
    fn new(name: String, age: u32) -> Self {
        User { name, age }
    }
    
    fn say_hello(&self) -> String {
        format!("Hello, I'm {}", self.name)
    }
}

fn main() {
    main_add();

    // æ³¨æ„ï¼šVec<i32> æœªç›´æ¥å¯¦ä½œ Display
    // éœ€è¦è‡ªè¨‚å¯¦ä½œæ‰èƒ½èˆ‡ process_data ä¸€èµ·ä½¿ç”¨
    println!("{}", process_data(10));
    println!("{}", process_data("hello".to_string()));
    
    // ä½¿ç”¨ç‰¹å¾µç‰©ä»¶
    println!("{}", process_with_trait(&42));
    println!("{}", process_with_trait(&"hello".to_string()));
    println!("{}", process_with_trait(&vec![1, 2, 3]));
    
    type_conversion();
    
    // ä½¿ç”¨çµæ§‹é«”
    let user = User::new("Rust".to_string(), 25);
    println!("{}", user.say_hello());
}
```
</UniversalEditor>

### å‹åˆ¥ç³»çµ±å·®ç•°

1.  **éœæ…‹ vs å‹•æ…‹**: Rust ç·¨è­¯æ™‚æª¢æŸ¥å‹åˆ¥ï¼ŒJavaScript åŸ·è¡Œæ™‚æª¢æŸ¥
2.  **å‹åˆ¥å®‰å…¨**: Rust é˜²æ­¢å‹åˆ¥éŒ¯èª¤ï¼ŒJavaScript å…è¨±å‹åˆ¥è½‰æ›
3.  **æ•ˆèƒ½**: Rust é›¶æˆæœ¬æŠ½è±¡ï¼ŒJavaScript æœ‰åŸ·è¡Œæ™‚é–‹éŠ·
4.  **é–‹ç™¼é«”é©—**: Rust ç·¨è­¯æ™‚éŒ¯èª¤æç¤ºï¼ŒJavaScript åŸ·è¡Œæ™‚éŒ¯èª¤

---

## ğŸ”§ ç‰¹å¾µï¼ˆTraitsï¼‰ç³»çµ±

### ç‰¹å¾µå®šç¾©èˆ‡å¯¦ä½œ

<UniversalEditor title="ç‰¹å¾µç³»çµ±" compare={true}>
```rust !! rs
// å®šç¾©ç‰¹å¾µï¼ˆé¡ä¼¼å…¶ä»–èªè¨€çš„ä»‹é¢æ¦‚å¿µï¼‰
trait Printable {
    fn print(&self);
    fn get_description(&self) -> String {
        String::from("é è¨­æè¿°") // é è¨­å¯¦ä½œ
    }
}

// ç‚ºä¸åŒå‹åˆ¥å¯¦ä½œç‰¹å¾µ
struct Book {
    title: String,
    author: String,
    pages: u32,
}

impl Printable for Book {
    fn print(&self) {
        println!("æ›¸å: {}, ä½œè€…: {}, é æ•¸: {}", 
                 self.title, self.author, self.pages);
    }
    
    fn get_description(&self) -> String {
        format!("ã€Š{}ã€‹ç”±{}ç·¨å¯«ï¼Œå…±{}é ", 
                self.title, self.author, self.pages)
    }
}

struct Movie {
    title: String,
    director: String,
    duration: u32,
}

impl Printable for Movie {
    fn print(&self) {
        println!("é›»å½±: {}, å°æ¼”: {}, æ™‚é•·: {}åˆ†é˜", 
                 self.title, self.director, self.duration);
    }
}

// ä½¿ç”¨ç‰¹å¾µç´„æŸ
fn print_item<T: Printable>(item: &T) {
    item.print();
    println!("æè¿°: {}", item.get_description());
}

// ç‰¹å¾µä½œç‚ºåƒæ•¸
fn print_multiple_items(items: &[&dyn Printable]) {
    for item in items {
        item.print();
    }
}

// ç‰¹å¾µä½œç‚ºå‚³å›å€¼
fn create_printable(is_book: bool) -> Box<dyn Printable> {
    if is_book {
        Box::new(Book {
            title: String::from("Rust ç¨‹å¼è¨­è¨ˆ"),
            author: String::from("Steve Klabnik"),
            pages: 500,
        })
    } else {
        Box::new(Movie {
            title: String::from("Rust ç´€éŒ„ç‰‡"),
            director: String::from("Graydon Hoare"),
            duration: 120,
        })
    }
}

fn main() {
    let book = Book {
        title: "Rust for Rustaceans".into(),
        author: "Jon Gjengset".into(),
        pages: 400,
    };
    
    let movie = Movie {
        title: "Crab-ivating Adventures".into(),
        director: "Ferris".into(),
        duration: 90,
    };
    
    print_item(&book);
    print_item(&movie);
    
    let items: Vec<&dyn Printable> = vec![&book, &movie];
    print_multiple_items(&items);
    
    let printable_item = create_printable(true);
    printable_item.print();
}
```
</UniversalEditor>

### ç‰¹å¾µçš„é—œéµæ¦‚å¿µ

1.  **å…±äº«è¡Œç‚º**: ç‰¹å¾µå®šç¾©äº†ä¸€çµ„å‹åˆ¥å¿…é ˆå¯¦ä½œçš„æ–¹æ³•ã€‚
2.  **Ad-hoc å¤šå‹**: å…è¨±å°‡ä¸åŒå‹åˆ¥è¦–ç‚ºç›¸åŒçš„ç‰¹å¾µã€‚
3.  **é è¨­å¯¦ä½œ**: ç‰¹å¾µå¯ä»¥æä¾›æ–¹æ³•çš„é è¨­å¯¦ä½œã€‚
4.  **ç‰¹å¾µç´„æŸ**: å¼·åˆ¶æ³›å‹å‹åˆ¥å¿…é ˆå¯¦ä½œç‰¹å®šçš„ç‰¹å¾µã€‚
5.  **ç‰¹å¾µç‰©ä»¶**: ä½¿ç”¨ `dyn Trait` åœ¨åŸ·è¡Œæ™‚é€²è¡Œå‹•æ…‹åˆ†æ´¾ã€‚ 