---
title: äºŒåˆ†æŸ¥æ‰¾ï¼ˆé¢˜å•é¡ºåºï¼‰
description: çƒ­é¢˜ 100 - äºŒåˆ†æŸ¥æ‰¾åˆ†ç»„ï¼ˆæŒ‰é¢˜å•é¡ºåºï¼‰ï¼š35 / 74 / 34 / 33 / 153 / 4
---

import { LeetCodeProblem } from "@/components/leetcode/LeetCodeProblem"

æœ¬é¡µåŒ…å«é¢˜å•ã€ŒäºŒåˆ†æŸ¥æ‰¾ã€åˆ†ç»„çš„å…¨éƒ¨é¢˜ç›®ï¼Œé¡ºåºä¸ `list.json` ä¿æŒä¸€è‡´ã€‚

<details>
<summary><strong>äºŒåˆ†æŸ¥æ‰¾ç»Ÿä¸€â€œé˜²å‘æé†’â€</strong>ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary>

- **å…ˆé€‰å®šåŒºé—´è¯­ä¹‰**ï¼š`[l, r)`ï¼ˆå³å¼€ï¼‰æˆ– `[l, r]`ï¼ˆåŒé—­ï¼‰ï¼Œä¸€æ—¦é€‰å®šå°±ä¸è¦æ··ç”¨ã€‚
- **å†™æ¸…æ¥šä¸å˜é‡**ï¼šä¾‹å¦‚ lower_bound çš„ä¸å˜é‡é€šå¸¸æ˜¯ã€Œç­”æ¡ˆå§‹ç»ˆåœ¨ `[l, r)` å†…ã€ã€‚
- **æ›´æ–°è§„åˆ™è¦å¯¹åº”è¯­ä¹‰**ï¼šå³å¼€åŒºé—´å¸¸è§å†™æ³•æ˜¯ `while (l < r)`ï¼Œå‘½ä¸­æ¡ä»¶æ—¶ `r = mid`ï¼Œå¦åˆ™ `l = mid + 1`ã€‚
- **è¾¹ç•Œç”¨ä¾‹ä¸€å®šè¦è¿‡**ï¼šç©ºæ•°ç»„ã€å•å…ƒç´ ã€å…¨ç›¸ç­‰ã€ç›®æ ‡åœ¨ä¸¤ç«¯ã€ç›®æ ‡ä¸å­˜åœ¨ã€‚

</details>

---

## 35. æœç´¢æ’å…¥ä½ç½®

<LeetCodeProblem titleSlug="search-insert-position" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆäºŒåˆ†æ‰¾ lower_boundï¼šç¬¬ä¸€ä¸ª >= target çš„ä½ç½®ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function searchInsert(nums, target) {
  let l = 0
  let r = nums.length // æ³¨æ„ï¼šå³è¾¹ç•Œæ˜¯ nï¼ˆå¼€åŒºé—´ï¼‰ï¼Œæ–¹ä¾¿è¿”å›æ’å…¥ä½ç½®
  while (l < r) {
    const mid = (l + r) >> 1
    if (nums[mid] >= target) r = mid
    else l = mid + 1
  }
  return l
}

// 5 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(searchInsert([1,3,5,6], 5)) // 2
console.log(searchInsert([1,3,5,6], 2)) // 1
console.log(searchInsert([1,3,5,6], 7)) // 4
console.log(searchInsert([1,3,5,6], 0)) // 0
console.log(searchInsert([], 10)) // 0
```

```go !! go
package main

import "fmt"

func searchInsert(nums []int, target int) int {
	l, r := 0, len(nums)
	for l < r {
		mid := (l + r) >> 1
		if nums[mid] >= target {
			r = mid
		} else {
			l = mid + 1
		}
	}
	return l
}

func main() {
	fmt.Println(searchInsert([]int{1, 3, 5, 6}, 5), searchInsert([]int{1, 3, 5, 6}, 2), searchInsert([]int{1, 3, 5, 6}, 7), searchInsert([]int{1, 3, 5, 6}, 0), searchInsert(nil, 10))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆé€šä¿—ç‰ˆ + æ¨ç†è¿‡ç¨‹ï¼‰</summary>

- **é¢˜æ„ç¿»è¯‘**ï¼šå¦‚æœ target åœ¨æ•°ç»„é‡Œï¼Œè¿”å›ä¸‹æ ‡ï¼›ä¸åœ¨çš„è¯ï¼Œè¿”å›â€œæ’è¿›å»è¿˜èƒ½ä¿æŒæœ‰åºâ€çš„ä½ç½®ã€‚
- **å…³é”®æ¨ç†ï¼šæ’å…¥ä½ç½®å°±æ˜¯ç¬¬ä¸€ä¸ª >= target çš„ä½ç½®**ï¼ˆä¹Ÿå« lower_boundï¼‰ã€‚
  - å¦‚æœæ•°ç»„é‡Œå­˜åœ¨ targetï¼Œè¿™ä¸ªä½ç½®æ­£å¥½æ˜¯å®ƒç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼›
  - å¦‚æœä¸å­˜åœ¨ï¼Œè½åœ¨â€œåˆšå¥½æ¯”å®ƒå¤§çš„æ•°å‰é¢â€ï¼Œæ’è¿›å»ä»ç„¶æœ‰åºã€‚
- **ä¸ºä»€ä¹ˆç”¨å³å¼€åŒºé—´ `[0, n)` æ›´èˆ’æœï¼Ÿ**
  - `r` ç›´æ¥ä» n å¼€å§‹ï¼Œæœ€å `l==r` æ—¶å°±æ˜¯ç­”æ¡ˆï¼›
  - ä¸ç”¨ç‰¹æ®Šå¤„ç†â€œæ’åˆ°æœ«å°¾â€çš„æƒ…å†µã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆäºŒåˆ†æ¨¡æ¿ï¼šlower_boundï¼‰</summary>

```javascript
let l = 0, r = n
while (l < r) {
  mid = (l+r)>>1
  if (a[mid] >= x) r = mid
  else l = mid + 1
}
return l
```

</details>

---

## 74. æœç´¢äºŒç»´çŸ©é˜µ

<LeetCodeProblem titleSlug="search-a-2d-matrix" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆæŠŠçŸ©é˜µå½“æˆä¸€ç»´æœ‰åºæ•°ç»„åšäºŒåˆ†ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function searchMatrix(matrix, target) {
  const m = matrix.length
  const n = matrix[0].length
  let l = 0
  let r = m * n - 1
  while (l <= r) {
    const mid = (l + r) >> 1
    const x = matrix[Math.floor(mid / n)][mid % n]
    if (x === target) return true
    if (x < target) l = mid + 1
    else r = mid - 1
  }
  return false
}

// 5 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(searchMatrix([[1,3,5,7],[10,11,16,20],[23,30,34,60]], 3)) // true
console.log(searchMatrix([[1,3,5,7],[10,11,16,20],[23,30,34,60]], 13)) // false
console.log(searchMatrix([[1]], 1)) // true
console.log(searchMatrix([[1]], 2)) // false
console.log(searchMatrix([[1,2,3]], 2)) // true
```

```go !! go
package main

import "fmt"

func searchMatrix(matrix [][]int, target int) bool {
	m, n := len(matrix), len(matrix[0])
	l, r := 0, m*n-1
	for l <= r {
		mid := (l + r) >> 1
		x := matrix[mid/n][mid%n]
		if x == target {
			return true
		}
		if x < target {
			l = mid + 1
		} else {
			r = mid - 1
		}
	}
	return false
}

func main() {
	fmt.Println(searchMatrix([][]int{{1, 3, 5, 7}, {10, 11, 16, 20}, {23, 30, 34, 60}}, 3))
	fmt.Println(searchMatrix([][]int{{1, 3, 5, 7}, {10, 11, 16, 20}, {23, 30, 34, 60}}, 13))
	fmt.Println(searchMatrix([][]int{{1}}, 1), searchMatrix([][]int{{1}}, 2))
	fmt.Println(searchMatrix([][]int{{1, 2, 3}}, 2))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆé€šä¿—ç‰ˆ + æ¨ç†è¿‡ç¨‹ï¼‰</summary>

- é¢˜ç›®ä¿è¯ï¼šæ¯è¡Œé€’å¢ï¼Œä¸”ä¸‹ä¸€è¡Œçš„ç¬¬ä¸€ä¸ª > ä¸Šä¸€è¡Œæœ€åä¸€ä¸ªï¼Œæ‰€ä»¥æ•´ä½“æ˜¯â€œæŒ‰è¡Œæ‹¼èµ·æ¥ä¹Ÿé€’å¢â€ã€‚
- **å…³é”®æ¨ç†**ï¼šæŠŠæ•´ä¸ªçŸ©é˜µæŒ‰è¡Œå±•å¼€æˆä¸€ç»´æ•°ç»„ï¼Œä»ç„¶æ˜¯å‡åºã€‚
- **å¦‚ä½•åœ¨ä¸€ç»´ä¸‹æ ‡ mid å’ŒäºŒç»´åæ ‡ä¹‹é—´è½¬æ¢ï¼Ÿ**
  - è¡Œå·ï¼š`Math.floor(mid / n)`
  - åˆ—å·ï¼š`mid % n`
- è¿™æ ·å°±èƒ½ç›´æ¥åœ¨åŒºé—´ `[0, m*n-1]` ä¸ŠäºŒåˆ†ã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆäºŒç»´ â†’ ä¸€ç»´æ˜ å°„äºŒåˆ†ï¼‰</summary>

```javascript
value(mid) = a[Math.floor(mid / cols)][mid % cols]
```

</details>

---

## 34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®

<LeetCodeProblem titleSlug="find-first-and-last-position-of-element-in-sorted-array" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆä¸¤æ¬¡äºŒåˆ†ï¼šlower_bound ä¸ upper_bound-1ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function searchRange(nums, target) {
  function lowerBound(x) {
    let l = 0, r = nums.length
    while (l < r) {
      const mid = (l + r) >> 1
      if (nums[mid] >= x) r = mid
      else l = mid + 1
    }
    return l
  }

  const left = lowerBound(target)
  const rightPlus = lowerBound(target + 1) // ç¬¬ä¸€ä¸ª >= target+1
  const right = rightPlus - 1

  if (left >= nums.length || nums[left] !== target) return [-1, -1]
  return [left, right]
}

// 5 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(JSON.stringify(searchRange([5,7,7,8,8,10], 8))) // [3,4]
console.log(JSON.stringify(searchRange([5,7,7,8,8,10], 6))) // [-1,-1]
console.log(JSON.stringify(searchRange([], 0))) // [-1,-1]
console.log(JSON.stringify(searchRange([1,1,1,1], 1))) // [0,3]
console.log(JSON.stringify(searchRange([1,2,3], 2))) // [1,1]
```

```go !! go
package main

import "fmt"

func searchRange(nums []int, target int) []int {
	lowerBound := func(x int) int {
		l, r := 0, len(nums)
		for l < r {
			mid := (l + r) >> 1
			if nums[mid] >= x {
				r = mid
			} else {
				l = mid + 1
			}
		}
		return l
	}
	left := lowerBound(target)
	rightPlus := lowerBound(target + 1)
	right := rightPlus - 1
	if left >= len(nums) || nums[left] != target {
		return []int{-1, -1}
	}
	return []int{left, right}
}

func main() {
	fmt.Println(searchRange([]int{5, 7, 7, 8, 8, 10}, 8))
	fmt.Println(searchRange([]int{5, 7, 7, 8, 8, 10}, 6))
	fmt.Println(searchRange(nil, 0))
	fmt.Println(searchRange([]int{1, 1, 1, 1}, 1))
	fmt.Println(searchRange([]int{1, 2, 3}, 2))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆé€šä¿—ç‰ˆ + æ¨ç†è¿‡ç¨‹ï¼‰</summary>

- **ç›®æ ‡**ï¼šæ‰¾ target çš„æœ€å·¦ä¸‹æ ‡å’Œæœ€å³ä¸‹æ ‡ã€‚
- **å…³é”®æ¨ç†ï¼šèŒƒå›´é—®é¢˜å¯ä»¥æ‹†æˆä¸¤ä¸ªâ€œè¾¹ç•Œé—®é¢˜â€**ï¼š
  - æœ€å·¦è¾¹ = ç¬¬ä¸€ä¸ª >= targetï¼ˆlower_boundï¼‰
  - æœ€å³è¾¹ = ç¬¬ä¸€ä¸ª >= target+1 çš„ä½ç½® - 1ï¼ˆä¹Ÿå°±æ˜¯ upper_bound(target)-1ï¼‰
- è¿™æ¯”â€œæ‰¾åˆ°ä¸€ä¸ª target å†å¾€ä¸¤è¾¹æ‰©â€æ›´ç¨³ï¼Œå› ä¸ºæ‰©å±•æœ€åä¼šå˜æˆ \(O(n)\)ã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆæ‰¾åŒºé—´ï¼šlb(x) ä¸ lb(x+1)-1ï¼‰</summary>

```javascript
L = lowerBound(x)
R = lowerBound(x+1) - 1
```

</details>

---

## 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„

<LeetCodeProblem titleSlug="search-in-rotated-sorted-array" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆäºŒåˆ†ï¼šæ¯æ¬¡åˆ¤æ–­å“ªä¸€åŠæ˜¯æœ‰åºçš„ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function search(nums, target) {
  let l = 0, r = nums.length - 1
  while (l <= r) {
    const mid = (l + r) >> 1
    if (nums[mid] === target) return mid

    // å·¦åŠæœ‰åº
    if (nums[l] <= nums[mid]) {
      if (nums[l] <= target && target < nums[mid]) r = mid - 1
      else l = mid + 1
    } else {
      // å³åŠæœ‰åº
      if (nums[mid] < target && target <= nums[r]) l = mid + 1
      else r = mid - 1
    }
  }
  return -1
}

// 5 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(search([4,5,6,7,0,1,2], 0)) // 4
console.log(search([4,5,6,7,0,1,2], 3)) // -1
console.log(search([1], 0)) // -1
console.log(search([1,3], 3)) // 1
console.log(search([3,1], 1)) // 1
```

```go !! go
package main

import "fmt"

func search(nums []int, target int) int {
	l, r := 0, len(nums)-1
	for l <= r {
		mid := (l + r) >> 1
		if nums[mid] == target {
			return mid
		}
		if nums[l] <= nums[mid] {
			if nums[l] <= target && target < nums[mid] {
				r = mid - 1
			} else {
				l = mid + 1
			}
		} else {
			if nums[mid] < target && target <= nums[r] {
				l = mid + 1
			} else {
				r = mid - 1
			}
		}
	}
	return -1
}

func main() {
	fmt.Println(search([]int{4, 5, 6, 7, 0, 1, 2}, 0))
	fmt.Println(search([]int{4, 5, 6, 7, 0, 1, 2}, 3))
	fmt.Println(search([]int{1}, 0))
	fmt.Println(search([]int{1, 3}, 3))
	fmt.Println(search([]int{3, 1}, 1))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆé€šä¿—ç‰ˆ + æ¨ç†è¿‡ç¨‹ï¼‰</summary>

- **æ—‹è½¬æ•°ç»„çš„ç»“æ„**ï¼šæœ¬æ¥æ˜¯å…¨æœ‰åºçš„ï¼Œæ—‹è½¬åå˜æˆâ€œä¸¤ä¸ªæœ‰åºæ®µæ‹¼èµ·æ¥â€ï¼Œä¸­é—´æœ‰ä¸€ä¸ªæ–­ç‚¹ã€‚
- **äºŒåˆ†è¿˜èƒ½ç”¨å—ï¼Ÿèƒ½ï¼Œä½†æ¯”è¾ƒè§„åˆ™è¦å˜**ï¼š
  - åœ¨ `[l, mid]` æˆ– `[mid, r]` é‡Œå¿…æœ‰ä¸€åŠæ˜¯æœ‰åºçš„ï¼ˆå› ä¸ºåªæœ‰ä¸€ä¸ªæ–­ç‚¹ï¼‰ã€‚
- **æ¨ç†æ­¥éª¤**ï¼š
  1. å…ˆåˆ¤æ–­å·¦åŠæ˜¯å¦æœ‰åºï¼š`nums[l] <= nums[mid]`
  2. å¦‚æœå·¦åŠæœ‰åºï¼Œå†åˆ¤æ–­ target æ˜¯å¦è½åœ¨å·¦åŠåŒºé—´å†…ï¼›è½åœ¨å°±ç¼©å³è¾¹ç•Œï¼Œå¦åˆ™å»å³åŠã€‚
  3. å¦‚æœå·¦åŠæ— åºï¼Œé‚£ä¹ˆå³åŠå¿…æœ‰åºï¼ŒåŒç†åˆ¤æ–­ target æ˜¯å¦è½åœ¨å³åŠã€‚
- æ¯æ¬¡éƒ½èƒ½æ’é™¤ä¸€åŠåŒºé—´ï¼Œä¿æŒ \(O(\log n)\)ã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆæ—‹è½¬æ•°ç»„äºŒåˆ†æ¨¡æ¿ï¼šå…ˆåˆ¤æœ‰åºåŠåŒºå†ç¼©è¾¹ç•Œï¼‰</summary>

```javascript
if leftSorted:
  if target in [l,mid): r=mid-1 else l=mid+1
else:
  if target in (mid,r]: l=mid+1 else r=mid-1
```

</details>

---

## 153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼

<LeetCodeProblem titleSlug="find-minimum-in-rotated-sorted-array" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆäºŒåˆ†ï¼šæœ€å°å€¼åœ¨â€œæ— åºçš„ä¸€ä¾§â€ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function findMin(nums) {
  let l = 0, r = nums.length - 1
  while (l < r) {
    const mid = (l + r) >> 1
    if (nums[mid] > nums[r]) {
      // æœ€å°å€¼åœ¨å³ä¾§ï¼ˆmid è¿˜åœ¨å·¦æ®µï¼‰
      l = mid + 1
    } else {
      // æœ€å°å€¼åœ¨å·¦ä¾§æˆ–å°±æ˜¯ mid
      r = mid
    }
  }
  return nums[l]
}

// 5 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(findMin([3,4,5,1,2])) // 1
console.log(findMin([4,5,6,7,0,1,2])) // 0
console.log(findMin([11,13,15,17])) // 11
console.log(findMin([2,1])) // 1
console.log(findMin([1])) // 1
```

```go !! go
package main

import "fmt"

func findMin(nums []int) int {
	l, r := 0, len(nums)-1
	for l < r {
		mid := (l + r) >> 1
		if nums[mid] > nums[r] {
			l = mid + 1
		} else {
			r = mid
		}
	}
	return nums[l]
}

func main() {
	fmt.Println(findMin([]int{3, 4, 5, 1, 2}), findMin([]int{4, 5, 6, 7, 0, 1, 2}), findMin([]int{11, 13, 15, 17}), findMin([]int{2, 1}), findMin([]int{1}))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆç”¨ä¸€ä¸ªä¾‹å­ï¼Œä¸€æ­¥ä¸€æ­¥çœ‹äºŒåˆ†æ€ä¹ˆæ‰¾åˆ°æœ€å°å€¼ï¼‰</summary>

### ğŸ§ª ç¤ºä¾‹æ•°ç»„

```
nums = [4, 5, 6, 7, 0, 1, 2]
```

è¿™æ˜¯ä¸€ä¸ªæ—‹è½¬åçš„æ’åºæ•°ç»„ï¼ŒåŸæœ¬æ˜¯ `[0, 1, 2, 4, 5, 6, 7]`ï¼Œæ—‹è½¬åæœ€å°å€¼ `0` è·‘åˆ°äº†ä¸­é—´ã€‚

---

### ğŸ” ç¬¬ 1 æ­¥ï¼ˆç¬¬ä¸€æ¬¡äºŒåˆ†ï¼‰

```
l = 0, r = 6
mid = (0 + 6) >> 1 = 3
```

**å½“å‰çŠ¶æ€ï¼š**

```
ç´¢å¼•:  0  1  2  3  4  5  6
æ•°ç»„: [4, 5, 6, 7, 0, 1, 2]
              â†‘
            mid=3
```

**æ¯”è¾ƒï¼š**

```
nums[mid] = 7
nums[r]   = 2
7 > 2  âœ”
```

**è¯´æ˜ä»€ä¹ˆï¼Ÿ**

`nums[mid] > nums[r]` æ„å‘³ç€ï¼š
- mid è¿˜åœ¨**å·¦ä¾§å¤§æ•°åŒº**ï¼ˆ4,5,6,7ï¼‰
- æœ€å°å€¼ä¸€å®šåœ¨ mid çš„**å³è¾¹**ï¼ˆå› ä¸ºå³ä¾§æœ‰æ›´å°çš„æ•° 2ï¼‰

ğŸ§  **å¾€å³æ‰¾ï¼š`l = mid + 1 = 4`**

---

### ğŸ” ç¬¬ 2 æ­¥ï¼ˆç»§ç»­äºŒåˆ†ï¼‰

```
l = 4, r = 6
mid = (4 + 6) >> 1 = 5
```

**å½“å‰çŠ¶æ€ï¼š**

```
ç´¢å¼•:  0  1  2  3  4  5  6
æ•°ç»„: [4, 5, 6, 7, 0, 1, 2]
                    â†‘
                  mid=5
```

**æ¯”è¾ƒï¼š**

```
nums[mid] = 1
nums[r]   = 2
1 < 2  âœ”
```

**è¯´æ˜ä»€ä¹ˆï¼Ÿ**

`nums[mid] < nums[r]` æ„å‘³ç€ï¼š
- mid å·²ç»åœ¨**å³ä¾§å°æ•°åŒº**ï¼ˆ0,1,2ï¼‰
- æœ€å°å€¼åœ¨ mid çš„**å·¦è¾¹æˆ–å°±æ˜¯ mid**

ğŸ§  **å¾€å·¦æ‰¾ï¼ˆåŒ…å« midï¼‰ï¼š`r = mid = 5`**

---

### ğŸ” ç¬¬ 3 æ­¥ï¼ˆç»§ç»­äºŒåˆ†ï¼‰

```
l = 4, r = 5
mid = (4 + 5) >> 1 = 4
```

**å½“å‰çŠ¶æ€ï¼š**

```
ç´¢å¼•:  0  1  2  3  4  5  6
æ•°ç»„: [4, 5, 6, 7, 0, 1, 2]
                    â†‘
                  mid=4
```

**æ¯”è¾ƒï¼š**

```
nums[mid] = 0
nums[r]   = 1
0 < 1  âœ”
```

**è¯´æ˜ä»€ä¹ˆï¼Ÿ**

`nums[mid] < nums[r]`ï¼Œæœ€å°å€¼åœ¨å·¦è¾¹æˆ–å°±æ˜¯ midã€‚

ğŸ§  **å¾€å·¦æ‰¾ï¼ˆåŒ…å« midï¼‰ï¼š`r = mid = 4`**

---

### ğŸ† æ‰¾åˆ°æœ€å°å€¼ï¼

```
l = 4, r = 4
l === rï¼Œé€€å‡ºå¾ªç¯
```

**ç­”æ¡ˆï¼š`nums[4] = 0`** âœ…

---

### ğŸ“‰ äºŒåˆ†ç§»åŠ¨æœ¬è´¨

| æƒ…å†µ | è¯´æ˜ | ç§»åŠ¨æ–¹å‘ |
|------|------|---------|
| `nums[mid] > nums[r]` | mid åœ¨å·¦ä¾§å¤§æ•°åŒº | ğŸ‘‰ å¾€å³æ‰¾ |
| `nums[mid] < nums[r]` | mid åœ¨å³ä¾§å°æ•°åŒº | ğŸ‘ˆ å¾€å·¦æ‰¾ï¼ˆåŒ…å« midï¼‰ |

**ä¸ºä»€ä¹ˆç”¨ `nums[r]` å½“å‚ç…§ï¼Ÿ**

å› ä¸ºæ—‹è½¬åï¼Œæ•°ç»„è¢«åˆ†æˆä¸¤æ®µï¼š
- **å·¦æ®µ**ï¼šå¤§æ•°ï¼ˆæ¯”å³ç«¯ç‚¹å¤§ï¼‰
- **å³æ®µ**ï¼šå°æ•°ï¼ˆæ¯”å³ç«¯ç‚¹å°æˆ–ç­‰äºï¼‰

é€šè¿‡æ¯”è¾ƒ mid å’Œå³ç«¯ç‚¹ï¼Œå°±èƒ½çŸ¥é“ mid åœ¨å“ªä¸€æ®µï¼Œä»è€ŒçŸ¥é“æœ€å°å€¼åœ¨å“ªè¾¹ã€‚

---

### ğŸ§  å…³é”®é¡¿æ‚Ÿç‚¹

> **"æˆ‘ä¸æ˜¯åœ¨æ‰¾æ•°ï¼Œæˆ‘æ˜¯åœ¨æ‰¾æ—‹è½¬æ–­ç‚¹"**

æ—‹è½¬æ–­ç‚¹å°±æ˜¯æœ€å°å€¼çš„ä½ç½®ã€‚é€šè¿‡æ¯”è¾ƒ mid å’Œå³ç«¯ç‚¹ï¼Œæ¯æ¬¡éƒ½èƒ½æ’é™¤ä¸€åŠï¼Œè¿™å°±æ˜¯äºŒåˆ†ã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆæ‰¾æ—‹è½¬æ–­ç‚¹ï¼šæ¯”è¾ƒ mid ä¸ç«¯ç‚¹ï¼‰</summary>

```javascript
if a[mid] > a[r]: l=mid+1 else r=mid
```

</details>

---

## 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°

<LeetCodeProblem titleSlug="median-of-two-sorted-arrays" />

<details>
<summary><strong>æœ€ä¼˜è§£</strong>ï¼ˆäºŒåˆ†åˆ‡åˆ†ï¼šåœ¨è¾ƒçŸ­æ•°ç»„ä¸Šæ‰¾â€œå®Œç¾åˆ†å‰²â€ï¼‰</summary>

<UniversalEditor title=" " compare={true}>
```javascript !! js
function findMedianSortedArrays(nums1, nums2) {
  // ä¿è¯ nums1 æ˜¯æ›´çŸ­çš„é‚£ä¸ª
  if (nums1.length > nums2.length) return findMedianSortedArrays(nums2, nums1)
  const m = nums1.length
  const n = nums2.length

  const totalLeft = Math.floor((m + n + 1) / 2)
  let l = 0, r = m

  while (l <= r) {
    const i = (l + r) >> 1 // nums1 å·¦è¾¹å– i ä¸ª
    const j = totalLeft - i // nums2 å·¦è¾¹å– j ä¸ª

    const aLeft = i === 0 ? -Infinity : nums1[i - 1]
    const aRight = i === m ? Infinity : nums1[i]
    const bLeft = j === 0 ? -Infinity : nums2[j - 1]
    const bRight = j === n ? Infinity : nums2[j]

    // æ‰¾åˆ°å®Œç¾åˆ†å‰²ï¼šå·¦è¾¹æœ€å¤§ <= å³è¾¹æœ€å°
    if (aLeft <= bRight && bLeft <= aRight) {
      if ((m + n) % 2 === 1) return Math.max(aLeft, bLeft)
      return (Math.max(aLeft, bLeft) + Math.min(aRight, bRight)) / 2
    }

    // i å¤ªå¤§ï¼šaLeft å¤ªå¤§ï¼Œéœ€è¦å‡å°‘ i
    if (aLeft > bRight) r = i - 1
    else l = i + 1
  }
  return null
}

// 6 ä¸ªæµ‹è¯•ç”¨ä¾‹
console.log(findMedianSortedArrays([1, 3, 8], [2, 7, 10, 12])) // 7 (è®²è§£ä¸­çš„ä¾‹å­)
console.log(findMedianSortedArrays([1,3], [2])) // 2
console.log(findMedianSortedArrays([1,2], [3,4])) // 2.5
console.log(findMedianSortedArrays([], [1])) // 1
console.log(findMedianSortedArrays([0,0], [0,0])) // 0
console.log(findMedianSortedArrays([2], [])) // 2
```

```go !! go
package main

import "fmt"

func findMedianSortedArrays(nums1, nums2 []int) float64 {
	if len(nums1) > len(nums2) {
		return findMedianSortedArrays(nums2, nums1)
	}
	m, n := len(nums1), len(nums2)
	totalLeft := (m + n + 1) / 2
	l, r := 0, m
	for l <= r {
		i := (l + r) >> 1
		j := totalLeft - i
		aLeft := -1 << 40
		if i > 0 {
			aLeft = nums1[i-1]
		}
		aRight := 1<<40 - 1
		if i < m {
			aRight = nums1[i]
		}
		bLeft := -1 << 40
		if j > 0 {
			bLeft = nums2[j-1]
		}
		bRight := 1<<40 - 1
		if j < n {
			bRight = nums2[j]
		}
		if aLeft <= bRight && bLeft <= aRight {
			if (m+n)%2 == 1 {
				return float64(max(aLeft, bLeft))
			}
			return float64(max(aLeft, bLeft)+min(aRight, bRight)) / 2
		}
		if aLeft > bRight {
			r = i - 1
		} else {
			l = i + 1
		}
	}
	return 0
}

func max(a, b int) int {
	if a > b {
		return a
	}
	return b
}
func min(a, b int) int {
	if a < b {
		return a
	}
	return b
}

func main() {
	fmt.Println(findMedianSortedArrays([]int{1, 3, 8}, []int{2, 7, 10, 12})) // 7 (è®²è§£ä¸­çš„ä¾‹å­)
	fmt.Println(findMedianSortedArrays([]int{1, 3}, []int{2}))
	fmt.Println(findMedianSortedArrays([]int{1, 2}, []int{3, 4}))
	fmt.Println(findMedianSortedArrays(nil, []int{1}))
	fmt.Println(findMedianSortedArrays([]int{0, 0}, []int{0, 0}))
	fmt.Println(findMedianSortedArrays([]int{2}, nil))
}
```
</UniversalEditor>

</details>

<details>
<summary><strong>æœ€ä¼˜è§£è®²è§£</strong>ï¼ˆç”¨ä¸€ä¸ªç»å…¸ä¾‹å­ï¼Œä¸€æ­¥ä¸€æ­¥çœ‹åˆ€æ˜¯æ€ä¹ˆç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®çš„ï¼‰</summary>

### ğŸ§ª ç¤ºä¾‹æ•°ç»„

```
A = [1, 3, 8]          (çŸ­çš„æ•°ç»„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒäºŒåˆ†)
B = [2, 7, 10, 12]
```

**æ€»é•¿åº¦ = 7**  
**å·¦è¾¹éœ€è¦ (7 + 1) // 2 = 4 ä¸ªæ•°**

æˆ‘ä»¬è¦æ‰¾ï¼š
- ğŸ‘‰ ä» A é‡Œæ‹¿ i ä¸ª
- ğŸ‘‰ ä» B é‡Œæ‹¿ j = 4 - i ä¸ª

---

### ğŸ” ç¬¬ 1 åˆ€ï¼ˆç¬¬ä¸€æ¬¡äºŒåˆ†ï¼‰

A é•¿åº¦æ˜¯ 3ï¼Œæˆ‘ä»¬åœ¨åŒºé—´ `[0, 3]` é‡ŒäºŒåˆ†

```
i = 1
j = 4 - 1 = 3
```

**åˆ‡å¼€å˜æˆï¼š**

```
A: [1 | 3 8]
B: [2 7 10 | 12]
```

**å·¦å³ä¸¤è¾¹æ˜¯ï¼š**

```
å·¦è¾¹ï¼š1, 2, 7, 10
å³è¾¹ï¼š3, 8, 12
```

æˆ‘ä»¬åªçœ‹è¾¹ç•Œ 4 ä¸ªæ•°ï¼š

| åå­— | å€¼ |
|------|-----|
| Aleft | 1 |
| Aright | 3 |
| Bleft | 10 |
| Bright | 12 |

**æ£€æŸ¥æ˜¯å¦æ»¡è¶³ï¼š**

```
Aleft â‰¤ Bright   â†’ 1 â‰¤ 12  âœ”
Bleft â‰¤ Aright   â†’ 10 â‰¤ 3  âŒ
```

âŒ **ä¸æ»¡è¶³ï¼**  
è€Œä¸”æ˜¯ `Bleft > Aright`

**è¯´æ˜ä»€ä¹ˆï¼Ÿ**

B å·¦è¾¹æœ€å¤§çš„ 10 æ¯” A å³è¾¹æœ€å°çš„ 3 è¿˜å¤§  
ğŸ‘‰ **è¯´æ˜ A è¿™è¾¹åˆ‡å¤ªå°‘äº†ï¼**

ğŸ§  **åˆ€è¦å¾€ å³è¾¹ç§»åŠ¨**

---

### ğŸ” ç¬¬ 2 åˆ€ï¼ˆå‘å³äºŒåˆ†ï¼‰

ç°åœ¨åœ¨ A çš„åŒºé—´ `[2, 3]` ç»§ç»­äºŒåˆ†

```
i = 2
j = 4 - 2 = 2
```

**åˆ‡å¼€ï¼š**

```
A: [1 3 | 8]
B: [2 7 | 10 12]
```

**å·¦å³ä¸¤è¾¹ï¼š**

```
å·¦è¾¹ï¼š1, 3, 2, 7
å³è¾¹ï¼š8, 10, 12
```

**è¾¹ç•Œå€¼ï¼š**

| åå­— | å€¼ |
|------|-----|
| Aleft | 3 |
| Aright | 8 |
| Bleft | 7 |
| Bright | 10 |

**æ£€æŸ¥æ¡ä»¶ï¼š**

```
Aleft â‰¤ Bright   â†’ 3 â‰¤ 10 âœ”
Bleft â‰¤ Aright   â†’ 7 â‰¤ 8  âœ”
```

ğŸ¯ **å®Œç¾ï¼**

---

### ğŸ† æ‰¾åˆ°æ­£ç¡®åˆ‡å‰²ï¼

å› ä¸ºæ€»é•¿åº¦æ˜¯å¥‡æ•°ï¼š

```
ä¸­ä½æ•° = å·¦è¾¹æœ€å¤§å€¼
      = max(Aleft, Bleft)
      = max(3, 7)
      = 7
```

---

### ğŸ“‰ äºŒåˆ†ç§»åŠ¨æœ¬è´¨

| æƒ…å†µ | è¯´æ˜ | åˆ€ç§»åŠ¨æ–¹å‘ |
|------|------|-----------|
| `Bleft > Aright` | A åˆ‡å¤ªå°‘ | ğŸ‘‰ å³ç§» |
| `Aleft > Bright` | A åˆ‡å¤ªå¤š | ğŸ‘ˆ å·¦ç§» |

æ¯æ¬¡éƒ½èƒ½æ’é™¤ä¸€åŠä½ç½®ï¼Œè¿™å°±æ˜¯äºŒåˆ†ã€‚

---

### ğŸ§  å…³é”®é¡¿æ‚Ÿç‚¹

æˆ‘ä»¬ä»å¤´åˆ°å°¾ï¼š

- âœ… **æ²¡åˆå¹¶æ•°ç»„**
- âœ… **æ²¡çœŸçš„æ‰¾"ä¸­é—´ä½ç½®"**
- âœ… **åªæ˜¯ä¸æ–­è°ƒæ•´"åˆ†ç•Œçº¿"**

å½“ä½ è„‘å­é‡Œå˜æˆï¼š

> **"æˆ‘ä¸æ˜¯åœ¨æ‰¾æ•°ï¼Œæˆ‘æ˜¯åœ¨æ‰¾ å¹³è¡¡åˆ†ç•Œçº¿"**

è¿™é¢˜å°±é€šäº†ã€‚

---

### ğŸ’¡ ç®—æ³•æ ¸å¿ƒæ€æƒ³

- **ç›®æ ‡**ï¼šä¸æŠŠä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼ˆåˆå¹¶è¦ \(O(m+n)\)ï¼‰ï¼Œè€Œæ˜¯ç”¨ \(O(\log \min(m,n))\) æ‰¾ä¸­ä½æ•°ã€‚
- **å…³é”®æƒ³æ³•ï¼šæŠŠ"ä¸­ä½æ•°"æ”¹å†™æˆ"æŠŠæ‰€æœ‰æ•°åˆ†æˆå·¦å³ä¸¤åŠ"**ï¼š
  - å·¦åŠéƒ¨åˆ†åŒ…å«æ€»æ•°çš„ä¸€åŠï¼ˆå‘ä¸‹å–æ•´ï¼‰ï¼Œå³åŠéƒ¨åˆ†åŒ…å«å‰©ä¸‹çš„ã€‚
  - ä¸­ä½æ•°åªå’Œ"å·¦åŠæœ€å¤§å€¼""å³åŠæœ€å°å€¼"æœ‰å…³ã€‚
- **ä¸ºä»€ä¹ˆåœ¨çŸ­æ•°ç»„ä¸ŠäºŒåˆ†ï¼Ÿ**
  - i çš„èŒƒå›´æ˜¯ `[0..m]`ï¼Œm è¶Šå°äºŒåˆ†è¶Šå¿«ï¼Œè€Œä¸” j ä¼šè‡ªåŠ¨ç”± `totalLeft - i` å†³å®šã€‚

</details>

<details>
<summary><strong>ç±»ä¼¼é¢˜ç›®</strong>ï¼ˆäºŒåˆ†åˆ‡åˆ†ï¼šç”¨å››ä¸ªè¾¹ç•Œåˆ¤æ–­æ˜¯å¦â€œåˆ†å‰²æ­£ç¡®â€ï¼‰</summary>

```javascript
choose i in A, j in B
if A[i-1] <= B[j] && B[j-1] <= A[i]: ok
else adjust i by binary search
```

</details>

